import{j as k}from"./jsx-runtime.D_zvdyIk.js";import{r as P}from"./index.dRvCetEN.js";import{n as Ka}from"./router.2W7FzLmj.js";import"./index.BLy_0GNg.js";const wi=(t,e,n={})=>{if(!Number.isFinite(e))throw new TypeError("Expected `wait` to be a finite number");let s,r,i=[];const o=()=>{clearTimeout(r),r=void 0;try{n.signal?.throwIfAborted()}catch(a){for(const{reject:c}of i)c(a);i=[]}};return function(...a){return new Promise((c,u)=>{try{n.signal?.throwIfAborted()}catch(f){u(f);return}const l=n.before&&!r;clearTimeout(r),r=setTimeout(async()=>{r=void 0;const f=i;i=[];try{const h=n.before?s:await t.apply(this,a);for(const{resolve:g}of f)g(h)}catch(h){for(const{reject:g}of f)g(h)}s=void 0,n.signal?.removeEventListener("abort",o)},e),l?(async()=>{try{s=await t.apply(this,a),c(s)}catch(f){u(f)}})():(i.push({resolve:c,reject:u}),n.signal&&i.length===1&&n.signal.addEventListener("abort",o,{once:!0}))})}};wi.promise=(t,e={})=>{let n,s;return async function(...r){if(n)return e.after?(s??={resolvers:[]},s.arguments=r,s.context=this,new Promise((i,o)=>{s.resolvers.push({resolve:i,reject:o})})):n;n=(async()=>{let i,o;try{i=await t.apply(this,r)}catch(a){o=a}for(;s;){const a=s;s=void 0;try{const c=await t.apply(a.context,a.arguments);for(const{resolve:u}of a.resolvers)u(c)}catch(c){for(const{reject:u}of a.resolvers)u(c)}}if(o)throw o;return i})();try{return await n}finally{n=void 0}}};var Fe={},M={},R={},Os;function Ti(){if(Os)return R;Os=1;var t=R&&R.__extends||(function(){var m=function(p,d){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,S){y.__proto__=S}||function(y,S){for(var v in S)Object.prototype.hasOwnProperty.call(S,v)&&(y[v]=S[v])},m(p,d)};return function(p,d){m(p,d);function y(){this.constructor=p}p.prototype=d===null?Object.create(d):(y.prototype=d.prototype,new y)}})(),e=R&&R.__awaiter||function(m,p,d,y){function S(v){return v instanceof d?v:new d(function(b){b(v)})}return new(d||(d=Promise))(function(v,b){function x(T){try{w(y.next(T))}catch(D){b(D)}}function A(T){try{w(y.throw(T))}catch(D){b(D)}}function w(T){T.done?v(T.value):S(T.value).then(x,A)}w((y=y.apply(m,p||[])).next())})},n=R&&R.__generator||function(m,p){var d={label:0,sent:function(){if(v[0]&1)throw v[1];return v[1]},trys:[],ops:[]},y,S,v,b;return b={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function x(w){return function(T){return A([w,T])}}function A(w){if(y)throw new TypeError("Generator is already executing.");for(;d;)try{if(y=1,S&&(v=w[0]&2?S.return:w[0]?S.throw||((v=S.return)&&v.call(S),0):S.next)&&!(v=v.call(S,w[1])).done)return v;switch(S=0,v&&(w=[w[0]&2,v.value]),w[0]){case 0:case 1:v=w;break;case 4:return d.label++,{value:w[1],done:!1};case 5:d.label++,S=w[1],w=[0];continue;case 7:w=d.ops.pop(),d.trys.pop();continue;default:if(v=d.trys,!(v=v.length>0&&v[v.length-1])&&(w[0]===6||w[0]===2)){d=0;continue}if(w[0]===3&&(!v||w[1]>v[0]&&w[1]<v[3])){d.label=w[1];break}if(w[0]===6&&d.label<v[1]){d.label=v[1],v=w;break}if(v&&d.label<v[2]){d.label=v[2],d.ops.push(w);break}v[2]&&d.ops.pop(),d.trys.pop();continue}w=p.call(m,d)}catch(T){w=[6,T],S=0}finally{y=v=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},s=R&&R.__read||function(m,p){var d=typeof Symbol=="function"&&m[Symbol.iterator];if(!d)return m;var y=d.call(m),S,v=[],b;try{for(;(p===void 0||p-- >0)&&!(S=y.next()).done;)v.push(S.value)}catch(x){b={error:x}}finally{try{S&&!S.done&&(d=y.return)&&d.call(y)}finally{if(b)throw b.error}}return v},r=R&&R.__spread||function(){for(var m=[],p=0;p<arguments.length;p++)m=m.concat(s(arguments[p]));return m};Object.defineProperty(R,"__esModule",{value:!0}),R.zip2=R.join=R.optionify=R.AsyncNone=R.None=R.AsyncSome=R.Some=void 0;var i=xi(),o=(function(){function m(p){this._value=p}return m})(),a=(function(m){t(p,m);function p(){return m!==null&&m.apply(this,arguments)||this}return p.prototype.isSome=function(){return!0},p.prototype.isNone=function(){return!1},p.prototype.map=function(d){return new p(d(this._value))},p.prototype.mapNullable=function(d){return f(d(this._value))},p.prototype.mapOr=function(d,y){return new p(y(this._value))},p.prototype.mapOrElse=function(d,y){return y(this._value)},p.prototype.filter=function(d){return d(this._value)?new p(this._value):new u},p.prototype.and=function(d){return d},p.prototype.andThen=function(d){return d(this._value)},p.prototype.or=function(d){return new p(this._value)},p.prototype.orElse=function(d){return new p(this._value)},p.prototype.xor=function(d){var y=this;return d.mapOrElse(function(){return new p(y._value)},function(){return new u})},p.prototype.zip=function(d){var y=this;return d.andThen(function(S){return new p([y._value,S])})},p.prototype.okOr=function(d){return new i.Ok(this._value)},p.prototype.okOrElse=function(d){return new i.Ok(this._value)},p.prototype.unwrap=function(){return this._value},p.prototype.unwrapNullable=function(){return this._value},p.prototype.unwrapOr=function(d){return this._value},p.prototype.unwrapOrElse=function(d){return this._value},p.prototype.async=function(){return new c(this._value)},p})(o);R.Some=a;var c=(function(m){t(p,m);function p(){return m!==null&&m.apply(this,arguments)||this}return p.prototype.map=function(d){return e(this,void 0,void 0,function(){var y;return n(this,function(S){switch(S.label){case 0:return y=a.bind,[4,d(this._value)];case 1:return[2,new(y.apply(a,[void 0,S.sent()]))]}})})},p.prototype.mapNullable=function(d){return e(this,void 0,void 0,function(){var y;return n(this,function(S){switch(S.label){case 0:return y=f,[4,d(this._value)];case 1:return[2,y.apply(void 0,[S.sent()])]}})})},p.prototype.filter=function(d){return e(this,void 0,void 0,function(){return n(this,function(y){switch(y.label){case 0:return[4,d(this._value)];case 1:return[2,y.sent()?new a(this._value):new u]}})})},p.prototype.andThen=function(d){return e(this,void 0,void 0,function(){return n(this,function(y){return[2,d(this._value)]})})},p.prototype.unwrapOrElse=function(d){return e(this,void 0,void 0,function(){return n(this,function(y){return[2,this._value]})})},p.prototype.orElse=function(d){return e(this,void 0,void 0,function(){return n(this,function(y){return[2,new a(this._value)]})})},p.prototype.okOrElse=function(d){return e(this,void 0,void 0,function(){return n(this,function(y){return[2,new i.Ok(this._value)]})})},p})(o);R.AsyncSome=c;var u=(function(){function m(){}return m.prototype.isSome=function(){return!1},m.prototype.isNone=function(){return!0},m.prototype.map=function(p){return new m},m.prototype.mapNullable=function(p){return new m},m.prototype.mapOr=function(p,d){return new a(p)},m.prototype.mapOrElse=function(p,d){return p()},m.prototype.filter=function(p){return new m},m.prototype.and=function(p){return new m},m.prototype.andThen=function(p){return new m},m.prototype.or=function(p){return p},m.prototype.orElse=function(p){return p()},m.prototype.xor=function(p){return p},m.prototype.zip=function(p){return new m},m.prototype.okOr=function(p){return new i.Err(p)},m.prototype.okOrElse=function(p){return new i.Err(p())},m.prototype.unwrap=function(){throw new Error("Unwrapped a None")},m.prototype.unwrapNullable=function(){return null},m.prototype.unwrapOr=function(p){return p},m.prototype.unwrapOrElse=function(p){return p()},m.prototype.async=function(){return new l},m})();R.None=u;var l=(function(){function m(){}return m.prototype.map=function(p){return e(this,void 0,void 0,function(){return n(this,function(d){return[2,new u]})})},m.prototype.mapNullable=function(p){return e(this,void 0,void 0,function(){return n(this,function(d){return[2,new u]})})},m.prototype.filter=function(p){return e(this,void 0,void 0,function(){return n(this,function(d){return[2,new u]})})},m.prototype.andThen=function(p){return e(this,void 0,void 0,function(){return n(this,function(d){return[2,new u]})})},m.prototype.orElse=function(p){return e(this,void 0,void 0,function(){return n(this,function(d){return[2,p()]})})},m.prototype.okOrElse=function(p){return e(this,void 0,void 0,function(){var d;return n(this,function(y){switch(y.label){case 0:return d=i.Err.bind,[4,p()];case 1:return[2,new(d.apply(i.Err,[void 0,y.sent()]))]}})})},m.prototype.unwrapOrElse=function(p){return e(this,void 0,void 0,function(){return n(this,function(d){return[2,p()]})})},m})();R.AsyncNone=l;function f(m){return m==null?new u:new a(m)}R.optionify=f;function h(m){for(var p=[],d=1;d<arguments.length;d++)p[d-1]=arguments[d];return p.reduce(function(y,S){return y.andThen(function(v){return S.map(function(b){return r(v,[b])})})},m.map(function(y){return[y]}))}R.join=h;function g(m,p){return m.andThen(function(d){return p.map(function(y){return[d,y]})})}return R.zip2=g,R}var Ms;function xi(){if(Ms)return M;Ms=1;var t=M&&M.__extends||(function(){var m=function(p,d){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,S){y.__proto__=S}||function(y,S){for(var v in S)Object.prototype.hasOwnProperty.call(S,v)&&(y[v]=S[v])},m(p,d)};return function(p,d){m(p,d);function y(){this.constructor=p}p.prototype=d===null?Object.create(d):(y.prototype=d.prototype,new y)}})(),e=M&&M.__awaiter||function(m,p,d,y){function S(v){return v instanceof d?v:new d(function(b){b(v)})}return new(d||(d=Promise))(function(v,b){function x(T){try{w(y.next(T))}catch(D){b(D)}}function A(T){try{w(y.throw(T))}catch(D){b(D)}}function w(T){T.done?v(T.value):S(T.value).then(x,A)}w((y=y.apply(m,p||[])).next())})},n=M&&M.__generator||function(m,p){var d={label:0,sent:function(){if(v[0]&1)throw v[1];return v[1]},trys:[],ops:[]},y,S,v,b;return b={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function x(w){return function(T){return A([w,T])}}function A(w){if(y)throw new TypeError("Generator is already executing.");for(;d;)try{if(y=1,S&&(v=w[0]&2?S.return:w[0]?S.throw||((v=S.return)&&v.call(S),0):S.next)&&!(v=v.call(S,w[1])).done)return v;switch(S=0,v&&(w=[w[0]&2,v.value]),w[0]){case 0:case 1:v=w;break;case 4:return d.label++,{value:w[1],done:!1};case 5:d.label++,S=w[1],w=[0];continue;case 7:w=d.ops.pop(),d.trys.pop();continue;default:if(v=d.trys,!(v=v.length>0&&v[v.length-1])&&(w[0]===6||w[0]===2)){d=0;continue}if(w[0]===3&&(!v||w[1]>v[0]&&w[1]<v[3])){d.label=w[1];break}if(w[0]===6&&d.label<v[1]){d.label=v[1],v=w;break}if(v&&d.label<v[2]){d.label=v[2],d.ops.push(w);break}v[2]&&d.ops.pop(),d.trys.pop();continue}w=p.call(m,d)}catch(T){w=[6,T],S=0}finally{y=v=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},s=M&&M.__read||function(m,p){var d=typeof Symbol=="function"&&m[Symbol.iterator];if(!d)return m;var y=d.call(m),S,v=[],b;try{for(;(p===void 0||p-- >0)&&!(S=y.next()).done;)v.push(S.value)}catch(x){b={error:x}}finally{try{S&&!S.done&&(d=y.return)&&d.call(y)}finally{if(b)throw b.error}}return v},r=M&&M.__spread||function(){for(var m=[],p=0;p<arguments.length;p++)m=m.concat(s(arguments[p]));return m};Object.defineProperty(M,"__esModule",{value:!0}),M.asResult=M.resultify=M.AsyncErr=M.Err=M.AsyncOk=M.Ok=void 0;var i=Ti(),o=(function(){function m(p){this._value=p}return m})(),a=(function(m){t(p,m);function p(){return m!==null&&m.apply(this,arguments)||this}return p.prototype.isOk=function(){return!0},p.prototype.isErr=function(){return!1},p.prototype.map=function(d){return new p(d(this._value))},p.prototype.mapErr=function(d){return new p(this._value)},p.prototype.mapOr=function(d,y){return y(this._value)},p.prototype.mapOrElse=function(d,y){return y(this._value)},p.prototype.and=function(d){return d},p.prototype.andThen=function(d){return d(this._value)},p.prototype.or=function(d){return new p(this._value)},p.prototype.orElse=function(d){return new p(this._value)},p.prototype.ok=function(){return new i.Some(this._value)},p.prototype.unwrap=function(){return this._value},p.prototype.unwrapErr=function(){throw new Error("unwrapErr on an Ok()")},p.prototype.unwrapOr=function(d){return this._value},p.prototype.unwrapOrElse=function(d){return this._value},p.prototype.async=function(){return new c(this._value)},p})(o);M.Ok=a;var c=(function(m){t(p,m);function p(){return m!==null&&m.apply(this,arguments)||this}return p.prototype.map=function(d){return e(this,void 0,void 0,function(){var y;return n(this,function(S){switch(S.label){case 0:return y=a.bind,[4,d(this._value)];case 1:return[2,new(y.apply(a,[void 0,S.sent()]))]}})})},p.prototype.mapErr=function(d){return e(this,void 0,void 0,function(){return n(this,function(y){return[2,new a(this._value)]})})},p.prototype.mapOr=function(d,y){return e(this,void 0,void 0,function(){return n(this,function(S){return[2,y(this._value)]})})},p.prototype.mapOrElse=function(d,y){return e(this,void 0,void 0,function(){return n(this,function(S){return[2,y(this._value)]})})},p.prototype.andThen=function(d){return e(this,void 0,void 0,function(){return n(this,function(y){return[2,d(this._value)]})})},p.prototype.orElse=function(d){return e(this,void 0,void 0,function(){return n(this,function(y){return[2,new a(this._value)]})})},p.prototype.unwrapOrElse=function(d){return e(this,void 0,void 0,function(){return n(this,function(y){return[2,this._value]})})},p})(o);M.AsyncOk=c;var u=(function(){function m(p){this._error=p}return m})(),l=(function(m){t(p,m);function p(){return m!==null&&m.apply(this,arguments)||this}return p.prototype.isOk=function(){return!1},p.prototype.isErr=function(){return!0},p.prototype.map=function(d){return new p(this._error)},p.prototype.mapErr=function(d){return new p(d(this._error))},p.prototype.mapOr=function(d,y){return d},p.prototype.mapOrElse=function(d,y){return d(this._error)},p.prototype.and=function(d){return new p(this._error)},p.prototype.andThen=function(d){return new p(this._error)},p.prototype.or=function(d){return d},p.prototype.orElse=function(d){return d(this._error)},p.prototype.ok=function(){return new i.None},p.prototype.unwrap=function(){throw this._error},p.prototype.unwrapErr=function(){return this._error},p.prototype.unwrapOr=function(d){return d},p.prototype.unwrapOrElse=function(d){return d(this._error)},p.prototype.async=function(){return new f(this._error)},p})(u);M.Err=l;var f=(function(m){t(p,m);function p(){return m!==null&&m.apply(this,arguments)||this}return p.prototype.map=function(d){return e(this,void 0,void 0,function(){return n(this,function(y){return[2,new l(this._error)]})})},p.prototype.mapErr=function(d){return e(this,void 0,void 0,function(){var y;return n(this,function(S){switch(S.label){case 0:return y=l.bind,[4,d(this._error)];case 1:return[2,new(y.apply(l,[void 0,S.sent()]))]}})})},p.prototype.mapOr=function(d,y){return e(this,void 0,void 0,function(){return n(this,function(S){return[2,d]})})},p.prototype.mapOrElse=function(d,y){return e(this,void 0,void 0,function(){return n(this,function(S){return[2,d(this._error)]})})},p.prototype.andThen=function(d){return e(this,void 0,void 0,function(){return n(this,function(y){return[2,new l(this._error)]})})},p.prototype.orElse=function(d){return e(this,void 0,void 0,function(){return n(this,function(y){return[2,d(this._error)]})})},p.prototype.unwrapOrElse=function(d){return e(this,void 0,void 0,function(){return n(this,function(y){return[2,d(this._error)]})})},p})(u);M.AsyncErr=f;function h(m){return e(this,void 0,void 0,function(){return n(this,function(p){return[2,m.then(function(d){return new a(d)},function(d){return new l(d)})]})})}M.resultify=h;function g(m){for(var p=[],d=1;d<arguments.length;d++)p[d-1]=arguments[d];try{return new a(m.apply(void 0,r(p)))}catch(y){return new l(y)}}return M.asResult=g,M}var Cs;function Ga(){return Cs||(Cs=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.zip2=t.optionify=t.join=t.resultify=void 0;var e=xi();Object.defineProperty(t,"resultify",{enumerable:!0,get:function(){return e.resultify}});var n=Ti();Object.defineProperty(t,"join",{enumerable:!0,get:function(){return n.join}}),Object.defineProperty(t,"optionify",{enumerable:!0,get:function(){return n.optionify}}),Object.defineProperty(t,"zip2",{enumerable:!0,get:function(){return n.zip2}})})(Fe)),Fe}var Nn=Ga();const Pi={arabic:"ar",armenian:"am",bulgarian:"bg",czech:"cz",danish:"dk",dutch:"nl",english:"en",finnish:"fi",french:"fr",german:"de",greek:"gr",hungarian:"hu",indian:"in",indonesian:"id",irish:"ie",italian:"it",lithuanian:"lt",nepali:"np",norwegian:"no",portuguese:"pt",romanian:"ro",russian:"ru",serbian:"rs",slovenian:"ru",spanish:"es",swedish:"se",tamil:"ta",turkish:"tr",ukrainian:"uk",sanskrit:"sk"},Ha={dutch:/[^A-Za-zàèéìòóù0-9_'-]+/gim,english:/[^A-Za-zàèéìòóù0-9_'-]+/gim,french:/[^a-z0-9äâàéèëêïîöôùüûœç-]+/gim,italian:/[^A-Za-zàèéìòóù0-9_'-]+/gim,norwegian:/[^a-z0-9_æøåÆØÅäÄöÖüÜ]+/gim,portuguese:/[^a-z0-9à-úÀ-Ú]/gim,russian:/[^a-z0-9а-яА-ЯёЁ]+/gim,spanish:/[^a-z0-9A-Zá-úÁ-ÚñÑüÜ]+/gim,swedish:/[^a-z0-9_åÅäÄöÖüÜ-]+/gim,german:/[^a-z0-9A-ZäöüÄÖÜß]+/gim,finnish:/[^a-z0-9äöÄÖ]+/gim,danish:/[^a-z0-9æøåÆØÅ]+/gim,hungarian:/[^a-z0-9áéíóöőúüűÁÉÍÓÖŐÚÜŰ]+/gim,romanian:/[^a-z0-9ăâîșțĂÂÎȘȚ]+/gim,serbian:/[^a-z0-9čćžšđČĆŽŠĐ]+/gim,turkish:/[^a-z0-9çÇğĞıİöÖşŞüÜ]+/gim,lithuanian:/[^a-z0-9ąčęėįšųūžĄČĘĖĮŠŲŪŽ]+/gim,arabic:/[^a-z0-9أ-ي]+/gim,nepali:/[^a-z0-9अ-ह]+/gim,irish:/[^a-z0-9áéíóúÁÉÍÓÚ]+/gim,indian:/[^a-z0-9अ-ह]+/gim,armenian:/[^a-z0-9ա-ֆ]+/gim,greek:/[^a-z0-9α-ωά-ώ]+/gim,indonesian:/[^a-z0-9]+/gim,ukrainian:/[^a-z0-9а-яА-ЯіїєІЇЄ]+/gim,slovenian:/[^a-z0-9čžšČŽŠ]+/gim,bulgarian:/[^a-z0-9а-яА-Я]+/gim,tamil:/[^a-z0-9அ-ஹ]+/gim,sanskrit:/[^a-z0-9A-Zāīūṛḷṃṁḥśṣṭḍṇṅñḻḹṝ]+/gim,czech:/[^A-Z0-9a-zěščřžýáíéúůóťďĚŠČŘŽÝÁÍÉÓÚŮŤĎ-]+/gim},Bn=Object.keys(Pi);function Ya(t){return t!==void 0&&Bn.includes(t)?Pi[t]:void 0}const qa=Date.now().toString().slice(5);let Xa=0;const ks=BigInt(1e3),_s=BigInt(1e6),Vs=BigInt(1e9),je=65535;function Ai(t,e){if(e.length<je)Array.prototype.push.apply(t,e);else{const n=e.length;for(let s=0;s<n;s+=je)Array.prototype.push.apply(t,e.slice(s,s+je))}}function Ja(t,...e){return t.replace(/%(?:(?<position>\d+)\$)?(?<width>-?\d*\.?\d*)(?<type>[dfs])/g,function(...n){const s=n[n.length-1],{width:r,type:i,position:o}=s,a=o?e[Number.parseInt(o)-1]:e.shift(),c=r===""?0:Number.parseInt(r);switch(i){case"d":return a.toString().padStart(c,"0");case"f":{let u=a;const[l,f]=r.split(".").map(h=>Number.parseFloat(h));return typeof f=="number"&&f>=0&&(u=u.toFixed(f)),typeof l=="number"&&l>=0?u.toString().padStart(c,"0"):u.toString()}case"s":return c<0?a.toString().padEnd(-c," "):a.toString().padStart(c," ");default:return a}})}function Za(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}function Qa(){return typeof process<"u"&&process.release&&process.release.name==="node"}function Ls(){return BigInt(Math.floor(performance.now()*1e6))}function Fn(t){return typeof t=="number"&&(t=BigInt(t)),t<ks?`${t}ns`:t<_s?`${t/ks}μs`:t<Vs?`${t/_s}ms`:`${t/Vs}s`}function Vt(){return Za()?Ls():Qa()||typeof process<"u"&&typeof process?.hrtime?.bigint=="function"?process.hrtime.bigint():typeof performance<"u"?Ls():BigInt(0)}function Ei(){return`${qa}-${Xa++}`}function Ue(t,e){return Object.hasOwn===void 0?Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0:Object.hasOwn(t,e)?t[e]:void 0}function Di(t,e){return e[1]===t[1]?t[0]-e[0]:e[1]-t[1]}function tc(t){if(t.length===0)return[];if(t.length===1)return t[0];for(let n=1;n<t.length;n++)if(t[n].length<t[0].length){const s=t[0];t[0]=t[n],t[n]=s}const e=new Map;for(const n of t[0])e.set(n,1);for(let n=1;n<t.length;n++){let s=0;for(const r of t[n]){const i=e.get(r);i===n&&(e.set(r,i+1),s++)}if(s===0)return[]}return t[0].filter(n=>{const s=e.get(n);return s!==void 0&&e.set(n,0),s===t.length})}function Ii(t,e){const n={},s=e.length;for(let r=0;r<s;r++){const i=e[r],o=i.split(".");let a=t;const c=o.length;for(let u=0;u<c;u++)if(a=a[o[u]],typeof a=="object"){if(a!==null&&"lat"in a&&"lon"in a&&typeof a.lat=="number"&&typeof a.lon=="number"){a=n[i]=a;break}else if(!Array.isArray(a)&&a!==null&&u===c-1){a=void 0;break}}else if((a===null||typeof a!="object")&&u<c-1){a=void 0;break}typeof a<"u"&&(n[i]=a)}return n}function jn(t,e){return Ii(t,[e])[e]}const ec={cm:.01,m:1,km:1e3,ft:.3048,yd:.9144,mi:1609.344};function Ri(t,e){const n=ec[e];if(n===void 0)throw new Error(I("INVALID_DISTANCE_SUFFIX",t).message);return t*n}function Oi(t,e){t.hits=t.hits.map(n=>({...n,document:{...n.document,...e.reduce((s,r)=>{const i=r.split("."),o=i.pop();let a=s;for(const c of i)a[c]=a[c]??{},a=a[c];return a[o]=null,s},n.document)}}))}function U(t){return Array.isArray(t)?t.some(e=>U(e)):t?.constructor?.name==="AsyncFunction"}const Ns="intersection"in new Set;function we(...t){if(t.length===0)return new Set;if(t.length===1)return t[0];if(t.length===2){const s=t[0],r=t[1];if(Ns)return s.intersection(r);const i=new Set,o=s.size<r.size?s:r,a=o===s?r:s;for(const c of o)a.has(c)&&i.add(c);return i}const e={index:0,size:t[0].size};for(let s=1;s<t.length;s++)t[s].size<e.size&&(e.index=s,e.size=t[s].size);if(Ns){let s=t[e.index];for(let r=0;r<t.length;r++)r!==e.index&&(s=s.intersection(t[r]));return s}const n=t[e.index];for(let s=0;s<t.length;s++){if(s===e.index)continue;const r=t[s];for(const i of n)r.has(i)||n.delete(i)}return n}const nc="union"in new Set;function le(t,e){return nc?t?t.union(e):e:t?new Set([...t,...e]):new Set(e)}function sc(t,e){const n=new Set;for(const s of t)e.has(s)||n.add(s);return n}function Mi(t){if(typeof SharedArrayBuffer<"u"&&typeof Atomics<"u"){const e=new Int32Array(new SharedArrayBuffer(4));if((t>0&&t<1/0)===!1)throw typeof t!="number"&&typeof t!="bigint"?TypeError("sleep: ms must be a number"):RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity");Atomics.wait(e,0,0,Number(t))}else if((t>0&&t<1/0)===!1)throw typeof t!="number"&&typeof t!="bigint"?TypeError("sleep: ms must be a number"):RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity")}const rc=Bn.join(`
 - `),ic={NO_LANGUAGE_WITH_CUSTOM_TOKENIZER:"Do not pass the language option to create when using a custom tokenizer.",LANGUAGE_NOT_SUPPORTED:`Language "%s" is not supported.
Supported languages are:
 - ${rc}`,INVALID_STEMMER_FUNCTION_TYPE:"config.stemmer property must be a function.",MISSING_STEMMER:'As of version 1.0.0 @orama/orama does not ship non English stemmers by default. To solve this, please explicitly import and specify the "%s" stemmer from the package @orama/stemmers. See https://docs.orama.com/docs/orama-js/text-analysis/stemming for more information.',CUSTOM_STOP_WORDS_MUST_BE_FUNCTION_OR_ARRAY:"Custom stop words array must only contain strings.",UNSUPPORTED_COMPONENT:'Unsupported component "%s".',COMPONENT_MUST_BE_FUNCTION:'The component "%s" must be a function.',COMPONENT_MUST_BE_FUNCTION_OR_ARRAY_FUNCTIONS:'The component "%s" must be a function or an array of functions.',INVALID_SCHEMA_TYPE:'Unsupported schema type "%s" at "%s". Expected "string", "boolean" or "number" or array of them.',DOCUMENT_ID_MUST_BE_STRING:'Document id must be of type "string". Got "%s" instead.',DOCUMENT_ALREADY_EXISTS:'A document with id "%s" already exists.',DOCUMENT_DOES_NOT_EXIST:'A document with id "%s" does not exists.',MISSING_DOCUMENT_PROPERTY:'Missing searchable property "%s".',INVALID_DOCUMENT_PROPERTY:'Invalid document property "%s": expected "%s", got "%s"',UNKNOWN_INDEX:'Invalid property name "%s". Expected a wildcard string ("*") or array containing one of the following properties: %s',INVALID_BOOST_VALUE:"Boost value must be a number greater than, or less than 0.",INVALID_FILTER_OPERATION:"You can only use one operation per filter, you requested %d.",SCHEMA_VALIDATION_FAILURE:'Cannot insert document due schema validation failure on "%s" property.',INVALID_SORT_SCHEMA_TYPE:'Unsupported sort schema type "%s" at "%s". Expected "string" or "number".',CANNOT_SORT_BY_ARRAY:'Cannot configure sort for "%s" because it is an array (%s).',UNABLE_TO_SORT_ON_UNKNOWN_FIELD:'Unable to sort on unknown field "%s". Allowed fields: %s',SORT_DISABLED:"Sort is disabled. Please read the documentation at https://docs.orama.com/docs/orama-js for more information.",UNKNOWN_GROUP_BY_PROPERTY:'Unknown groupBy property "%s".',INVALID_GROUP_BY_PROPERTY:'Invalid groupBy property "%s". Allowed types: "%s", but given "%s".',UNKNOWN_FILTER_PROPERTY:'Unknown filter property "%s".',UNKNOWN_VECTOR_PROPERTY:'Unknown vector property "%s". Make sure the property exists in the schema and is configured as a vector.',INVALID_VECTOR_SIZE:'Vector size must be a number greater than 0. Got "%s" instead.',INVALID_VECTOR_VALUE:'Vector value must be a number greater than 0. Got "%s" instead.',INVALID_INPUT_VECTOR:`Property "%s" was declared as a %s-dimensional vector, but got a %s-dimensional vector instead.
Input vectors must be of the size declared in the schema, as calculating similarity between vectors of different sizes can lead to unexpected results.`,WRONG_SEARCH_PROPERTY_TYPE:'Property "%s" is not searchable. Only "string" properties are searchable.',FACET_NOT_SUPPORTED:`Facet doens't support the type "%s".`,INVALID_DISTANCE_SUFFIX:'Invalid distance suffix "%s". Valid suffixes are: cm, m, km, mi, yd, ft.',INVALID_SEARCH_MODE:'Invalid search mode "%s". Valid modes are: "fulltext", "vector", "hybrid".',MISSING_VECTOR_AND_SECURE_PROXY:"No vector was provided and no secure proxy was configured. Please provide a vector or configure an Orama Secure Proxy to perform hybrid search.",MISSING_TERM:'"term" is a required parameter when performing hybrid search. Please provide a search term.',INVALID_VECTOR_INPUT:'Invalid "vector" property. Expected an object with "value" and "property" properties, but got "%s" instead.',PLUGIN_CRASHED:"A plugin crashed during initialization. Please check the error message for more information:",PLUGIN_SECURE_PROXY_NOT_FOUND:`Could not find '@orama/secure-proxy-plugin' installed in your Orama instance.
Please install it before proceeding with creating an answer session.
Read more at https://docs.orama.com/docs/orama-js/plugins/plugin-secure-proxy#plugin-secure-proxy
`,PLUGIN_SECURE_PROXY_MISSING_CHAT_MODEL:`Could not find a chat model defined in the secure proxy plugin configuration.
Please provide a chat model before proceeding with creating an answer session.
Read more at https://docs.orama.com/docs/orama-js/plugins/plugin-secure-proxy#plugin-secure-proxy
`,ANSWER_SESSION_LAST_MESSAGE_IS_NOT_ASSISTANT:"The last message in the session is not an assistant message. Cannot regenerate non-assistant messages.",PLUGIN_COMPONENT_CONFLICT:'The component "%s" is already defined. The plugin "%s" is trying to redefine it.'};function I(t,...e){const n=new Error(Ja(ic[t]??`Unsupported Orama Error code: ${t}`,...e));return n.code=t,"captureStackTrace"in Error.prototype&&Error.captureStackTrace(n),n}function oc(t){return{raw:Number(t),formatted:Fn(t)}}function ac(t){if(t.id){if(typeof t.id!="string")throw I("DOCUMENT_ID_MUST_BE_STRING",typeof t.id);return t.id}return Ei()}function Ci(t,e){for(const[n,s]of Object.entries(e)){const r=t[n];if(!(typeof r>"u")&&!(s==="geopoint"&&typeof r=="object"&&typeof r.lon=="number"&&typeof r.lat=="number")&&!(s==="enum"&&(typeof r=="string"||typeof r=="number"))){if(s==="enum[]"&&Array.isArray(r)){const i=r.length;for(let o=0;o<i;o++)if(typeof r[o]!="string"&&typeof r[o]!="number")return n+"."+o;continue}if(At(s)){const i=Un(s);if(!Array.isArray(r)||r.length!==i)throw I("INVALID_INPUT_VECTOR",n,i,r.length);continue}if(ke(s)){if(!Array.isArray(r))return n;const i=ki(s),o=r.length;for(let a=0;a<o;a++)if(typeof r[a]!==i)return n+"."+a;continue}if(typeof s=="object"){if(!r||typeof r!="object")return n;const i=Ci(r,s);if(i)return n+"."+i;continue}if(typeof r!==s)return n}}}const cc={string:!1,number:!1,boolean:!1,enum:!1,geopoint:!1,"string[]":!0,"number[]":!0,"boolean[]":!0,"enum[]":!0},uc={"string[]":"string","number[]":"number","boolean[]":"boolean","enum[]":"enum"};function lc(t){return t==="geopoint"}function At(t){return typeof t=="string"&&/^vector\[\d+\]$/.test(t)}function ke(t){return typeof t=="string"&&cc[t]}function ki(t){return uc[t]}function Un(t){const e=Number(t.slice(7,-1));switch(!0){case isNaN(e):throw I("INVALID_VECTOR_VALUE",t);case e<=0:throw I("INVALID_VECTOR_SIZE",t);default:return e}}function fc(){return{idToInternalId:new Map,internalIdToId:[],save:hc,load:dc}}function hc(t){return{internalIdToId:t.internalIdToId}}function dc(t,e){const{internalIdToId:n}=e;t.internalDocumentIDStore.idToInternalId.clear(),t.internalDocumentIDStore.internalIdToId=[];const s=n.length;for(let r=0;r<s;r++){const i=n[r];t.internalDocumentIDStore.idToInternalId.set(i,r+1),t.internalDocumentIDStore.internalIdToId.push(i)}}function $(t,e){if(typeof e=="string"){const n=t.idToInternalId.get(e);if(n)return n;const s=t.idToInternalId.size+1;return t.idToInternalId.set(e,s),t.internalIdToId.push(e),s}return e>t.internalIdToId.length?$(t,e.toString()):e}function _e(t,e){if(t.internalIdToId.length<e)throw new Error(`Invalid internalId ${e}`);return t.internalIdToId[e-1]}function pc(t,e){return{sharedInternalDocumentStore:e,docs:{},count:0}}function mc(t,e){const n=$(t.sharedInternalDocumentStore,e);return t.docs[n]}function gc(t,e){const n=e.length,s=Array.from({length:n});for(let r=0;r<n;r++){const i=$(t.sharedInternalDocumentStore,e[r]);s[r]=t.docs[i]}return s}function yc(t){return t.docs}function vc(t,e,n,s){return typeof t.docs[n]<"u"?!1:(t.docs[n]=s,t.count++,!0)}function Sc(t,e){const n=$(t.sharedInternalDocumentStore,e);return typeof t.docs[n]>"u"?!1:(delete t.docs[n],t.count--,!0)}function bc(t){return t.count}function wc(t,e){const n=e;return{docs:n.docs,count:n.count,sharedInternalDocumentStore:t}}function Tc(t){return{docs:t.docs,count:t.count}}function xc(){return{create:pc,get:mc,getMultiple:gc,getAll:yc,store:vc,remove:Sc,count:bc,load:wc,save:Tc}}const Pc=["beforeInsert","afterInsert","beforeRemove","afterRemove","beforeUpdate","afterUpdate","beforeUpsert","afterUpsert","beforeSearch","afterSearch","beforeInsertMultiple","afterInsertMultiple","beforeRemoveMultiple","afterRemoveMultiple","beforeUpdateMultiple","afterUpdateMultiple","beforeUpsertMultiple","afterUpsertMultiple","beforeLoad","afterLoad","afterCreate"];function Ac(t,e){const n=[],s=t.plugins?.length;if(!s)return n;for(let r=0;r<s;r++)try{const i=t.plugins[r];typeof i[e]=="function"&&n.push(i[e])}catch(i){throw console.error("Caught error in getAllPluginsByHook:",i),I("PLUGIN_CRASHED")}return n}const Ec=["tokenizer","index","documentsStore","sorter","pinning"],Bs=["validateSchema","getDocumentIndexId","getDocumentProperties","formatElapsedTime"];function Te(t,e,n,s){if(t.some(U))return(async()=>{for(const i of t)await i(e,n,s)})();for(const i of t)i(e,n,s)}function _i(t,e,n){if(t.some(U))return(async()=>{for(const r of t)await r(e,n)})();for(const r of t)r(e,n)}function zn(t,e,n,s,r){if(t.some(U))return(async()=>{for(const o of t)await o(e,n,s,r)})();for(const o of t)o(e,n,s,r)}function $n(t,e,n,s){if(t.some(U))return(async()=>{for(const i of t)await i(e,n,s)})();for(const i of t)i(e,n,s)}function Dc(t,e){if(t.some(U))return(async()=>{for(const s of t)await s(e)})();for(const s of t)s(e)}class Y{k;v;l=null;r=null;h=1;constructor(e,n){this.k=e,this.v=new Set(n)}updateHeight(){this.h=Math.max(Y.getHeight(this.l),Y.getHeight(this.r))+1}static getHeight(e){return e?e.h:0}getBalanceFactor(){return Y.getHeight(this.l)-Y.getHeight(this.r)}rotateLeft(){const e=this.r;return this.r=e.l,e.l=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){const e=this.l;return this.l=e.r,e.r=this,this.updateHeight(),e.updateHeight(),e}toJSON(){return{k:this.k,v:Array.from(this.v),l:this.l?this.l.toJSON():null,r:this.r?this.r.toJSON():null,h:this.h}}static fromJSON(e){const n=new Y(e.k,e.v);return n.l=e.l?Y.fromJSON(e.l):null,n.r=e.r?Y.fromJSON(e.r):null,n.h=e.h,n}}class ee{root=null;insertCount=0;constructor(e,n){e!==void 0&&n!==void 0&&(this.root=new Y(e,n))}insert(e,n,s=1e3){this.root=this.insertNode(this.root,e,n,s)}insertMultiple(e,n,s=1e3){for(const r of n)this.insert(e,r,s)}rebalance(){this.root&&(this.root=this.rebalanceNode(this.root))}toJSON(){return{root:this.root?this.root.toJSON():null,insertCount:this.insertCount}}static fromJSON(e){const n=new ee;return n.root=e.root?Y.fromJSON(e.root):null,n.insertCount=e.insertCount||0,n}insertNode(e,n,s,r){if(e===null)return new Y(n,[s]);const i=[];let o=e,a=null;for(;o!==null;)if(i.push({parent:a,node:o}),n<o.k)if(o.l===null){o.l=new Y(n,[s]),i.push({parent:o,node:o.l});break}else a=o,o=o.l;else if(n>o.k)if(o.r===null){o.r=new Y(n,[s]),i.push({parent:o,node:o.r});break}else a=o,o=o.r;else return o.v.add(s),e;let c=!1;this.insertCount++%r===0&&(c=!0);for(let u=i.length-1;u>=0;u--){const{parent:l,node:f}=i[u];if(f.updateHeight(),c){const h=this.rebalanceNode(f);l?l.l===f?l.l=h:l.r===f&&(l.r=h):e=h}}return e}rebalanceNode(e){const n=e.getBalanceFactor();if(n>1){if(e.l&&e.l.getBalanceFactor()>=0)return e.rotateRight();if(e.l)return e.l=e.l.rotateLeft(),e.rotateRight()}if(n<-1){if(e.r&&e.r.getBalanceFactor()<=0)return e.rotateLeft();if(e.r)return e.r=e.r.rotateRight(),e.rotateLeft()}return e}find(e){const n=this.findNodeByKey(e);return n?n.v:null}contains(e){return this.find(e)!==null}getSize(){let e=0;const n=[];let s=this.root;for(;s||n.length>0;){for(;s;)n.push(s),s=s.l;s=n.pop(),e++,s=s.r}return e}isBalanced(){if(!this.root)return!0;const e=[this.root];for(;e.length>0;){const n=e.pop(),s=n.getBalanceFactor();if(Math.abs(s)>1)return!1;n.l&&e.push(n.l),n.r&&e.push(n.r)}return!0}remove(e){this.root=this.removeNode(this.root,e)}removeDocument(e,n){const s=this.findNodeByKey(e);s&&(s.v.size===1?this.root=this.removeNode(this.root,e):s.v=new Set([...s.v.values()].filter(r=>r!==n)))}findNodeByKey(e){let n=this.root;for(;n;)if(e<n.k)n=n.l;else if(e>n.k)n=n.r;else return n;return null}removeNode(e,n){if(e===null)return null;const s=[];let r=e;for(;r!==null&&r.k!==n;)s.push(r),n<r.k?r=r.l:r=r.r;if(r===null)return e;if(r.l===null||r.r===null){const i=r.l?r.l:r.r;if(s.length===0)e=i;else{const o=s[s.length-1];o.l===r?o.l=i:o.r=i}}else{let i=r,o=r.r;for(;o.l!==null;)i=o,o=o.l;r.k=o.k,r.v=o.v,i.l===o?i.l=o.r:i.r=o.r,r=i}s.push(r);for(let i=s.length-1;i>=0;i--){const o=s[i];o.updateHeight();const a=this.rebalanceNode(o);if(i>0){const c=s[i-1];c.l===o?c.l=a:c.r===o&&(c.r=a)}else e=a}return e}rangeSearch(e,n){const s=new Set,r=[];let i=this.root;for(;i||r.length>0;){for(;i;)r.push(i),i=i.l;if(i=r.pop(),i.k>=e&&i.k<=n)for(const o of i.v)s.add(o);if(i.k>n)break;i=i.r}return s}greaterThan(e,n=!1){const s=new Set,r=[];let i=this.root;for(;i||r.length>0;){for(;i;)r.push(i),i=i.r;if(i=r.pop(),n&&i.k>=e||!n&&i.k>e)for(const o of i.v)s.add(o);else if(i.k<=e)break;i=i.l}return s}lessThan(e,n=!1){const s=new Set,r=[];let i=this.root;for(;i||r.length>0;){for(;i;)r.push(i),i=i.l;if(i=r.pop(),n&&i.k<=e||!n&&i.k<e)for(const o of i.v)s.add(o);else if(i.k>e)break;i=i.r}return s}}let Wn=class Vi{numberToDocumentId;constructor(){this.numberToDocumentId=new Map}insert(e,n){this.numberToDocumentId.has(e)?this.numberToDocumentId.get(e).add(n):this.numberToDocumentId.set(e,new Set([n]))}find(e){const n=this.numberToDocumentId.get(e);return n?Array.from(n):null}remove(e){this.numberToDocumentId.delete(e)}removeDocument(e,n){const s=this.numberToDocumentId.get(n);s&&(s.delete(e),s.size===0&&this.numberToDocumentId.delete(n))}contains(e){return this.numberToDocumentId.has(e)}getSize(){let e=0;for(const n of this.numberToDocumentId.values())e+=n.size;return e}filter(e){const n=Object.keys(e);if(n.length!==1)throw new Error("Invalid operation");const s=n[0];switch(s){case"eq":{const r=e[s],i=this.numberToDocumentId.get(r);return i?Array.from(i):[]}case"in":{const r=e[s],i=new Set;for(const o of r){const a=this.numberToDocumentId.get(o);if(a)for(const c of a)i.add(c)}return Array.from(i)}case"nin":{const r=new Set(e[s]),i=new Set;for(const[o,a]of this.numberToDocumentId.entries())if(!r.has(o))for(const c of a)i.add(c);return Array.from(i)}default:throw new Error("Invalid operation")}}filterArr(e){const n=Object.keys(e);if(n.length!==1)throw new Error("Invalid operation");const s=n[0];switch(s){case"containsAll":{const i=e[s].map(a=>this.numberToDocumentId.get(a)??new Set);if(i.length===0)return[];const o=i.reduce((a,c)=>new Set([...a].filter(u=>c.has(u))));return Array.from(o)}case"containsAny":{const i=e[s].map(a=>this.numberToDocumentId.get(a)??new Set);if(i.length===0)return[];const o=i.reduce((a,c)=>new Set([...a,...c]));return Array.from(o)}default:throw new Error("Invalid operation")}}static fromJSON(e){if(!e.numberToDocumentId)throw new Error("Invalid Flat Tree JSON");const n=new Vi;for(const[s,r]of e.numberToDocumentId)n.numberToDocumentId.set(s,new Set(r));return n}toJSON(){return{numberToDocumentId:Array.from(this.numberToDocumentId.entries()).map(([e,n])=>[e,Array.from(n)])}}};function Ic(t,e,n){if(n<0)return-1;if(t===e)return 0;const s=t.length,r=e.length;if(s===0)return r<=n?r:-1;if(r===0)return s<=n?s:-1;const i=Math.abs(s-r);if(t.startsWith(e))return i<=n?i:-1;if(e.startsWith(t))return 0;if(i>n)return-1;const o=[];for(let a=0;a<=s;a++){o[a]=[a];for(let c=1;c<=r;c++)o[a][c]=a===0?c:0}for(let a=1;a<=s;a++){let c=1/0;for(let u=1;u<=r;u++)t[a-1]===e[u-1]?o[a][u]=o[a-1][u-1]:o[a][u]=Math.min(o[a-1][u]+1,o[a][u-1]+1,o[a-1][u-1]+1),c=Math.min(c,o[a][u]);if(c>n)return-1}return o[s][r]<=n?o[s][r]:-1}function Fs(t,e,n){const s=Ic(t,e,n);return{distance:s,isBounded:s>=0}}class et{k;s;c=new Map;d=new Set;e;w="";constructor(e,n,s){this.k=e,this.s=n,this.e=s}updateParent(e){this.w=e.w+this.s}addDocument(e){this.d.add(e)}removeDocument(e){return this.d.delete(e)}findAllWords(e,n,s,r){const i=[this];for(;i.length>0;){const o=i.pop();if(o.e){const{w:a,d:c}=o;if(s&&a!==n)continue;if(Ue(e,a)!==null)if(r)if(Math.abs(n.length-a.length)<=r&&Fs(n,a,r).isBounded)e[a]=[];else continue;else e[a]=[];if(Ue(e,a)!=null&&c.size>0){const u=e[a];for(const l of c)u.includes(l)||u.push(l)}}o.c.size>0&&i.push(...o.c.values())}return e}insert(e,n){let s=this,r=0;const i=e.length;for(;r<i;){const o=e[r],a=s.c.get(o);if(a){const c=a.s,u=c.length;let l=0;for(;l<u&&r+l<i&&c[l]===e[r+l];)l++;if(l===u){if(s=a,r+=l,r===i){a.e||(a.e=!0),a.addDocument(n);return}continue}const f=c.slice(0,l),h=c.slice(l),g=e.slice(r+l),m=new et(f[0],f,!1);if(s.c.set(f[0],m),m.updateParent(s),a.s=h,a.k=h[0],m.c.set(h[0],a),a.updateParent(m),g){const p=new et(g[0],g,!0);p.addDocument(n),m.c.set(g[0],p),p.updateParent(m)}else m.e=!0,m.addDocument(n);return}else{const c=new et(o,e.slice(r),!0);c.addDocument(n),s.c.set(o,c),c.updateParent(s);return}}s.e||(s.e=!0),s.addDocument(n)}_findLevenshtein(e,n,s,r,i){const o=[{node:this,index:n,tolerance:s}];for(;o.length>0;){const{node:a,index:c,tolerance:u}=o.pop();if(a.w.startsWith(e)){a.findAllWords(i,e,!1,0);continue}if(u<0)continue;if(a.e){const{w:f,d:h}=a;if(f&&(Fs(e,f,r).isBounded&&(i[f]=[]),Ue(i,f)!==void 0&&h.size>0)){const g=new Set(i[f]);for(const m of h)g.add(m);i[f]=Array.from(g)}}if(c>=e.length)continue;const l=e[c];if(a.c.has(l)){const f=a.c.get(l);o.push({node:f,index:c+1,tolerance:u})}o.push({node:a,index:c+1,tolerance:u-1});for(const[f,h]of a.c)o.push({node:h,index:c,tolerance:u-1}),f!==l&&o.push({node:h,index:c+1,tolerance:u-1})}}find(e){const{term:n,exact:s,tolerance:r}=e;if(r&&!s){const i={};return this._findLevenshtein(n,0,r,r,i),i}else{let i=this,o=0;const a=n.length;for(;o<a;){const u=n[o],l=i.c.get(u);if(l){const f=l.s,h=f.length;let g=0;for(;g<h&&o+g<a&&f[g]===n[o+g];)g++;if(g===h)i=l,o+=g;else if(o+g===a)if(g===a-o){if(s)return{};{const m={};return l.findAllWords(m,n,s,r),m}}else return{};else return{}}else return{}}const c={};return i.findAllWords(c,n,s,r),c}}contains(e){let n=this,s=0;const r=e.length;for(;s<r;){const i=e[s],o=n.c.get(i);if(o){const a=o.s,c=a.length;let u=0;for(;u<c&&s+u<r&&a[u]===e[s+u];)u++;if(u<c)return!1;s+=c,n=o}else return!1}return!0}removeWord(e){if(!e)return!1;let n=this;const s=e.length,r=[];for(let i=0;i<s;i++){const o=e[i];if(n.c.has(o)){const a=n.c.get(o);r.push({parent:n,character:o}),i+=a.s.length-1,n=a}else return!1}for(n.d.clear(),n.e=!1;r.length>0&&n.c.size===0&&!n.e&&n.d.size===0;){const{parent:i,character:o}=r.pop();i.c.delete(o),n=i}return!0}removeDocumentByWord(e,n,s=!0){if(!e)return!0;let r=this;const i=e.length;for(let o=0;o<i;o++){const a=e[o];if(r.c.has(a)){const c=r.c.get(a);o+=c.s.length-1,r=c,s&&r.w!==e||r.removeDocument(n)}else return!1}return!0}static getCommonPrefix(e,n){const s=Math.min(e.length,n.length);let r=0;for(;r<s&&e.charCodeAt(r)===n.charCodeAt(r);)r++;return e.slice(0,r)}toJSON(){return{w:this.w,s:this.s,e:this.e,k:this.k,d:Array.from(this.d),c:Array.from(this.c?.entries())?.map(([e,n])=>[e,n.toJSON()])}}static fromJSON(e){const n=new et(e.k,e.s,e.e);return n.w=e.w,n.d=new Set(e.d),n.c=new Map(e?.c?.map(([s,r])=>[s,et.fromJSON(r)])||[]),n}}class ne extends et{constructor(){super("","",!1)}static fromJSON(e){const n=new ne;return n.w=e.w,n.s=e.s,n.e=e.e,n.k=e.k,n.d=new Set(e.d),n.c=new Map(e?.c?.map(([s,r])=>[s,et.fromJSON(r)])||[]),n}toJSON(){return super.toJSON()}}const Rc=2,Oc=6371e3;class Ct{point;docIDs;left;right;parent;constructor(e,n){this.point=e,this.docIDs=new Set(n),this.left=null,this.right=null,this.parent=null}toJSON(){return{point:this.point,docIDs:Array.from(this.docIDs),left:this.left?this.left.toJSON():null,right:this.right?this.right.toJSON():null}}static fromJSON(e,n=null){const s=new Ct(e.point,e.docIDs);return s.parent=n,e.left&&(s.left=Ct.fromJSON(e.left,s)),e.right&&(s.right=Ct.fromJSON(e.right,s)),s}}class H{root;nodeMap;constructor(){this.root=null,this.nodeMap=new Map}getPointKey(e){return`${e.lon},${e.lat}`}insert(e,n){const s=this.getPointKey(e),r=this.nodeMap.get(s);if(r){n.forEach(c=>r.docIDs.add(c));return}const i=new Ct(e,n);if(this.nodeMap.set(s,i),this.root==null){this.root=i;return}let o=this.root,a=0;for(;;){if(a%Rc===0)if(e.lon<o.point.lon){if(o.left==null){o.left=i,i.parent=o;return}o=o.left}else{if(o.right==null){o.right=i,i.parent=o;return}o=o.right}else if(e.lat<o.point.lat){if(o.left==null){o.left=i,i.parent=o;return}o=o.left}else{if(o.right==null){o.right=i,i.parent=o;return}o=o.right}a++}}contains(e){const n=this.getPointKey(e);return this.nodeMap.has(n)}getDocIDsByCoordinates(e){const n=this.getPointKey(e),s=this.nodeMap.get(n);return s?Array.from(s.docIDs):null}removeDocByID(e,n){const s=this.getPointKey(e),r=this.nodeMap.get(s);r&&(r.docIDs.delete(n),r.docIDs.size===0&&(this.nodeMap.delete(s),this.deleteNode(r)))}deleteNode(e){const n=e.parent,s=e.left?e.left:e.right;s&&(s.parent=n),n?n.left===e?n.left=s:n.right===e&&(n.right=s):(this.root=s,this.root&&(this.root.parent=null))}searchByRadius(e,n,s=!0,r="asc",i=!1){const o=i?H.vincentyDistance:H.haversineDistance,a=[{node:this.root,depth:0}],c=[];for(;a.length>0;){const{node:u,depth:l}=a.pop();if(u==null)continue;const f=o(e,u.point);(s?f<=n:f>n)&&c.push({point:u.point,docIDs:Array.from(u.docIDs)}),u.left!=null&&a.push({node:u.left,depth:l+1}),u.right!=null&&a.push({node:u.right,depth:l+1})}return r&&c.sort((u,l)=>{const f=o(e,u.point),h=o(e,l.point);return r.toLowerCase()==="asc"?f-h:h-f}),c}searchByPolygon(e,n=!0,s=null,r=!1){const i=[{node:this.root,depth:0}],o=[];for(;i.length>0;){const{node:c,depth:u}=i.pop();if(c==null)continue;c.left!=null&&i.push({node:c.left,depth:u+1}),c.right!=null&&i.push({node:c.right,depth:u+1});const l=H.isPointInPolygon(e,c.point);(l&&n||!l&&!n)&&o.push({point:c.point,docIDs:Array.from(c.docIDs)})}const a=H.calculatePolygonCentroid(e);if(s){const c=r?H.vincentyDistance:H.haversineDistance;o.sort((u,l)=>{const f=c(a,u.point),h=c(a,l.point);return s.toLowerCase()==="asc"?f-h:h-f})}return o}toJSON(){return{root:this.root?this.root.toJSON():null}}static fromJSON(e){const n=new H;return e.root&&(n.root=Ct.fromJSON(e.root),n.buildNodeMap(n.root)),n}buildNodeMap(e){if(e==null)return;const n=this.getPointKey(e.point);this.nodeMap.set(n,e),e.left&&this.buildNodeMap(e.left),e.right&&this.buildNodeMap(e.right)}static calculatePolygonCentroid(e){let n=0,s=0,r=0;const i=e.length;for(let a=0,c=i-1;a<i;c=a++){const u=e[a].lon,l=e[a].lat,f=e[c].lon,h=e[c].lat,g=u*h-f*l;n+=g,s+=(u+f)*g,r+=(l+h)*g}n/=2;const o=6*n;return s/=o,r/=o,{lon:s,lat:r}}static isPointInPolygon(e,n){let s=!1;const r=n.lon,i=n.lat,o=e.length;for(let a=0,c=o-1;a<o;c=a++){const u=e[a].lon,l=e[a].lat,f=e[c].lon,h=e[c].lat;l>i!=h>i&&r<(f-u)*(i-l)/(h-l)+u&&(s=!s)}return s}static haversineDistance(e,n){const s=Math.PI/180,r=e.lat*s,i=n.lat*s,o=(n.lat-e.lat)*s,a=(n.lon-e.lon)*s,c=Math.sin(o/2)*Math.sin(o/2)+Math.cos(r)*Math.cos(i)*Math.sin(a/2)*Math.sin(a/2),u=2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c));return Oc*u}static vincentyDistance(e,n){const r=.0033528106647474805,i=(1-r)*6378137,o=Math.PI/180,a=e.lat*o,c=n.lat*o,u=(n.lon-e.lon)*o,l=Math.atan((1-r)*Math.tan(a)),f=Math.atan((1-r)*Math.tan(c)),h=Math.sin(l),g=Math.cos(l),m=Math.sin(f),p=Math.cos(f);let d=u,y,S=1e3,v,b,x,A,w,T;do{const ot=Math.sin(d),ft=Math.cos(d);if(v=Math.sqrt(p*ot*(p*ot)+(g*m-h*p*ft)*(g*m-h*p*ft)),v===0)return 0;b=h*m+g*p*ft,x=Math.atan2(v,b),A=g*p*ot/v,w=1-A*A,T=b-2*h*m/w,isNaN(T)&&(T=0);const ue=r/16*w*(4+r*(4-3*w));y=d,d=u+(1-ue)*r*A*(x+ue*v*(T+ue*b*(-1+2*T*T)))}while(Math.abs(d-y)>1e-12&&--S>0);if(S===0)return NaN;const D=w*(6378137*6378137-i*i)/(i*i),O=1+D/16384*(4096+D*(-768+D*(320-175*D))),L=D/1024*(256+D*(-128+D*(74-47*D))),G=L*v*(T+L/4*(b*(-1+2*T*T)-L/6*T*(-3+4*v*v)*(-3+4*T*T)));return i*O*(x-G)}}class se{true;false;constructor(){this.true=new Set,this.false=new Set}insert(e,n){n?this.true.add(e):this.false.add(e)}delete(e,n){n?this.true.delete(e):this.false.delete(e)}getSize(){return this.true.size+this.false.size}toJSON(){return{true:Array.from(this.true),false:Array.from(this.false)}}static fromJSON(e){const n=new se;return n.true=new Set(e.true),n.false=new Set(e.false),n}}function Mc(t,e,n,s,r,{k:i,b:o,d:a}){return Math.log(1+(n-e+.5)/(e+.5))*(a+t*(i+1))/(t+i*(1-o+o*s/r))}const Cc=.8;class re{size;vectors=new Map;constructor(e){this.size=e}add(e,n){n instanceof Float32Array||(n=new Float32Array(n));const s=Li(n,this.size);this.vectors.set(e,[s,n])}remove(e){this.vectors.delete(e)}find(e,n,s){return e instanceof Float32Array||(e=new Float32Array(e)),kc(e,s,this.vectors,this.size,n)}toJSON(){const e=[];for(const[n,[s,r]]of this.vectors)e.push([n,[s,Array.from(r)]]);return{size:this.size,vectors:e}}static fromJSON(e){const n=e,s=new re(n.size);for(const[r,[i,o]]of n.vectors)s.vectors.set(r,[i,new Float32Array(o)]);return s}}function Li(t,e){let n=0;for(let s=0;s<e;s++)n+=t[s]*t[s];return Math.sqrt(n)}function kc(t,e,n,s,r){const i=Li(t,s),o=[],a=e||n.keys();for(const c of a){const u=n.get(c);if(!u)continue;const l=u[0],f=u[1];let h=0;for(let m=0;m<s;m++)h+=t[m]*f[m];const g=h/(i*l);g>=r&&o.push([c,g])}return o}function _c(t,e,n,s,r){const i=$(t.sharedInternalDocumentStore,n);t.avgFieldLength[e]=((t.avgFieldLength[e]??0)*(r-1)+s.length)/r,t.fieldLengths[e][i]=s.length,t.frequencies[e][i]={}}function Vc(t,e,n,s,r){let i=0;for(const c of s)c===r&&i++;const o=$(t.sharedInternalDocumentStore,n),a=i/s.length;t.frequencies[e][o][r]=a,r in t.tokenOccurrences[e]||(t.tokenOccurrences[e][r]=0),t.tokenOccurrences[e][r]=(t.tokenOccurrences[e][r]??0)+1}function Lc(t,e,n,s){const r=$(t.sharedInternalDocumentStore,n);s>1?t.avgFieldLength[e]=(t.avgFieldLength[e]*s-t.fieldLengths[e][r])/(s-1):t.avgFieldLength[e]=void 0,t.fieldLengths[e][r]=void 0,t.frequencies[e][r]=void 0}function Nc(t,e,n){t.tokenOccurrences[e][n]--}function Ni(t,e,n,s,r=""){s||(s={sharedInternalDocumentStore:e,indexes:{},vectorIndexes:{},searchableProperties:[],searchablePropertiesWithTypes:{},frequencies:{},tokenOccurrences:{},avgFieldLength:{},fieldLengths:{}});for(const[i,o]of Object.entries(n)){const a=`${r}${r?".":""}${i}`;if(typeof o=="object"&&!Array.isArray(o)){Ni(t,e,o,s,a);continue}if(At(o))s.searchableProperties.push(a),s.searchablePropertiesWithTypes[a]=o,s.vectorIndexes[a]={type:"Vector",node:new re(Un(o)),isArray:!1};else{const c=/\[/.test(o);switch(o){case"boolean":case"boolean[]":s.indexes[a]={type:"Bool",node:new se,isArray:c};break;case"number":case"number[]":s.indexes[a]={type:"AVL",node:new ee(0,[]),isArray:c};break;case"string":case"string[]":s.indexes[a]={type:"Radix",node:new ne,isArray:c},s.avgFieldLength[a]=0,s.frequencies[a]={},s.tokenOccurrences[a]={},s.fieldLengths[a]={};break;case"enum":case"enum[]":s.indexes[a]={type:"Flat",node:new Wn,isArray:c};break;case"geopoint":s.indexes[a]={type:"BKD",node:new H,isArray:c};break;default:throw I("INVALID_SCHEMA_TYPE",Array.isArray(o)?"array":o,a)}s.searchableProperties.push(a),s.searchablePropertiesWithTypes[a]=o}}return s}function Bc(t,e,n,s,r,i,o,a){return c=>{const{type:u,node:l}=e.indexes[n];switch(u){case"Bool":{l[c?"true":"false"].add(s);break}case"AVL":{const f=a?.avlRebalanceThreshold??1;l.insert(c,s,f);break}case"Radix":{const f=i.tokenize(c,r,n,!1);t.insertDocumentScoreParameters(e,n,s,f,o);for(const h of f)t.insertTokenScoreParameters(e,n,s,f,h),l.insert(h,s);break}case"Flat":{l.insert(c,s);break}case"BKD":{l.insert(c,[s]);break}}}}function Bi(t,e,n,s,r,i,o,a,c,u,l){if(At(o))return Fc(e,n,i,s,r);const f=Bc(t,e,n,r,a,c,u,l);if(!ke(o))return f(i);const h=i,g=h.length;for(let m=0;m<g;m++)f(h[m])}function Fc(t,e,n,s,r){t.vectorIndexes[e].node.add(r,n)}function js(t,e,n,s,r,i,o,a,c,u){if(At(o))return e.vectorIndexes[n].node.remove(r),!0;const{type:l,node:f}=e.indexes[n];switch(l){case"AVL":return f.removeDocument(i,r),!0;case"Bool":return f[i?"true":"false"].delete(r),!0;case"Radix":{const h=c.tokenize(i,a,n);t.removeDocumentScoreParameters(e,n,s,u);for(const g of h)t.removeTokenScoreParameters(e,n,g),f.removeDocumentByWord(g,r);return!0}case"Flat":return f.removeDocument(r,i),!0;case"BKD":return f.removeDocByID(i,r),!1}}function Fi(t,e,n,s,r,i,o,a,c,u){if(!ke(o))return js(t,e,n,s,r,i,o,a,c,u);const l=ki(o),f=i,h=f.length;for(let g=0;g<h;g++)js(t,e,n,s,r,f[g],l,a,c,u);return!0}function ji(t,e,n,s,r,i,o,a,c,u){const l=Array.from(s),f=t.avgFieldLength[e],h=t.fieldLengths[e],g=t.tokenOccurrences[e],m=t.frequencies[e],p=typeof g[n]=="number"?g[n]??0:0,d=l.length;for(let y=0;y<d;y++){const S=l[y];if(c&&!c.has(S))continue;u.has(S)||u.set(S,new Map);const v=u.get(S);v.set(e,(v.get(e)||0)+1);const b=m?.[S]?.[n]??0,x=Mc(b,p,r,h[S],f,i);o.has(S)?o.set(S,o.get(S)+x*a):o.set(S,x*a)}}function jc(t,e,n,s,r,i,o,a,c,u,l,f=0){const h=n.tokenize(e,s),g=h.length||1,m=new Map,p=new Map,d=new Map;for(const v of r){if(!(v in t.indexes))continue;const b=t.indexes[v],{type:x}=b;if(x!=="Radix")throw I("WRONG_SEARCH_PROPERTY_TYPE",v);const A=a[v]??1;if(A<=0)throw I("INVALID_BOOST_VALUE",A);h.length===0&&!e&&h.push("");const w=h.length;for(let T=0;T<w;T++){const D=h[T],O=b.node.find({term:D,exact:i,tolerance:o}),L=Object.keys(O);L.length>0&&p.set(D,!0);const G=L.length;for(let lt=0;lt<G;lt++){const ot=L[lt],ft=O[ot];ji(t,v,ot,ft,u,c,d,A,l,m)}}}const y=Array.from(d.entries()).map(([v,b])=>[v,b]).sort((v,b)=>b[1]-v[1]);if(y.length===0)return[];if(f===1)return y;if(f===0){if(g===1)return y;for(const b of h)if(!p.get(b))return[];return y.filter(([b])=>{const x=m.get(b);return x?Array.from(x.values()).some(A=>A===g):!1})}const S=y.filter(([v])=>{const b=m.get(v);return b?Array.from(b.values()).some(x=>x===g):!1});if(S.length>0){const v=y.filter(([x])=>!S.some(([A])=>A===x)),b=Math.ceil(v.length*f);return[...S,...v.slice(0,b)]}return y}function kt(t,e,n,s){if("and"in n&&n.and&&Array.isArray(n.and)){const o=n.and;if(o.length===0)return new Set;const a=o.map(c=>kt(t,e,c,s));return we(...a)}if("or"in n&&n.or&&Array.isArray(n.or)){const o=n.or;return o.length===0?new Set:o.map(c=>kt(t,e,c,s)).reduce((c,u)=>le(c,u),new Set)}if("not"in n&&n.not){const o=n.not,a=new Set,c=t.sharedInternalDocumentStore;for(let l=1;l<=c.internalIdToId.length;l++)a.add(l);const u=kt(t,e,o,s);return sc(a,u)}const r=Object.keys(n),i=r.reduce((o,a)=>({[a]:new Set,...o}),{});for(const o of r){const a=n[o];if(typeof t.indexes[o]>"u")throw I("UNKNOWN_FILTER_PROPERTY",o);const{node:c,type:u,isArray:l}=t.indexes[o];if(u==="Bool"){const h=c,g=a?h.true:h.false;i[o]=le(i[o],g);continue}if(u==="BKD"){let h;if("radius"in a)h="radius";else if("polygon"in a)h="polygon";else throw new Error(`Invalid operation ${a}`);if(h==="radius"){const{value:g,coordinates:m,unit:p="m",inside:d=!0,highPrecision:y=!1}=a[h],S=Ri(g,p),v=c.searchByRadius(m,S,d,void 0,y);i[o]=Us(i[o],v)}else{const{coordinates:g,inside:m=!0,highPrecision:p=!1}=a[h],d=c.searchByPolygon(g,m,void 0,p);i[o]=Us(i[o],d)}continue}if(u==="Radix"&&(typeof a=="string"||Array.isArray(a))){for(const h of[a].flat()){const g=e.tokenize(h,s,o);for(const m of g){const p=c.find({term:m,exact:!0});i[o]=Gc(i[o],p)}}continue}const f=Object.keys(a);if(f.length>1)throw I("INVALID_FILTER_OPERATION",f.length);if(u==="Flat"){const h=new Set(l?c.filterArr(a):c.filter(a));i[o]=le(i[o],h);continue}if(u==="AVL"){const h=f[0],g=a[h];let m;switch(h){case"gt":{m=c.greaterThan(g,!1);break}case"gte":{m=c.greaterThan(g,!0);break}case"lt":{m=c.lessThan(g,!1);break}case"lte":{m=c.lessThan(g,!0);break}case"eq":{m=c.find(g)??new Set;break}case"between":{const[p,d]=g;m=c.rangeSearch(p,d);break}default:throw I("INVALID_FILTER_OPERATION",h)}i[o]=le(i[o],m)}}return we(...Object.values(i))}function Uc(t){return t.searchableProperties}function zc(t){return t.searchablePropertiesWithTypes}function Ui(t,e){const{indexes:n,vectorIndexes:s,searchableProperties:r,searchablePropertiesWithTypes:i,frequencies:o,tokenOccurrences:a,avgFieldLength:c,fieldLengths:u}=e,l={},f={};for(const h of Object.keys(n)){const{node:g,type:m,isArray:p}=n[h];switch(m){case"Radix":l[h]={type:"Radix",node:ne.fromJSON(g),isArray:p};break;case"Flat":l[h]={type:"Flat",node:Wn.fromJSON(g),isArray:p};break;case"AVL":l[h]={type:"AVL",node:ee.fromJSON(g),isArray:p};break;case"BKD":l[h]={type:"BKD",node:H.fromJSON(g),isArray:p};break;case"Bool":l[h]={type:"Bool",node:se.fromJSON(g),isArray:p};break;default:l[h]=n[h]}}for(const h of Object.keys(s))f[h]={type:"Vector",isArray:!1,node:re.fromJSON(s[h])};return{sharedInternalDocumentStore:t,indexes:l,vectorIndexes:f,searchableProperties:r,searchablePropertiesWithTypes:i,frequencies:o,tokenOccurrences:a,avgFieldLength:c,fieldLengths:u}}function zi(t){const{indexes:e,vectorIndexes:n,searchableProperties:s,searchablePropertiesWithTypes:r,frequencies:i,tokenOccurrences:o,avgFieldLength:a,fieldLengths:c}=t,u={};for(const f of Object.keys(n))u[f]=n[f].node.toJSON();const l={};for(const f of Object.keys(e)){const{type:h,node:g,isArray:m}=e[f];h==="Flat"||h==="Radix"||h==="AVL"||h==="BKD"||h==="Bool"?l[f]={type:h,node:g.toJSON(),isArray:m}:(l[f]=e[f],l[f].node=l[f].node.toJSON())}return{indexes:l,vectorIndexes:u,searchableProperties:s,searchablePropertiesWithTypes:r,frequencies:i,tokenOccurrences:o,avgFieldLength:a,fieldLengths:c}}function $c(){return{create:Ni,insert:Bi,remove:Fi,insertDocumentScoreParameters:_c,insertTokenScoreParameters:Vc,removeDocumentScoreParameters:Lc,removeTokenScoreParameters:Nc,calculateResultScores:ji,search:jc,searchByWhereClause:kt,getSearchableProperties:Uc,getSearchablePropertiesWithTypes:zc,load:Ui,save:zi}}function Us(t,e){t||(t=new Set);const n=e.length;for(let s=0;s<n;s++){const r=e[s].docIDs,i=r.length;for(let o=0;o<i;o++)t.add(r[o])}return t}function zs(t,e,n=!1){const s=n?H.vincentyDistance:H.haversineDistance,r=[],i=[];for(const{point:c}of t)i.push(s(e,c));const o=Math.max(...i);let a=0;for(const{docIDs:c}of t){const u=i[a],l=o-u+1;for(const f of c)r.push([f,l]);a++}return r.sort((c,u)=>u[1]-c[1]),r}function Wc(t,e){const n=Object.keys(t);if(n.length!==1)return{isGeoOnly:!1};const s=n[0],r=t[s];if(typeof e.indexes[s]>"u")return{isGeoOnly:!1};const{type:i}=e.indexes[s];return i==="BKD"&&r&&("radius"in r||"polygon"in r)?{isGeoOnly:!0,geoProperty:s,geoOperation:r}:{isGeoOnly:!1}}function Kc(t,e){const n=t,s=Wc(e,n);if(!s.isGeoOnly||!s.geoProperty||!s.geoOperation)return null;const{node:r}=n.indexes[s.geoProperty],i=s.geoOperation,o=r;let a;if("radius"in i){const{value:c,coordinates:u,unit:l="m",inside:f=!0,highPrecision:h=!1}=i.radius,g=u,m=Ri(c,l);return a=o.searchByRadius(g,m,f,"asc",h),zs(a,g,h)}else if("polygon"in i){const{coordinates:c,inside:u=!0,highPrecision:l=!1}=i.polygon;a=o.searchByPolygon(c,u,"asc",l);const f=H.calculatePolygonCentroid(c);return zs(a,f,l)}return null}function Gc(t,e){t||(t=new Set);const n=Object.keys(e),s=n.length;for(let r=0;r<s;r++){const i=e[n[r]],o=i.length;for(let a=0;a<o;a++)t.add(i[a])}return t}function $i(t,e,n,s,r){const i={language:t.tokenizer.language,sharedInternalDocumentStore:e,enabled:!0,isSorted:!0,sortableProperties:[],sortablePropertiesWithTypes:{},sorts:{}};for(const[o,a]of Object.entries(n)){const c=`${r}${r?".":""}${o}`;if(!s.includes(c)){if(typeof a=="object"&&!Array.isArray(a)){const u=$i(t,e,a,s,c);Ai(i.sortableProperties,u.sortableProperties),i.sorts={...i.sorts,...u.sorts},i.sortablePropertiesWithTypes={...i.sortablePropertiesWithTypes,...u.sortablePropertiesWithTypes};continue}if(!At(a))switch(a){case"boolean":case"number":case"string":i.sortableProperties.push(c),i.sortablePropertiesWithTypes[c]=a,i.sorts[c]={docs:new Map,orderedDocsToRemove:new Map,orderedDocs:[],type:a};break;case"geopoint":case"enum":continue;case"enum[]":case"boolean[]":case"number[]":case"string[]":continue;default:throw I("INVALID_SORT_SCHEMA_TYPE",Array.isArray(a)?"array":a,c)}}}return i}function Hc(t,e,n,s){return s?.enabled!==!1?$i(t,e,n,(s||{}).unsortableProperties||[],""):{disabled:!0}}function Yc(t,e,n,s){if(!t.enabled)return;t.isSorted=!1;const r=$(t.sharedInternalDocumentStore,n),i=t.sorts[e];i.orderedDocsToRemove.has(r)&&Kn(t,e),i.docs.set(r,i.orderedDocs.length),i.orderedDocs.push([r,s])}function Wi(t){if(t.isSorted||!t.enabled)return;const e=Object.keys(t.sorts);for(const n of e)Zc(t,n);t.isSorted=!0}function qc(t,e,n){return e[1].localeCompare(n[1],Ya(t))}function Xc(t,e){return t[1]-e[1]}function Jc(t,e){return e[1]?-1:1}function Zc(t,e){const n=t.sorts[e];let s;switch(n.type){case"string":s=qc.bind(null,t.language);break;case"number":s=Xc.bind(null);break;case"boolean":s=Jc.bind(null);break}n.orderedDocs.sort(s);const r=n.orderedDocs.length;for(let i=0;i<r;i++){const o=n.orderedDocs[i][0];n.docs.set(o,i)}}function Qc(t){const e=Object.keys(t.sorts);for(const n of e)Kn(t,n)}function Kn(t,e){const n=t.sorts[e];n.orderedDocsToRemove.size&&(n.orderedDocs=n.orderedDocs.filter(s=>!n.orderedDocsToRemove.has(s[0])),n.orderedDocsToRemove.clear())}function tu(t,e,n){if(!t.enabled)return;const s=t.sorts[e],r=$(t.sharedInternalDocumentStore,n);s.docs.get(r)&&(s.docs.delete(r),s.orderedDocsToRemove.set(r,!0))}function eu(t,e,n){if(!t.enabled)throw I("SORT_DISABLED");const s=n.property,r=n.order==="DESC",i=t.sorts[s];if(!i)throw I("UNABLE_TO_SORT_ON_UNKNOWN_FIELD",s,t.sortableProperties.join(", "));return Kn(t,s),Wi(t),e.sort((o,a)=>{const c=i.docs.get($(t.sharedInternalDocumentStore,o[0])),u=i.docs.get($(t.sharedInternalDocumentStore,a[0])),l=typeof c<"u",f=typeof u<"u";return!l&&!f?0:l?f?r?u-c:c-u:-1:1}),e}function nu(t){return t.enabled?t.sortableProperties:[]}function su(t){return t.enabled?t.sortablePropertiesWithTypes:{}}function ru(t,e){const n=e;if(!n.enabled)return{enabled:!1};const s=Object.keys(n.sorts).reduce((r,i)=>{const{docs:o,orderedDocs:a,type:c}=n.sorts[i];return r[i]={docs:new Map(Object.entries(o).map(([u,l])=>[+u,l])),orderedDocsToRemove:new Map,orderedDocs:a,type:c},r},{});return{sharedInternalDocumentStore:t,language:n.language,sortableProperties:n.sortableProperties,sortablePropertiesWithTypes:n.sortablePropertiesWithTypes,sorts:s,enabled:!0,isSorted:n.isSorted}}function iu(t){if(!t.enabled)return{enabled:!1};Qc(t),Wi(t);const e=Object.keys(t.sorts).reduce((n,s)=>{const{docs:r,orderedDocs:i,type:o}=t.sorts[s];return n[s]={docs:Object.fromEntries(r.entries()),orderedDocs:i,type:o},n},{});return{language:t.language,sortableProperties:t.sortableProperties,sortablePropertiesWithTypes:t.sortablePropertiesWithTypes,sorts:e,enabled:t.enabled,isSorted:t.isSorted}}function ou(){return{create:Hc,insert:Yc,remove:tu,save:iu,load:ru,sortBy:eu,getSortableProperties:nu,getSortablePropertiesWithTypes:su}}const $s=192,au=383,cu=[65,65,65,65,65,65,65,67,69,69,69,69,73,73,73,73,69,78,79,79,79,79,79,null,79,85,85,85,85,89,80,115,97,97,97,97,97,97,97,99,101,101,101,101,105,105,105,105,101,110,111,111,111,111,111,null,111,117,117,117,117,121,112,121,65,97,65,97,65,97,67,99,67,99,67,99,67,99,68,100,68,100,69,101,69,101,69,101,69,101,69,101,71,103,71,103,71,103,71,103,72,104,72,104,73,105,73,105,73,105,73,105,73,105,73,105,74,106,75,107,107,76,108,76,108,76,108,76,108,76,108,78,110,78,110,78,110,110,78,110,79,111,79,111,79,111,79,111,82,114,82,114,82,114,83,115,83,115,83,115,83,115,84,116,84,116,84,116,85,117,85,117,85,117,85,117,85,117,85,117,87,119,89,121,89,90,122,90,122,90,122,115];function uu(t){return t<$s||t>au?t:cu[t-$s]||t}function lu(t){const e=[];for(let n=0;n<t.length;n++)e[n]=uu(t.charCodeAt(n));return String.fromCharCode(...e)}const fu={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},hu={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},du="[^aeiou]",xe="[aeiouy]",nt=du+"[^aeiouy]*",Yt=xe+"[aeiou]*",ze="^("+nt+")?"+Yt+nt,pu="^("+nt+")?"+Yt+nt+"("+Yt+")?$",fe="^("+nt+")?"+Yt+nt+Yt+nt,Ws="^("+nt+")?"+xe;function mu(t){let e,n,s,r,i,o;if(t.length<3)return t;const a=t.substring(0,1);if(a=="y"&&(t=a.toUpperCase()+t.substring(1)),s=/^(.+?)(ss|i)es$/,r=/^(.+?)([^s])s$/,s.test(t)?t=t.replace(s,"$1$2"):r.test(t)&&(t=t.replace(r,"$1$2")),s=/^(.+?)eed$/,r=/^(.+?)(ed|ing)$/,s.test(t)){const c=s.exec(t);s=new RegExp(ze),s.test(c[1])&&(s=/.$/,t=t.replace(s,""))}else r.test(t)&&(e=r.exec(t)[1],r=new RegExp(Ws),r.test(e)&&(t=e,r=/(at|bl|iz)$/,i=new RegExp("([^aeiouylsz])\\1$"),o=new RegExp("^"+nt+xe+"[^aeiouwxy]$"),r.test(t)?t=t+"e":i.test(t)?(s=/.$/,t=t.replace(s,"")):o.test(t)&&(t=t+"e")));if(s=/^(.+?)y$/,s.test(t)&&(e=s.exec(t)?.[1],s=new RegExp(Ws),e&&s.test(e)&&(t=e+"i")),s=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/,s.test(t)){const c=s.exec(t);e=c?.[1],n=c?.[2],s=new RegExp(ze),e&&s.test(e)&&(t=e+fu[n])}if(s=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/,s.test(t)){const c=s.exec(t);e=c?.[1],n=c?.[2],s=new RegExp(ze),e&&s.test(e)&&(t=e+hu[n])}if(s=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/,r=/^(.+?)(s|t)(ion)$/,s.test(t))e=s.exec(t)?.[1],s=new RegExp(fe),e&&s.test(e)&&(t=e);else if(r.test(t)){const c=r.exec(t);e=c?.[1]??""+c?.[2]??"",r=new RegExp(fe),r.test(e)&&(t=e)}return s=/^(.+?)e$/,s.test(t)&&(e=s.exec(t)?.[1],s=new RegExp(fe),r=new RegExp(pu),i=new RegExp("^"+nt+xe+"[^aeiouwxy]$"),e&&(s.test(e)||r.test(e)&&!i.test(e))&&(t=e)),s=/ll$/,r=new RegExp(fe),s.test(t)&&r.test(t)&&(s=/.$/,t=t.replace(s,"")),a=="y"&&(t=a.toLowerCase()+t.substring(1)),t}function Ks(t,e,n=!0){const s=`${this.language}:${t}:${e}`;return n&&this.normalizationCache.has(s)?this.normalizationCache.get(s):this.stopWords?.includes(e)?(n&&this.normalizationCache.set(s,""),""):(this.stemmer&&!this.stemmerSkipProperties.has(t)&&(e=this.stemmer(e)),e=lu(e),n&&this.normalizationCache.set(s,e),e)}function gu(t){for(;t[t.length-1]==="";)t.pop();for(;t[0]==="";)t.shift();return t}function Gs(t,e,n,s=!0){if(e&&e!==this.language)throw I("LANGUAGE_NOT_SUPPORTED",e);if(typeof t!="string")return[t];const r=this.normalizeToken.bind(this,n??"");let i;if(n&&this.tokenizeSkipProperties.has(n))i=[r(t,s)];else{const a=Ha[this.language];i=t.toLowerCase().split(a).map(c=>r(c,s)).filter(Boolean)}const o=gu(i);return this.allowDuplicates?o:Array.from(new Set(o))}function Hs(t={}){if(!t.language)t.language="english";else if(!Bn.includes(t.language))throw I("LANGUAGE_NOT_SUPPORTED",t.language);let e;if(t.stemming||t.stemmer&&!("stemming"in t))if(t.stemmer){if(typeof t.stemmer!="function")throw I("INVALID_STEMMER_FUNCTION_TYPE");e=t.stemmer}else if(t.language==="english")e=mu;else throw I("MISSING_STEMMER",t.language);let n;if(t.stopWords!==!1){if(n=[],Array.isArray(t.stopWords))n=t.stopWords;else if(typeof t.stopWords=="function")n=t.stopWords(n);else if(t.stopWords)throw I("CUSTOM_STOP_WORDS_MUST_BE_FUNCTION_OR_ARRAY");if(!Array.isArray(n))throw I("CUSTOM_STOP_WORDS_MUST_BE_FUNCTION_OR_ARRAY");for(const r of n)if(typeof r!="string")throw I("CUSTOM_STOP_WORDS_MUST_BE_FUNCTION_OR_ARRAY")}const s={tokenize:Gs,language:t.language,stemmer:e,stemmerSkipProperties:new Set(t.stemmerSkipProperties?[t.stemmerSkipProperties].flat():[]),tokenizeSkipProperties:new Set(t.tokenizeSkipProperties?[t.tokenizeSkipProperties].flat():[]),stopWords:n,allowDuplicates:!!t.allowDuplicates,normalizeToken:Ks,normalizationCache:new Map};return s.tokenize=Gs.bind(s),s.normalizeToken=Ks,s}function yu(t){return{sharedInternalDocumentStore:t,rules:new Map}}function vu(t,e){if(t.rules.has(e.id))throw new Error(`PINNING_RULE_ALREADY_EXISTS: A pinning rule with id "${e.id}" already exists. Use updateRule to modify it.`);t.rules.set(e.id,e)}function Su(t,e){if(!t.rules.has(e.id))throw new Error(`PINNING_RULE_NOT_FOUND: Cannot update pinning rule with id "${e.id}" because it does not exist. Use addRule to create it.`);t.rules.set(e.id,e)}function bu(t,e){return t.rules.delete(e)}function wu(t,e){return t.rules.get(e)}function Tu(t){return Array.from(t.rules.values())}function xu(t,e){const n=t.toLowerCase().trim(),s=e.pattern.toLowerCase().trim();switch(e.anchoring){case"is":return n===s;case"starts_with":return n.startsWith(s);case"contains":return n.includes(s);default:return!1}}function Pu(t,e){return t?e.conditions.every(n=>xu(t,n)):!1}function Ki(t,e){if(!e)return[];const n=[];for(const s of t.rules.values())Pu(e,s)&&n.push(s);return n}function Au(t,e){const n=e;return{sharedInternalDocumentStore:t,rules:new Map(n?.rules??[])}}function Eu(t){return{rules:Array.from(t.rules.entries())}}function Du(){return{create:yu,addRule:vu,updateRule:Su,removeRule:bu,getRule:wu,getAllRules:Tu,getMatchingRules:Ki,load:Au,save:Eu}}function Iu(t){const e={formatElapsedTime:oc,getDocumentIndexId:ac,getDocumentProperties:Ii,validateSchema:Ci};for(const n of Bs){const s=n;if(t[s]){if(typeof t[s]!="function")throw I("COMPONENT_MUST_BE_FUNCTION",s)}else t[s]=e[s]}for(const n of Object.keys(t))if(!Ec.includes(n)&&!Bs.includes(n))throw I("UNSUPPORTED_COMPONENT",n)}function Ru({schema:t,sort:e,language:n,components:s,id:r,plugins:i}){s||(s={});for(const S of i??[]){if(!("getComponents"in S)||typeof S.getComponents!="function")continue;const v=S.getComponents(t),b=Object.keys(v);for(const x of b)if(s[x])throw I("PLUGIN_COMPONENT_CONFLICT",x,S.name);s={...s,...v}}r||(r=Ei());let o=s.tokenizer,a=s.index,c=s.documentsStore,u=s.sorter,l=s.pinning;if(o?o.tokenize?o=o:o=Hs(o):o=Hs({language:n??"english"}),s.tokenizer&&n)throw I("NO_LANGUAGE_WITH_CUSTOM_TOKENIZER");const f=fc();a||=$c(),u||=ou(),c||=xc(),l||=Du(),Iu(s);const{getDocumentProperties:h,getDocumentIndexId:g,validateSchema:m,formatElapsedTime:p}=s,d={data:{},caches:{},schema:t,tokenizer:o,index:a,sorter:u,documentsStore:c,pinning:l,internalDocumentIDStore:f,getDocumentProperties:h,getDocumentIndexId:g,validateSchema:m,beforeInsert:[],afterInsert:[],beforeRemove:[],afterRemove:[],beforeUpdate:[],afterUpdate:[],beforeUpsert:[],afterUpsert:[],beforeSearch:[],afterSearch:[],beforeInsertMultiple:[],afterInsertMultiple:[],beforeRemoveMultiple:[],afterRemoveMultiple:[],beforeUpdateMultiple:[],afterUpdateMultiple:[],beforeUpsertMultiple:[],afterUpsertMultiple:[],afterCreate:[],formatElapsedTime:p,id:r,plugins:i,version:Ou()};d.data={index:d.index.create(d,f,t),docs:d.documentsStore.create(d,f),sorting:d.sorter.create(d,f,t,e),pinning:d.pinning.create(f)};for(const S of Pc)d[S]=(d[S]??[]).concat(Ac(d,S));const y=d.afterCreate;return y&&Dc(y,d),d}function Ou(){return"{{VERSION}}"}function Mu(t){return t.documentsStore.count(t.data.docs)}function Gn(t,e,n,s,r){const i=t.validateSchema(e,t.schema);if(i)throw I("SCHEMA_VALIDATION_FAILURE",i);return U(t.beforeInsert)||U(t.afterInsert)||U(t.index.beforeInsert)||U(t.index.insert)||U(t.index.afterInsert)?_u(t,e,n,s,r):Vu(t,e,n,s,r)}const Cu=new Set(["enum","enum[]"]),ku=new Set(["string","number"]);async function _u(t,e,n,s,r){const{index:i,docs:o}=t.data,a=t.getDocumentIndexId(e);if(typeof a!="string")throw I("DOCUMENT_ID_MUST_BE_STRING",typeof a);const c=$(t.internalDocumentIDStore,a);if(await Te(t.beforeInsert,t,a,e),!t.documentsStore.store(o,a,c,e))throw I("DOCUMENT_ALREADY_EXISTS",a);const u=t.documentsStore.count(o),l=t.index.getSearchableProperties(i),f=t.index.getSearchablePropertiesWithTypes(i),h=t.getDocumentProperties(e,l);for(const[g,m]of Object.entries(h)){if(typeof m>"u")continue;const p=typeof m,d=f[g];Gi(p,d,g,m)}return await Lu(t,a,l,h,u,n,e,r),await Te(t.afterInsert,t,a,e),a}function Vu(t,e,n,s,r){const{index:i,docs:o}=t.data,a=t.getDocumentIndexId(e);if(typeof a!="string")throw I("DOCUMENT_ID_MUST_BE_STRING",typeof a);const c=$(t.internalDocumentIDStore,a);if(Te(t.beforeInsert,t,a,e),!t.documentsStore.store(o,a,c,e))throw I("DOCUMENT_ALREADY_EXISTS",a);const u=t.documentsStore.count(o),l=t.index.getSearchableProperties(i),f=t.index.getSearchablePropertiesWithTypes(i),h=t.getDocumentProperties(e,l);for(const[g,m]of Object.entries(h)){if(typeof m>"u")continue;const p=typeof m,d=f[g];Gi(p,d,g,m)}return Nu(t,a,l,h,u,n,e,r),Te(t.afterInsert,t,a,e),a}function Gi(t,e,n,s){if(!(lc(e)&&typeof s=="object"&&typeof s.lon=="number"&&typeof s.lat=="number")&&!(At(e)&&Array.isArray(s))&&!(ke(e)&&Array.isArray(s))&&!(Cu.has(e)&&ku.has(t))&&t!==e)throw I("INVALID_DOCUMENT_PROPERTY",n,e,t)}async function Lu(t,e,n,s,r,i,o,a){for(const l of n){const f=s[l];if(typeof f>"u")continue;const h=t.index.getSearchablePropertiesWithTypes(t.data.index)[l];await t.index.beforeInsert?.(t.data.index,l,e,f,h,i,t.tokenizer,r);const g=t.internalDocumentIDStore.idToInternalId.get(e);await t.index.insert(t.index,t.data.index,l,e,g,f,h,i,t.tokenizer,r,a),await t.index.afterInsert?.(t.data.index,l,e,f,h,i,t.tokenizer,r)}const c=t.sorter.getSortableProperties(t.data.sorting),u=t.getDocumentProperties(o,c);for(const l of c){const f=u[l];if(typeof f>"u")continue;const h=t.sorter.getSortablePropertiesWithTypes(t.data.sorting)[l];t.sorter.insert(t.data.sorting,l,e,f,h,i)}}function Nu(t,e,n,s,r,i,o,a){for(const l of n){const f=s[l];if(typeof f>"u")continue;const h=t.index.getSearchablePropertiesWithTypes(t.data.index)[l],g=$(t.internalDocumentIDStore,e);t.index.beforeInsert?.(t.data.index,l,e,f,h,i,t.tokenizer,r),t.index.insert(t.index,t.data.index,l,e,g,f,h,i,t.tokenizer,r,a),t.index.afterInsert?.(t.data.index,l,e,f,h,i,t.tokenizer,r)}const c=t.sorter.getSortableProperties(t.data.sorting),u=t.getDocumentProperties(o,c);for(const l of c){const f=u[l];if(typeof f>"u")continue;const h=t.sorter.getSortablePropertiesWithTypes(t.data.sorting)[l];t.sorter.insert(t.data.sorting,l,e,f,h,i)}}function Bu(t,e,n,s,r,i){return U(t.afterInsertMultiple)||U(t.beforeInsertMultiple)||U(t.index.beforeInsert)||U(t.index.insert)||U(t.index.afterInsert)?Fu(t,e,n,s,r,i):ju(t,e,n,s,r,i)}async function Fu(t,e,n=1e3,s,r,i=0){const o=[],a=async u=>{const l=Math.min(u+n,e.length),f=e.slice(u,l);for(const h of f){const g={avlRebalanceThreshold:f.length},m=await Gn(t,h,s,r,g);o.push(m)}return l};return await(async()=>{let u=0;for(;u<e.length;){const l=Date.now();if(u=await a(u),i>0){const f=Date.now()-l,h=i-f;h>0&&Mi(h)}}})(),await _i(t.afterInsertMultiple,t,e),o}function ju(t,e,n=1e3,s,r,i=0){const o=[];let a=0;function c(){const l=e.slice(a*n,(a+1)*n);if(l.length===0)return!1;for(const f of l){const h={avlRebalanceThreshold:l.length},g=Gn(t,f,s,r,h);o.push(g)}return a++,!0}function u(){const l=Date.now();for(;c();)if(i>0){const h=Date.now()-l;if(h>=i){const g=i-h%i;g>0&&Mi(g)}}}return u(),_i(t.afterInsertMultiple,t,e),o}const Ys="fulltext",Uu="hybrid",zu="vector";function $u(t,e){return t[1]-e[1]}function Wu(t,e){return e[1]-t[1]}function Ku(t="desc"){return t.toLowerCase()==="asc"?$u:Wu}function Hn(t,e,n){const s={},r=e.map(([u])=>u),i=t.documentsStore.getMultiple(t.data.docs,r),o=Object.keys(n),a=t.index.getSearchablePropertiesWithTypes(t.data.index);for(const u of o){let l;if(a[u]==="number"){const{ranges:f}=n[u],h=f.length,g=Array.from({length:h});for(let m=0;m<h;m++){const p=f[m];g[m]=[`${p.from}-${p.to}`,0]}l=Object.fromEntries(g)}s[u]={count:0,values:l??{}}}const c=i.length;for(let u=0;u<c;u++){const l=i[u];for(const f of o){const h=f.includes(".")?jn(l,f):l[f],g=a[f],m=s[f].values;switch(g){case"number":{const p=n[f].ranges;qs(p,m)(h);break}case"number[]":{const p=new Set,d=n[f].ranges,y=qs(d,m,p);for(const S of h)y(S);break}case"boolean":case"enum":case"string":{Xs(m,g)(h);break}case"boolean[]":case"enum[]":case"string[]":{const y=Xs(m,g==="boolean[]"?"boolean":"string",new Set);for(const S of h)y(S);break}default:throw I("FACET_NOT_SUPPORTED",g)}}}for(const u of o){const l=s[u];if(l.count=Object.keys(l.values).length,a[u]==="string"){const f=n[u],h=Ku(f.sort);l.values=Object.fromEntries(Object.entries(l.values).sort(h).slice(f.offset??0,f.limit??10))}}return s}function qs(t,e,n){return s=>{for(const r of t){const i=`${r.from}-${r.to}`;n?.has(i)||s>=r.from&&s<=r.to&&(e[i]===void 0?e[i]=1:(e[i]++,n?.add(i)))}}}function Xs(t,e,n){const s=e==="boolean"?"false":"";return r=>{const i=r?.toString()??s;n?.has(i)||(t[i]=(t[i]??0)+1,n?.add(i))}}const Gu={reducer:(t,e,n,s)=>(e[s]=n,e),getInitialValue:t=>Array.from({length:t})},Js=["string","number","boolean"];function Yn(t,e,n){const s=n.properties,r=s.length,i=t.index.getSearchablePropertiesWithTypes(t.data.index);for(let y=0;y<r;y++){const S=s[y];if(typeof i[S]>"u")throw I("UNKNOWN_GROUP_BY_PROPERTY",S);if(!Js.includes(i[S]))throw I("INVALID_GROUP_BY_PROPERTY",S,Js.join(", "),i[S])}const o=e.map(([y])=>_e(t.internalDocumentIDStore,y)),a=t.documentsStore.getMultiple(t.data.docs,o),c=a.length,u=n.maxResult||Number.MAX_SAFE_INTEGER,l=[],f={};for(let y=0;y<r;y++){const S=s[y],v={property:S,perValue:{}},b=new Set;for(let x=0;x<c;x++){const A=a[x],w=jn(A,S);if(typeof w>"u")continue;const T=typeof w!="boolean"?w:""+w,D=v.perValue[T]??{indexes:[],count:0};D.count>=u||(D.indexes.push(x),D.count++,v.perValue[T]=D,b.add(w))}l.push(Array.from(b)),f[S]=v}const h=Hi(l),g=h.length,m=[];for(let y=0;y<g;y++){const S=h[y],v=S.length,b={values:[],indexes:[]},x=[];for(let A=0;A<v;A++){const w=S[A],T=s[A];x.push(f[T].perValue[typeof w!="boolean"?w:""+w].indexes),b.values.push(w)}b.indexes=tc(x).sort((A,w)=>A-w),b.indexes.length!==0&&m.push(b)}const p=m.length,d=Array.from({length:p});for(let y=0;y<p;y++){const S=m[y],v=n.reduce||Gu,b=S.indexes.map(T=>({id:o[T],score:e[T][1],document:a[T]})),x=v.reducer.bind(null,S.values),A=v.getInitialValue(S.indexes.length),w=b.reduce(x,A);d[y]={values:S.values,result:w}}return d}function Hi(t,e=0){if(e+1===t.length)return t[e].map(i=>[i]);const n=t[e],s=Hi(t,e+1),r=[];for(const i of n)for(const o of s){const a=[i];Ai(a,o),r.push(a)}return r}function qn(t,e,n,s){const r=Ki(e,s);if(r.length===0)return n;const i=r.flatMap(d=>d.consequence.promote);i.sort((d,y)=>d.position-y.position);const o=new Set,a=new Map,c=new Set;for(const d of i){const y=$(t.internalDocumentIDStore,d.doc_id);if(y!==void 0){if(a.has(y)){const S=a.get(y);d.position<S&&a.set(y,d.position);continue}c.has(d.position)||(o.add(y),a.set(y,d.position),c.add(d.position))}}if(a.size===0)return n;const u=n.filter(([d])=>!o.has(d)),l=1e6,f=[];for(const[d,y]of a.entries())n.find(([v])=>v===d)?f.push([d,l-y]):t.documentsStore.get(t.data.docs,d)&&f.push([d,0]);f.sort((d,y)=>{const S=a.get(d[0])??1/0,v=a.get(y[0])??1/0;return S-v});const h=[],g=new Map;for(const d of f){const y=a.get(d[0]);g.set(y,d)}let m=0,p=0;for(;p<u.length+f.length;)if(g.has(p))h.push(g.get(p)),p++;else if(m<u.length)h.push(u[m]),m++,p++;else break;for(const[d,y]of g.entries())d>=h.length&&h.push(y);return h}function Yi(t,e,n){const{term:s,properties:r}=e,i=t.data.index;let o=t.caches.propertiesToSearch;if(!o){const f=t.index.getSearchablePropertiesWithTypes(i);o=t.index.getSearchableProperties(i),o=o.filter(h=>f[h].startsWith("string")),t.caches.propertiesToSearch=o}if(r&&r!=="*"){for(const f of r)if(!o.includes(f))throw I("UNKNOWN_INDEX",f,o.join(", "));o=o.filter(f=>r.includes(f))}const a=Object.keys(e.where??{}).length>0;let c;a&&(c=t.index.searchByWhereClause(i,t.tokenizer,e.where,n));let u;const l=e.threshold!==void 0&&e.threshold!==null?e.threshold:1;if(s||r){const f=Mu(t);if(u=t.index.search(i,s||"",t.tokenizer,n,o,e.exact||!1,e.tolerance||0,e.boost||{},Xu(e.relevance),f,c,l),e.exact&&s){const h=s.trim().split(/\s+/);u=u.filter(([g])=>{const m=t.documentsStore.get(t.data.docs,g);if(!m)return!1;for(const p of o){const d=Yu(m,p);if(typeof d=="string"&&h.every(S=>new RegExp(`\\b${Hu(S)}\\b`).test(d)))return!0}return!1})}}else if(a){const f=Kc(i,e.where);f?u=f:u=(c?Array.from(c):[]).map(g=>[+g,0])}else u=Object.keys(t.documentsStore.getAll(t.data.docs)).map(h=>[+h,0]);return u}function Hu(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Yu(t,e){const n=e.split(".");let s=t;for(const r of n)if(s&&typeof s=="object"&&r in s)s=s[r];else return;return s}function qu(t,e,n){const s=Vt();function r(){const a=Object.keys(t.data.index.vectorIndexes),c=e.facets&&Object.keys(e.facets).length>0,{limit:u=10,offset:l=0,distinctOn:f,includeVectors:h=!1}=e,g=e.preflight===!0;let m=Yi(t,e,n);if(e.sortBy)if(typeof e.sortBy=="function"){const y=m.map(([b])=>b),v=t.documentsStore.getMultiple(t.data.docs,y).map((b,x)=>[m[x][0],m[x][1],b]);v.sort(e.sortBy),m=v.map(([b,x])=>[b,x])}else m=t.sorter.sortBy(t.data.sorting,m,e.sortBy).map(([y,S])=>[$(t.internalDocumentIDStore,y),S]);else m=m.sort(Di);m=qn(t,t.data.pinning,m,e.term);let p;g||(p=f?il(t,m,l,u,f):Xi(t,m,l,u));const d={elapsed:{formatted:"",raw:0},hits:[],count:m.length};if(typeof p<"u"&&(d.hits=p.filter(Boolean),h||Oi(d,a)),c){const y=Hn(t,m,e.facets);d.facets=y}return e.groupBy&&(d.groups=Yn(t,m,e.groupBy)),d.elapsed=t.formatElapsedTime(Vt()-s),d}async function i(){t.beforeSearch&&await $n(t.beforeSearch,t,e,n);const a=r();return t.afterSearch&&await zn(t.afterSearch,t,e,n,a),a}return t.beforeSearch?.length||t.afterSearch?.length?i():r()}const $e={k:1.2,b:.75,d:.5};function Xu(t){const e=t??{};return e.k=e.k??$e.k,e.b=e.b??$e.b,e.d=e.d??$e.d,e}function qi(t,e,n){const s=e.vector;if(s&&(!("value"in s)||!("property"in s)))throw I("INVALID_VECTOR_INPUT",Object.keys(s).join(", "));const r=t.data.index.vectorIndexes[s.property];if(!r)throw I("UNKNOWN_VECTOR_PROPERTY",s.property);const i=r.node.size;if(s?.value.length!==i)throw s?.property===void 0||s?.value.length===void 0?I("INVALID_INPUT_VECTOR","undefined",i,"undefined"):I("INVALID_INPUT_VECTOR",s.property,i,s.value.length);const o=t.data.index;let a;return Object.keys(e.where??{}).length>0&&(a=t.index.searchByWhereClause(o,t.tokenizer,e.where,n)),r.node.find(s.value,e.similarity??Cc,a)}function Ju(t,e,n="english"){const s=Vt();function r(){let a=qi(t,e,n).sort(Di);a=qn(t,t.data.pinning,a,void 0);let c=[];e.facets&&Object.keys(e.facets).length>0&&(c=Hn(t,a,e.facets));const l=e.vector.property,f=e.includeVectors??!1,h=e.limit??10,g=e.offset??0,m=Array.from({length:h});for(let S=0;S<h;S++){const v=a[S+g];if(!v)break;const b=t.data.docs.docs[v[0]];if(b){f||(b[l]=null);const x={id:_e(t.internalDocumentIDStore,v[0]),score:v[1],document:b};m[S]=x}}let p=[];e.groupBy&&(p=Yn(t,a,e.groupBy));const y=Vt()-s;return{count:a.length,hits:m.filter(Boolean),elapsed:{raw:Number(y),formatted:Fn(y)},...c?{facets:c}:{},...p?{groups:p}:{}}}async function i(){t.beforeSearch&&await $n(t.beforeSearch,t,e,n);const a=r();return t.afterSearch&&await zn(t.afterSearch,t,e,n,a),a}return t.beforeSearch?.length||t.afterSearch?.length?i():r()}function Zu(t,e,n){const s=tl(Yi(t,e,n)),r=qi(t,e,n),i=e.hybridWeights;return nl(s,r,e.term??"",i)}function Qu(t,e,n){const s=Vt();function r(){let a=Zu(t,e,n);a=qn(t,t.data.pinning,a,e.term);let c;e.facets&&Object.keys(e.facets).length>0&&(c=Hn(t,a,e.facets));let l;e.groupBy&&(l=Yn(t,a,e.groupBy));const f=e.offset??0,h=e.limit??10,g=Xi(t,a,f,h).filter(Boolean),m=Vt(),p={count:a.length,elapsed:{raw:Number(m-s),formatted:Fn(m-s)},hits:g,...c?{facets:c}:{},...l?{groups:l}:{}};if(!(e.includeVectors??!1)){const y=Object.keys(t.data.index.vectorIndexes);Oi(p,y)}return p}async function i(){t.beforeSearch&&await $n(t.beforeSearch,t,e,n);const a=r();return t.afterSearch&&await zn(t.afterSearch,t,e,n,a),a}return t.beforeSearch?.length||t.afterSearch?.length?i():r()}function fn(t){return t[1]}function tl(t){const e=Math.max.apply(Math,t.map(fn));return t.map(([n,s])=>[n,s/e])}function Zs(t,e){return t/e}function el(t,e){return(n,s)=>n*t+s*e}function nl(t,e,n,s){const r=Math.max.apply(Math,t.map(fn)),i=Math.max.apply(Math,e.map(fn)),o=s&&s.text&&s.vector,{text:a,vector:c}=o?s:sl(),u=new Map,l=t.length,f=el(a,c);for(let g=0;g<l;g++){const[m,p]=t[g],d=Zs(p,r),y=f(d,0);u.set(m,y)}const h=e.length;for(let g=0;g<h;g++){const[m,p]=e[g],d=Zs(p,i),y=u.get(m)??0;u.set(m,y+f(0,d))}return[...u].sort((g,m)=>m[1]-g[1])}function sl(t){return{text:.5,vector:.5}}function rl(t,e,n){const s=e.mode??Ys;if(s===Ys)return qu(t,e,n);if(s===zu)return Ju(t,e);if(s===Uu)return Qu(t,e);throw I("INVALID_SEARCH_MODE",s)}function il(t,e,n,s,r){const i=t.data.docs,o=new Map,a=[],c=new Set,u=e.length;let l=0;for(let f=0;f<u;f++){const h=e[f];if(typeof h>"u")continue;const[g,m]=h;if(c.has(g))continue;const p=t.documentsStore.get(i,g),d=jn(p,r);if(!(typeof d>"u"||o.has(d))&&(o.set(d,!0),l++,!(l<=n)&&(a.push({id:_e(t.internalDocumentIDStore,g),score:m,document:p}),c.add(g),l>=n+s)))break}return a}function Xi(t,e,n,s){const r=t.data.docs,i=Array.from({length:s}),o=new Set;for(let a=n;a<s+n;a++){const c=e[a];if(typeof c>"u")break;const[u,l]=c;if(!o.has(u)){const f=t.documentsStore.get(r,u);i[a]={id:_e(t.internalDocumentIDStore,u),score:l,document:f},o.add(u)}}return i}function ol(t,e){t.internalDocumentIDStore.load(t,e.internalDocumentIDStore),t.data.index=t.index.load(t.internalDocumentIDStore,e.index),t.data.docs=t.documentsStore.load(t.internalDocumentIDStore,e.docs),t.data.sorting=t.sorter.load(t.internalDocumentIDStore,e.sorting),t.data.pinning=t.pinning.load(t.internalDocumentIDStore,e.pinning),t.tokenizer.language=e.language}function al(t){return{internalDocumentIDStore:t.internalDocumentIDStore.save(t.internalDocumentIDStore),index:t.index.save(t.data.index),docs:t.documentsStore.save(t.data.docs),sorting:t.sorter.save(t.data.sorting),pinning:t.pinning.save(t.data.pinning),language:t.tokenizer.language}}let cl={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},ul={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},Pe="[aeiouy]",st="[^aeiou][^aeiouy]*",qt=Pe+"[aeiou]*",We="^("+st+")?"+qt+st,ll="^("+st+")?"+qt+st+"("+qt+")?$",he="^("+st+")?"+qt+st+qt+st,Qs="^("+st+")?"+Pe;function fl(t){let e,n,s,r,i,o;if(t.length<3)return t;let a=t.substring(0,1);if(a=="y"&&(t=a.toUpperCase()+t.substring(1)),r=/^(.+?)([^s])s$/,(s=/^(.+?)(ss|i)es$/).test(t)?t=t.replace(s,"$1$2"):r.test(t)&&(t=t.replace(r,"$1$2")),r=/^(.+?)(ed|ing)$/,(s=/^(.+?)eed$/).test(t)){let c=s.exec(t);(s=new RegExp(We)).test(c[1])&&(s=/.$/,t=t.replace(s,""))}else r.test(t)&&(e=r.exec(t)[1],(r=new RegExp(Qs)).test(e)&&(t=e,r=/(at|bl|iz)$/,i=RegExp("([^aeiouylsz])\\1$"),o=RegExp("^"+st+Pe+"[^aeiouwxy]$"),r.test(t)?t+="e":i.test(t)?(s=/.$/,t=t.replace(s,"")):o.test(t)&&(t+="e")));if((s=/^(.+?)y$/).test(t)&&(e=s.exec(t)?.[1],s=new RegExp(Qs),e&&s.test(e)&&(t=e+"i")),(s=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/).test(t)){let c=s.exec(t);e=c?.[1],n=c?.[2],s=new RegExp(We),e&&s.test(e)&&(t=e+cl[n])}if((s=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/).test(t)){let c=s.exec(t);e=c?.[1],n=c?.[2],s=new RegExp(We),e&&s.test(e)&&(t=e+ul[n])}if(r=/^(.+?)(s|t)(ion)$/,(s=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/).test(t))e=s.exec(t)?.[1],s=new RegExp(he),e&&s.test(e)&&(t=e);else if(r.test(t)){let c=r.exec(t);e=c?.[1]??""+c?.[2]??"",(r=new RegExp(he)).test(e)&&(t=e)}return(s=/^(.+?)e$/).test(t)&&(e=s.exec(t)?.[1],s=new RegExp(he),r=new RegExp(ll),i=RegExp("^"+st+Pe+"[^aeiouwxy]$"),e&&(s.test(e)||r.test(e)&&!i.test(e))&&(t=e)),s=/ll$/,r=new RegExp(he),s.test(t)&&r.test(t)&&(s=/.$/,t=t.replace(s,"")),a=="y"&&(t=a.toLowerCase()+t.substring(1)),t}const hl=["i","me","my","myself","we","us","our","ours","ourselves","you","your","yours","yourself","yourselves","he","him","his","himself","she","her","hers","herself","it","its","itself","they","them","their","theirs","themselves","what","which","who","whom","this","that","these","those","am","is","are","was","were","be","been","being","have","has","had","having","do","does","did","doing","will","would","shall","should","can","could","may","might","must","ought","i'm","you're","he's","she's","it's","we're","they're","i've","you've","we've","they've","i'd","you'd","he'd","she'd","we'd","they'd","i'll","you'll","he'll","she'll","we'll","they'll","isn't","aren't","wasn't","weren't","hasn't","haven't","hadn't","doesn't","don't","didn't","won't","wouldn't","shan't","shouldn't","can't","cannot","couldn't","mustn't","let's","that's","who's","what's","here's","there's","when's","where's","why's","how's","an","the","and","but","if","or","because","as","until","while","of","at","by","for","with","about","against","between","into","through","during","before","after","above","below","to","from","up","down","in","out","on","off","over","under","again","further","then","once","here","there","when","where","why","how","all","any","both","each","few","more","most","other","some","such","no","nor","not","only","own","same","so","than","too","very"];function Ji(t,e,n){for(let s of Object.entries(e)){let r=s[0],i=s[1],o=`${n}${n?".":""}${r}`;if(typeof i=="object"&&!Array.isArray(i)){Ji(t,i,o);continue}if(At(i))t.searchableProperties.push(o),t.searchablePropertiesWithTypes[o]=i,t.vectorIndexes[o]={type:"Vector",node:new re(Un(i)),isArray:!1};else{let a=/\[/.test(i);switch(i){case"boolean":case"boolean[]":t.indexes[o]={type:"Bool",node:new se,isArray:a};break;case"number":case"number[]":t.indexes[o]={type:"AVL",node:new ee(0,[]),isArray:a};break;case"string":case"string[]":t.indexes[o]={type:"Radix",node:new ne,isArray:a};break;case"enum":case"enum[]":t.indexes[o]={type:"Flat",node:new Wn,isArray:a};break;case"geopoint":t.indexes[o]={type:"BKD",node:new H,isArray:a};break;default:throw new Error("INVALID_SCHEMA_TYPE: "+o)}t.searchableProperties.push(o),t.searchablePropertiesWithTypes[o]=i}}}var dl=1048575;function pl(t,e){let n=Qi(t),s=Zi(t)|1<<e;return n+1<<20|s}function tr(t,e,n,s,r,i,o){let a=t.split(/\.|\?|!/),c=0,u=0;for(let l of a){let f=o.tokenize(l,i,s);for(let h of f){u++,n[h]||(n[h]=0);let g=Math.min(c,20);n.tokenQuantums[r][h]=pl(n.tokenQuantums[r][h],g),e.insert(h,r)}f.length>1&&c++}n.tokensLength.set(r,u)}function ml(t){let e=t.tokens,n=t.radixNode,s=t.exact,r=t.tolerance,i=t.stats,o=t.boostPerProp,a=t.resultMap,c=t.whereFiltersIDs,u=i.tokensLength,l=i.tokenQuantums,f={term:"",exact:s,tolerance:r},h={},g=e.length;for(let d=0;d<g;d++){let y=e[d];f.term=y;let S=n.find(f);h={...h,...S}}let m=Object.keys(h),p=m.length;for(let d=0;d<p;d++){let y=m[d],S=h[y],v=S.length,b=e.includes(y);for(let x=0;x<v;x++){let A=S[x];if(c&&!c.has(A))continue;let w=u.get(A),T=l[A][y],D=Qi(T),O=Zi(T),L=(D*D/w+(b?1:0))*o;if(!a.has(A)){a.set(A,[L,O]);continue}let G=a.get(A),lt=G[0]+gl(G[1]&O)*2+L;G[0]=lt,G[1]=G[1]|O}}}function Zi(t){return t&dl}function Qi(t){return t>>20}function gl(t){let e=0;do t&1&&++e;while(t>>=1);return e}function er(t,e,n,s,r,i,o){let a=o.tokensLength,c=o.tokenQuantums,u=r.tokenize(t,i,n);for(let l of u)e.removeDocumentByWord(l,s,!0);a.delete(s),delete c[s]}var yl=new et("","",!1),vl={tokenQuantums:{},tokensLength:new Map};function Sl(t,e,n,s,r,i,o,a,c,u,l){let f=new Map,h={tokens:n.tokenize(e,s),radixNode:yl,exact:i,tolerance:o,stats:vl,boostPerProp:0,resultMap:f,whereFiltersIDs:l},g=r.length;for(let y=0;y<g;y++){let S=r[y],v=t.stats[S],b=a[S]??1;h.radixNode=t.indexes[S].node,h.stats=v,h.boostPerProp=b,ml(h)}let m=Array.from(f),p=m.length,d=[];for(let y=0;y<p;y++){let S=m[y],v=S[0],b=S[1][0];d.push([v,b])}return d}function bl(){return{name:"qps",getComponents(t){return wl(t)}}}function wl(t){return{index:{create:function(){let e={indexes:{},vectorIndexes:{},searchableProperties:[],searchablePropertiesWithTypes:{},stats:{}};return Ji(e,t,""),e},insert:function(e,n,s,r,i,o,a,c,u,l){if(!(a==="string"||a==="string[]"))return Bi(e,n,s,r,i,o,a,c,u,l);n.stats[s]||(n.stats[s]={tokenQuantums:{},tokensLength:new Map});let f=n.stats[s],h=n.indexes[s].node;if(f.tokenQuantums[i]={},Array.isArray(o))for(let g of o)tr(g,h,f,s,i,c,u);else tr(o,h,f,s,i,c,u)},remove:function(e,n,s,r,i,o,a,c,u,l){if(!(a==="string"||a==="string[]"))return Fi(e,n,s,r,i,o,a,c,u,l);let f=n.stats[s],h=n.indexes[s].node;if(Array.isArray(o))for(let g of o)er(g,h,s,i,u,c,f);else er(o,h,s,i,u,c,f)},insertDocumentScoreParameters:()=>{throw new Error},insertTokenScoreParameters:()=>{throw new Error},removeDocumentScoreParameters:()=>{throw new Error},removeTokenScoreParameters:()=>{throw new Error},calculateResultScores:()=>{throw new Error},search:Sl,searchByWhereClause:function(e,n,s,r){let i=Object.entries(s).filter(([c])=>e.indexes[c].type==="Radix");if(i.length===0)return kt(e,n,s,r);let o;for(let[c,u]of i){let l=[];if(Array.isArray(u))for(let g of u){let m=n.tokenize(g,r)?.[0];l.push(m)}else l=n.tokenize(u,r);let f=e.indexes[c].node,h=new Set;for(let g of l){let m=f.find({term:g,exact:!0})[g];if(m)for(let p of m)h.add(p)}o?o=we(o,h):o=h}if(Object.entries(s).filter(([c])=>e.indexes[c].type!=="Radix").length===0)return o;let a=kt(e,n,s,r);return we(o,a)},getSearchableProperties:function(e){return e.searchableProperties},getSearchablePropertiesWithTypes:function(e){return e.searchablePropertiesWithTypes},load:function(e,n){let s=Ui(e,n[0]),r=n[1],i={...s.indexes,...Object.fromEntries(r.radixTrees.map(([o,a,c,u])=>[o,{node:et.fromJSON(u),isArray:a,type:c}]))};return{...s,indexes:i,stats:Object.fromEntries(r.stats.map(([o,{tokenQuantums:a,tokensLength:c}])=>[o,{tokenQuantums:a,tokensLength:new Map(c)}]))}},save:function(e){let n=e,s=Object.entries(n.indexes).filter(([,{type:o}])=>o!=="Radix"),r=zi({...n,indexes:Object.fromEntries(s)}),i={radixTrees:Object.entries(n.indexes).filter(([,{type:o}])=>o==="Radix").map(([o,{node:a,isArray:c,type:u}])=>[o,c,u,a.toJSON()]),stats:Object.entries(e.stats).map(([o,{tokenQuantums:a,tokensLength:c}])=>[o,{tokenQuantums:a,tokensLength:Array.from(c.entries())}])};return[r,i]}}}}const Tl={title:"string",body:"string",url:"string"};function xl(t,...e){const n=t.docs?.docs;return n&&Object.keys(n).forEach(s=>{for(const r of e)delete n[s][r]}),t}class Ae{db;constructor(){this.db=Ru({schema:Tl,sort:{unsortableProperties:["body"]},plugins:[bl()],components:{tokenizer:{stemming:!0,stemmer:fl,stopWords:hl}}})}static create(){return new Ae}static load(e){const n=new Ae;return ol(n.db,e),n}save(){const e=al(this.db);return xl(e,"body")}insert(e){Gn(this.db,e)}insertMultiple(e){Bu(this.db,e)}async search(e){return(await rl(this.db,{term:e,boost:{title:2},tolerance:1})).hits.map(s=>s.document)}}let Ke;async function Pl(){return Ke===void 0&&(Ke=(async()=>{const e=await(await fetch("/search-index.json")).json();return Ae.load(e)})()),await Ke}async function Al(t){const e=await Pl();return Nn.optionify(t).filter(Boolean).map(async n=>await e.search(n)).unwrapOrElse(async()=>[])}const to=["shift","alt","meta","mod","ctrl","control"],El={esc:"escape",return:"enter",left:"arrowleft",right:"arrowright",up:"arrowup",down:"arrowdown",ShiftLeft:"shift",ShiftRight:"shift",AltLeft:"alt",AltRight:"alt",MetaLeft:"meta",MetaRight:"meta",OSLeft:"meta",OSRight:"meta",ControlLeft:"ctrl",ControlRight:"ctrl"};function pt(t){return(El[t.trim()]||t.trim()).toLowerCase().replace(/key|digit|numpad/,"")}function eo(t){return to.includes(t)}function Ge(t,e=","){return t.toLowerCase().split(e)}function He(t,e="+",n=">",s=!1,r){let i=[],o=!1;t=t.trim(),t.includes(n)?(o=!0,i=t.toLocaleLowerCase().split(n).map(u=>pt(u))):i=t.toLocaleLowerCase().split(e).map(u=>pt(u));const a={alt:i.includes("alt"),ctrl:i.includes("ctrl")||i.includes("control"),shift:i.includes("shift"),meta:i.includes("meta"),mod:i.includes("mod"),useKey:s},c=i.filter(u=>!to.includes(u));return{...a,keys:c,description:r,isSequence:o,hotkey:t}}typeof document<"u"&&(document.addEventListener("keydown",t=>{t.code!==void 0&&no([pt(t.code)])}),document.addEventListener("keyup",t=>{t.code!==void 0&&so([pt(t.code)])})),typeof window<"u"&&(window.addEventListener("blur",()=>{at.clear()}),window.addEventListener("contextmenu",()=>{setTimeout(()=>{at.clear()},0)}));const at=new Set;function Xn(t){return Array.isArray(t)}function Dl(t,e=","){return(Xn(t)?t:t.split(e)).every(n=>at.has(n.trim().toLowerCase()))}function no(t){const e=Array.isArray(t)?t:[t];at.has("meta")&&at.forEach(n=>!eo(n)&&at.delete(n.toLowerCase())),e.forEach(n=>at.add(n.toLowerCase()))}function so(t){const e=Array.isArray(t)?t:[t];t==="meta"?at.clear():e.forEach(n=>at.delete(n.toLowerCase()))}function Il(t,e,n){(typeof n=="function"&&n(t,e)||n===!0)&&t.preventDefault()}function Rl(t,e,n){return typeof n=="function"?n(t,e):n===!0||n===void 0}const Ol=["input","textarea","select","searchbox","slider","spinbutton","menuitem","menuitemcheckbox","menuitemradio","option","radio","textbox"];function Ml(t){return ro(t,Ol)}function ro(t,e=!1){const{target:n,composed:s}=t;let r,i;return Cl(n)&&s?(r=t.composedPath()[0]&&t.composedPath()[0].tagName,i=t.composedPath()[0]&&t.composedPath()[0].role):(r=n&&n.tagName,i=n&&n.role),Xn(e)?!!(r&&e&&e.some(o=>o.toLowerCase()===r.toLowerCase()||o===i)):!!(r&&e&&e)}function Cl(t){return!!t.tagName&&!t.tagName.startsWith("-")&&t.tagName.includes("-")}function kl(t,e){return t.length===0&&e?(console.warn('A hotkey has the "scopes" option set, however no active scopes were found. If you want to use the global scopes feature, you need to wrap your app in a <HotkeysProvider>'),!0):e?t.some(n=>e.includes(n))||t.includes("*"):!0}const _l=(t,e,n=!1)=>{const{alt:s,meta:r,mod:i,shift:o,ctrl:a,keys:c,useKey:u}=e,{code:l,key:f,ctrlKey:h,metaKey:g,shiftKey:m,altKey:p}=t,d=pt(l);if(u&&c?.length===1&&c.includes(f))return!0;if(!c?.includes(d)&&!["ctrl","control","unknown","meta","alt","shift","os"].includes(d))return!1;if(!n){if(s!==p&&d!=="alt"||o!==m&&d!=="shift")return!1;if(i){if(!g&&!h)return!1}else if(r!==g&&d!=="meta"&&d!=="os"||a!==h&&d!=="ctrl"&&d!=="control")return!1}return c&&c.length===1&&c.includes(d)?!0:c?Dl(c):!c},Vl=P.createContext(void 0),Ll=()=>P.useContext(Vl);function io(t,e){return t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(t).length===Object.keys(e).length&&Object.keys(t).reduce((n,s)=>n&&io(t[s],e[s]),!0):t===e}const Nl=P.createContext({hotkeys:[],activeScopes:[],toggleScope:()=>{},enableScope:()=>{},disableScope:()=>{}}),Bl=()=>P.useContext(Nl);function Fl(t){const e=P.useRef(void 0);return io(e.current,t)||(e.current=t),e.current}const nr=t=>{t.stopPropagation(),t.preventDefault(),t.stopImmediatePropagation()},jl=typeof window<"u"?P.useLayoutEffect:P.useEffect;function hn(t,e,n,s){const r=P.useRef(null),i=P.useRef(!1),o=Array.isArray(n)?Array.isArray(s)?void 0:s:n,a=Xn(t)?t.join(o?.delimiter):t,c=Array.isArray(n)?n:Array.isArray(s)?s:void 0,u=P.useCallback(e,c??[]),l=P.useRef(u);c?l.current=u:l.current=e;const f=Fl(o),{activeScopes:h}=Bl(),g=Ll();return jl(()=>{if(f?.enabled===!1||!kl(h,f?.scopes))return;let m=[],p;const d=(b,x=!1)=>{if(!(Ml(b)&&!ro(b,f?.enableOnFormTags))){if(r.current!==null){const A=r.current.getRootNode();if((A instanceof Document||A instanceof ShadowRoot)&&A.activeElement!==r.current&&!r.current.contains(A.activeElement)){nr(b);return}}b.target?.isContentEditable&&!f?.enableOnContentEditable||Ge(a,f?.delimiter).forEach(A=>{if(A.includes(f?.splitKey??"+")&&A.includes(f?.sequenceSplitKey??">")){console.warn(`Hotkey ${A} contains both ${f?.splitKey??"+"} and ${f?.sequenceSplitKey??">"} which is not supported.`);return}const w=He(A,f?.splitKey,f?.sequenceSplitKey,f?.useKey,f?.description);if(w.isSequence){p=setTimeout(()=>{m=[]},f?.sequenceTimeoutMs??1e3);const T=w.useKey?b.key:pt(b.code);if(eo(T.toLowerCase()))return;m.push(T);const D=w.keys?.[m.length-1];if(T!==D){m=[],p&&clearTimeout(p);return}m.length===w.keys?.length&&(l.current(b,w),p&&clearTimeout(p),m=[])}else if(_l(b,w,f?.ignoreModifiers)||w.keys?.includes("*")){if(f?.ignoreEventWhen?.(b)||x&&i.current)return;if(Il(b,w,f?.preventDefault),!Rl(b,w,f?.enabled)){nr(b);return}l.current(b,w),x||(i.current=!0)}})}},y=b=>{b.code!==void 0&&(no(pt(b.code)),(f?.keydown===void 0&&f?.keyup!==!0||f?.keydown)&&d(b))},S=b=>{b.code!==void 0&&(so(pt(b.code)),i.current=!1,f?.keyup&&d(b,!0))},v=r.current||o?.document||document;return v.addEventListener("keyup",S,o?.eventListenerOptions),v.addEventListener("keydown",y,o?.eventListenerOptions),g&&Ge(a,f?.delimiter).forEach(b=>g.addHotkey(He(b,f?.splitKey,f?.sequenceSplitKey,f?.useKey,f?.description))),()=>{v.removeEventListener("keyup",S,o?.eventListenerOptions),v.removeEventListener("keydown",y,o?.eventListenerOptions),g&&Ge(a,f?.delimiter).forEach(b=>g.removeHotkey(He(b,f?.splitKey,f?.sequenceSplitKey,f?.useKey,f?.description))),m=[],p&&clearTimeout(p)}},[a,f,h]),r}function Ul(t){return e=>{for(const n of t)dn(n,e)}}function zl(t){return e=>{const n=[];for(const s of t){const r=dn(s,e),i=typeof r=="function";n.push(i?r:()=>dn(s,null))}return()=>{for(const s of n)s()}}}function dn(t,e){if(typeof t=="function")return t(e);t&&(t.current=e)}var $l=parseInt(P.version.split(".")[0],10)>=19?zl:Ul;function jt(t,e){var n=e===void 0?{type:t}:{type:t,payload:e};return n}function Wl(t){Ka(t)}var xt=(t=>(t.SET_QUERY="SET_QUERY",t.SET_RESULTS="SET_RESULTS",t.NEXT_SELECTION="NEXT_SELECTION",t.PREVIOUS_SELECTION="PREVIOUS_SELECTION",t.RESET="RESET",t))(xt||{});const Dt={setQuery:t=>jt("SET_QUERY",t),setResults:t=>jt("SET_RESULTS",t),nextSelection:()=>jt("NEXT_SELECTION"),previousSelection:()=>jt("PREVIOUS_SELECTION"),reset:()=>jt("RESET")};function Kl(t,e){Nn.optionify(e[t.current]).map(n=>Wl(n.url))}class Gl{constructor(e,n){this.dispatch=e,this.api=n}query=async e=>{this.dispatch(Dt.setQuery(e)),(await Nn.resultify(this.api(e))).ok().map(n=>this.dispatch(Dt.setResults(n)))}}function Jn(t,e){return(n=e,s=void 0)=>{const r=s===void 0?void 0:t[s.type];return s!==void 0&&r!==null&&r!==void 0?r(n,s):n}}function Hl(t){return(e,n)=>{const s=e??{},r={};let i=!1;for(const o in t)if(Object.hasOwn(t,o)){const a=s[o],c=t[o](a,n);r[o]=c,i=i||a!==c}return i?r:s}}const Yl=Jn({[xt.SET_QUERY]:(t,e)=>e.payload},""),ql=Jn({[xt.SET_RESULTS]:(t,e)=>e.payload},[]),Xl=Jn({[xt.NEXT_SELECTION]:t=>({...t,current:Math.min(t.current+1,t.max)}),[xt.PREVIOUS_SELECTION]:t=>({...t,current:Math.max(t.current-1,0)}),[xt.SET_RESULTS]:(t,e)=>{const n=e?Math.max(e.payload.length-1,0):0;return{...t,current:Math.min(t.current,n),max:n}}},{current:0,max:0}),Jl=Hl({query:Yl,results:ql,selection:Xl});function Zl(t,e){return e&&e.type===xt.RESET?void 0:t}function sr(t,e){const n=Zl(t,e);return Jl(n,e)}const Ql=({value:t,onChange:e})=>{const n=P.useRef(null);return hn("mod+k",()=>n.current?.focus()),k.jsxs("label",{className:`
      input
      items-center
      flex
      w-full
      bg-transparent
      border
      border-accent
      rounded-sm
      text-white
      m-0
      outline-none
      py-1
      px-3
      transition-colors
      duration-500
      focus-within:bg-background
      focus-within:border-transparent
      focus-within:text-primary
      hover:bg-background
      hover:border-transparent
      hover:text-primary
    `,children:[k.jsx("input",{ref:n,className:"grow appearance-none outline-none",type:"search",name:"query",placeholder:"Search",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,value:t,onChange:s=>e(s.target.value),onFocus:()=>setTimeout(()=>n.current?.select())}),k.jsx("kbd",{className:"kbd font-mono opacity-50",children:"⌘K"})]})},Zn=P.createContext({});function Qn(t){const e=P.useRef(null);return e.current===null&&(e.current=t()),e.current}const oo=typeof window<"u",ao=oo?P.useLayoutEffect:P.useEffect,Ve=P.createContext(null);function ts(t,e){t.indexOf(e)===-1&&t.push(e)}function es(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const it=(t,e,n)=>n>e?e:n<t?t:n;let ns=()=>{};const ut={},co=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function uo(t){return typeof t=="object"&&t!==null}const lo=t=>/^0[^.\s]+$/u.test(t);function ss(t){let e;return()=>(e===void 0&&(e=t()),e)}const Z=t=>t,tf=(t,e)=>n=>e(t(n)),ie=(...t)=>t.reduce(tf),Xt=(t,e,n)=>{const s=e-t;return s===0?1:(n-t)/s};class rs{constructor(){this.subscriptions=[]}add(e){return ts(this.subscriptions,e),()=>es(this.subscriptions,e)}notify(e,n,s){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,s);else for(let i=0;i<r;i++){const o=this.subscriptions[i];o&&o(e,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ct=t=>t*1e3,J=t=>t/1e3;function fo(t,e){return e?t*(1e3/e):0}const ho=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,ef=1e-7,nf=12;function sf(t,e,n,s,r){let i,o,a=0;do o=e+(n-e)/2,i=ho(o,s,r)-t,i>0?n=o:e=o;while(Math.abs(i)>ef&&++a<nf);return o}function oe(t,e,n,s){if(t===e&&n===s)return Z;const r=i=>sf(i,0,1,t,n);return i=>i===0||i===1?i:ho(r(i),e,s)}const po=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,mo=t=>e=>1-t(1-e),go=oe(.33,1.53,.69,.99),is=mo(go),yo=po(is),vo=t=>(t*=2)<1?.5*is(t):.5*(2-Math.pow(2,-10*(t-1))),os=t=>1-Math.sin(Math.acos(t)),So=mo(os),bo=po(os),rf=oe(.42,0,1,1),of=oe(0,0,.58,1),wo=oe(.42,0,.58,1),af=t=>Array.isArray(t)&&typeof t[0]!="number",To=t=>Array.isArray(t)&&typeof t[0]=="number",cf={linear:Z,easeIn:rf,easeInOut:wo,easeOut:of,circIn:os,circInOut:bo,circOut:So,backIn:is,backInOut:yo,backOut:go,anticipate:vo},uf=t=>typeof t=="string",pn=t=>{if(To(t)){ns(t.length===4);const[e,n,s,r]=t;return oe(e,n,s,r)}else if(uf(t))return cf[t];return t},de=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function lf(t,e){let n=new Set,s=new Set,r=!1,i=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function c(l){o.has(l)&&(u.schedule(l),t()),l(a)}const u={schedule:(l,f=!1,h=!1)=>{const m=h&&r?n:s;return f&&o.add(l),m.has(l)||m.add(l),l},cancel:l=>{s.delete(l),o.delete(l)},process:l=>{if(a=l,r){i=!0;return}r=!0,[n,s]=[s,n],n.forEach(c),n.clear(),r=!1,i&&(i=!1,u.process(l))}};return u}const ff=40;function xo(t,e){let n=!1,s=!0;const r={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,o=de.reduce((v,b)=>(v[b]=lf(i),v),{}),{setup:a,read:c,resolveKeyframes:u,preUpdate:l,update:f,preRender:h,render:g,postRender:m}=o,p=()=>{const v=ut.useManualTiming?r.timestamp:performance.now();n=!1,ut.useManualTiming||(r.delta=s?1e3/60:Math.max(Math.min(v-r.timestamp,ff),1)),r.timestamp=v,r.isProcessing=!0,a.process(r),c.process(r),u.process(r),l.process(r),f.process(r),h.process(r),g.process(r),m.process(r),r.isProcessing=!1,n&&e&&(s=!1,t(p))},d=()=>{n=!0,s=!0,r.isProcessing||t(p)};return{schedule:de.reduce((v,b)=>{const x=o[b];return v[b]=(A,w=!1,T=!1)=>(n||d(),x.schedule(A,w,T)),v},{}),cancel:v=>{for(let b=0;b<de.length;b++)o[de[b]].cancel(v)},state:r,steps:o}}const{schedule:C,cancel:mt,state:j,steps:Ye}=xo(typeof requestAnimationFrame<"u"?requestAnimationFrame:Z,!0);let ye;function hf(){ye=void 0}const W={now:()=>(ye===void 0&&W.set(j.isProcessing||ut.useManualTiming?j.timestamp:performance.now()),ye),set:t=>{ye=t,queueMicrotask(hf)}},Po=t=>e=>typeof e=="string"&&e.startsWith(t),Ao=Po("--"),df=Po("var(--"),as=t=>df(t)?pf.test(t.split("/*")[0].trim()):!1,pf=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function rr(t){return typeof t!="string"?!1:t.split("/*")[0].includes("var(--")}const Nt={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Jt={...Nt,transform:t=>it(0,1,t)},pe={...Nt,default:1},Wt=t=>Math.round(t*1e5)/1e5,cs=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function mf(t){return t==null}const gf=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,us=(t,e)=>n=>!!(typeof n=="string"&&gf.test(n)&&n.startsWith(t)||e&&!mf(n)&&Object.prototype.hasOwnProperty.call(n,e)),Eo=(t,e,n)=>s=>{if(typeof s!="string")return s;const[r,i,o,a]=s.match(cs);return{[t]:parseFloat(r),[e]:parseFloat(i),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},yf=t=>it(0,255,t),qe={...Nt,transform:t=>Math.round(yf(t))},wt={test:us("rgb","red"),parse:Eo("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:s=1})=>"rgba("+qe.transform(t)+", "+qe.transform(e)+", "+qe.transform(n)+", "+Wt(Jt.transform(s))+")"};function vf(t){let e="",n="",s="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),s=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),s=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,s+=s,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:r?parseInt(r,16)/255:1}}const mn={test:us("#"),parse:vf,transform:wt.transform},ae=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),ht=ae("deg"),rt=ae("%"),E=ae("px"),Sf=ae("vh"),bf=ae("vw"),ir={...rt,parse:t=>rt.parse(t)/100,transform:t=>rt.transform(t*100)},It={test:us("hsl","hue"),parse:Eo("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:s=1})=>"hsla("+Math.round(t)+", "+rt.transform(Wt(e))+", "+rt.transform(Wt(n))+", "+Wt(Jt.transform(s))+")"},N={test:t=>wt.test(t)||mn.test(t)||It.test(t),parse:t=>wt.test(t)?wt.parse(t):It.test(t)?It.parse(t):mn.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?wt.transform(t):It.transform(t),getAnimatableNone:t=>{const e=N.parse(t);return e.alpha=0,N.transform(e)}},wf=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Tf(t){return isNaN(t)&&typeof t=="string"&&(t.match(cs)?.length||0)+(t.match(wf)?.length||0)>0}const Do="number",Io="color",xf="var",Pf="var(",or="${}",Af=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Zt(t){const e=t.toString(),n=[],s={color:[],number:[],var:[]},r=[];let i=0;const a=e.replace(Af,c=>(N.test(c)?(s.color.push(i),r.push(Io),n.push(N.parse(c))):c.startsWith(Pf)?(s.var.push(i),r.push(xf),n.push(c)):(s.number.push(i),r.push(Do),n.push(parseFloat(c))),++i,or)).split(or);return{values:n,split:a,indexes:s,types:r}}function Ro(t){return Zt(t).values}function Oo(t){const{split:e,types:n}=Zt(t),s=e.length;return r=>{let i="";for(let o=0;o<s;o++)if(i+=e[o],r[o]!==void 0){const a=n[o];a===Do?i+=Wt(r[o]):a===Io?i+=N.transform(r[o]):i+=r[o]}return i}}const Ef=t=>typeof t=="number"?0:N.test(t)?N.getAnimatableNone(t):t;function Df(t){const e=Ro(t);return Oo(t)(e.map(Ef))}const gt={test:Tf,parse:Ro,createTransformer:Oo,getAnimatableNone:Df};function Xe(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function If({hue:t,saturation:e,lightness:n,alpha:s}){t/=360,e/=100,n/=100;let r=0,i=0,o=0;if(!e)r=i=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,c=2*n-a;r=Xe(c,a,t+1/3),i=Xe(c,a,t),o=Xe(c,a,t-1/3)}return{red:Math.round(r*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:s}}function Ee(t,e){return n=>n>0?e:t}const _=(t,e,n)=>t+(e-t)*n,Je=(t,e,n)=>{const s=t*t,r=n*(e*e-s)+s;return r<0?0:Math.sqrt(r)},Rf=[mn,wt,It],Of=t=>Rf.find(e=>e.test(t));function ar(t){const e=Of(t);if(!e)return!1;let n=e.parse(t);return e===It&&(n=If(n)),n}const cr=(t,e)=>{const n=ar(t),s=ar(e);if(!n||!s)return Ee(t,e);const r={...n};return i=>(r.red=Je(n.red,s.red,i),r.green=Je(n.green,s.green,i),r.blue=Je(n.blue,s.blue,i),r.alpha=_(n.alpha,s.alpha,i),wt.transform(r))},gn=new Set(["none","hidden"]);function Mf(t,e){return gn.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function Cf(t,e){return n=>_(t,e,n)}function ls(t){return typeof t=="number"?Cf:typeof t=="string"?as(t)?Ee:N.test(t)?cr:Vf:Array.isArray(t)?Mo:typeof t=="object"?N.test(t)?cr:kf:Ee}function Mo(t,e){const n=[...t],s=n.length,r=t.map((i,o)=>ls(i)(i,e[o]));return i=>{for(let o=0;o<s;o++)n[o]=r[o](i);return n}}function kf(t,e){const n={...t,...e},s={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(s[r]=ls(t[r])(t[r],e[r]));return r=>{for(const i in s)n[i]=s[i](r);return n}}function _f(t,e){const n=[],s={color:0,var:0,number:0};for(let r=0;r<e.values.length;r++){const i=e.types[r],o=t.indexes[i][s[i]],a=t.values[o]??0;n[r]=a,s[i]++}return n}const Vf=(t,e)=>{const n=gt.createTransformer(e),s=Zt(t),r=Zt(e);return s.indexes.var.length===r.indexes.var.length&&s.indexes.color.length===r.indexes.color.length&&s.indexes.number.length>=r.indexes.number.length?gn.has(t)&&!r.values.length||gn.has(e)&&!s.values.length?Mf(t,e):ie(Mo(_f(s,r),r.values),n):Ee(t,e)};function Co(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?_(t,e,n):ls(t)(t,e)}const Lf=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>C.update(e,n),stop:()=>mt(e),now:()=>j.isProcessing?j.timestamp:W.now()}},ko=(t,e,n=10)=>{let s="";const r=Math.max(Math.round(e/n),2);for(let i=0;i<r;i++)s+=Math.round(t(i/(r-1))*1e4)/1e4+", ";return`linear(${s.substring(0,s.length-2)})`},De=2e4;function fs(t){let e=0;const n=50;let s=t.next(e);for(;!s.done&&e<De;)e+=n,s=t.next(e);return e>=De?1/0:e}function Nf(t,e=100,n){const s=n({...t,keyframes:[0,e]}),r=Math.min(fs(s),De);return{type:"keyframes",ease:i=>s.next(r*i).value/e,duration:J(r)}}const Bf=5;function _o(t,e,n){const s=Math.max(e-Bf,0);return fo(n-t(s),e-s)}const V={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Ze=.001;function Ff({duration:t=V.duration,bounce:e=V.bounce,velocity:n=V.velocity,mass:s=V.mass}){let r,i,o=1-e;o=it(V.minDamping,V.maxDamping,o),t=it(V.minDuration,V.maxDuration,J(t)),o<1?(r=u=>{const l=u*o,f=l*t,h=l-n,g=yn(u,o),m=Math.exp(-f);return Ze-h/g*m},i=u=>{const f=u*o*t,h=f*n+n,g=Math.pow(o,2)*Math.pow(u,2)*t,m=Math.exp(-f),p=yn(Math.pow(u,2),o);return(-r(u)+Ze>0?-1:1)*((h-g)*m)/p}):(r=u=>{const l=Math.exp(-u*t),f=(u-n)*t+1;return-Ze+l*f},i=u=>{const l=Math.exp(-u*t),f=(n-u)*(t*t);return l*f});const a=5/t,c=Uf(r,i,a);if(t=ct(t),isNaN(c))return{stiffness:V.stiffness,damping:V.damping,duration:t};{const u=Math.pow(c,2)*s;return{stiffness:u,damping:o*2*Math.sqrt(s*u),duration:t}}}const jf=12;function Uf(t,e,n){let s=n;for(let r=1;r<jf;r++)s=s-t(s)/e(s);return s}function yn(t,e){return t*Math.sqrt(1-e*e)}const zf=["duration","bounce"],$f=["stiffness","damping","mass"];function ur(t,e){return e.some(n=>t[n]!==void 0)}function Wf(t){let e={velocity:V.velocity,stiffness:V.stiffness,damping:V.damping,mass:V.mass,isResolvedFromDuration:!1,...t};if(!ur(t,$f)&&ur(t,zf))if(t.visualDuration){const n=t.visualDuration,s=2*Math.PI/(n*1.2),r=s*s,i=2*it(.05,1,1-(t.bounce||0))*Math.sqrt(r);e={...e,mass:V.mass,stiffness:r,damping:i}}else{const n=Ff(t);e={...e,...n,mass:V.mass},e.isResolvedFromDuration=!0}return e}function Ie(t=V.visualDuration,e=V.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:s,restDelta:r}=n;const i=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:i},{stiffness:c,damping:u,mass:l,duration:f,velocity:h,isResolvedFromDuration:g}=Wf({...n,velocity:-J(n.velocity||0)}),m=h||0,p=u/(2*Math.sqrt(c*l)),d=o-i,y=J(Math.sqrt(c/l)),S=Math.abs(d)<5;s||(s=S?V.restSpeed.granular:V.restSpeed.default),r||(r=S?V.restDelta.granular:V.restDelta.default);let v;if(p<1){const x=yn(y,p);v=A=>{const w=Math.exp(-p*y*A);return o-w*((m+p*y*d)/x*Math.sin(x*A)+d*Math.cos(x*A))}}else if(p===1)v=x=>o-Math.exp(-y*x)*(d+(m+y*d)*x);else{const x=y*Math.sqrt(p*p-1);v=A=>{const w=Math.exp(-p*y*A),T=Math.min(x*A,300);return o-w*((m+p*y*d)*Math.sinh(T)+x*d*Math.cosh(T))/x}}const b={calculatedDuration:g&&f||null,next:x=>{const A=v(x);if(g)a.done=x>=f;else{let w=x===0?m:0;p<1&&(w=x===0?ct(m):_o(v,x,A));const T=Math.abs(w)<=s,D=Math.abs(o-A)<=r;a.done=T&&D}return a.value=a.done?o:A,a},toString:()=>{const x=Math.min(fs(b),De),A=ko(w=>b.next(x*w).value,x,30);return x+"ms "+A},toTransition:()=>{}};return b}Ie.applyToOptions=t=>{const e=Nf(t,100,Ie);return t.ease=e.ease,t.duration=ct(e.duration),t.type="keyframes",t};function vn({keyframes:t,velocity:e=0,power:n=.8,timeConstant:s=325,bounceDamping:r=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:c,restDelta:u=.5,restSpeed:l}){const f=t[0],h={done:!1,value:f},g=T=>a!==void 0&&T<a||c!==void 0&&T>c,m=T=>a===void 0?c:c===void 0||Math.abs(a-T)<Math.abs(c-T)?a:c;let p=n*e;const d=f+p,y=o===void 0?d:o(d);y!==d&&(p=y-f);const S=T=>-p*Math.exp(-T/s),v=T=>y+S(T),b=T=>{const D=S(T),O=v(T);h.done=Math.abs(D)<=u,h.value=h.done?y:O};let x,A;const w=T=>{g(h.value)&&(x=T,A=Ie({keyframes:[h.value,m(h.value)],velocity:_o(v,T,h.value),damping:r,stiffness:i,restDelta:u,restSpeed:l}))};return w(0),{calculatedDuration:null,next:T=>{let D=!1;return!A&&x===void 0&&(D=!0,b(T),w(T)),x!==void 0&&T>=x?A.next(T-x):(!D&&b(T),h)}}}function Kf(t,e,n){const s=[],r=n||ut.mix||Co,i=t.length-1;for(let o=0;o<i;o++){let a=r(t[o],t[o+1]);if(e){const c=Array.isArray(e)?e[o]||Z:e;a=ie(c,a)}s.push(a)}return s}function Gf(t,e,{clamp:n=!0,ease:s,mixer:r}={}){const i=t.length;if(ns(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=Kf(e,s,r),c=a.length,u=l=>{if(o&&l<t[0])return e[0];let f=0;if(c>1)for(;f<t.length-2&&!(l<t[f+1]);f++);const h=Xt(t[f],t[f+1],l);return a[f](h)};return n?l=>u(it(t[0],t[i-1],l)):u}function Hf(t,e){const n=t[t.length-1];for(let s=1;s<=e;s++){const r=Xt(0,e,s);t.push(_(n,1,r))}}function Yf(t){const e=[0];return Hf(e,t.length-1),e}function qf(t,e){return t.map(n=>n*e)}function Xf(t,e){return t.map(()=>e||wo).splice(0,t.length-1)}function Kt({duration:t=300,keyframes:e,times:n,ease:s="easeInOut"}){const r=af(s)?s.map(pn):pn(s),i={done:!1,value:e[0]},o=qf(n&&n.length===e.length?n:Yf(e),t),a=Gf(o,e,{ease:Array.isArray(r)?r:Xf(e,r)});return{calculatedDuration:t,next:c=>(i.value=a(c),i.done=c>=t,i)}}const Jf=t=>t!==null;function hs(t,{repeat:e,repeatType:n="loop"},s,r=1){const i=t.filter(Jf),a=r<0||e&&n!=="loop"&&e%2===1?0:i.length-1;return!a||s===void 0?i[a]:s}const Zf={decay:vn,inertia:vn,tween:Kt,keyframes:Kt,spring:Ie};function Vo(t){typeof t.type=="string"&&(t.type=Zf[t.type])}class ds{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const Qf=t=>t/100;class ps extends ds{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==W.now()&&this.tick(W.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;Vo(e);const{type:n=Kt,repeat:s=0,repeatDelay:r=0,repeatType:i,velocity:o=0}=e;let{keyframes:a}=e;const c=n||Kt;c!==Kt&&typeof a[0]!="number"&&(this.mixKeyframes=ie(Qf,Co(a[0],a[1])),a=[0,100]);const u=c({...e,keyframes:a});i==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...a].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=fs(u));const{calculatedDuration:l}=u;this.calculatedDuration=l,this.resolvedDuration=l+r,this.totalDuration=this.resolvedDuration*(s+1)-r,this.generator=u}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:s,totalDuration:r,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:c}=this;if(this.startTime===null)return s.next(0);const{delay:u=0,keyframes:l,repeat:f,repeatType:h,repeatDelay:g,type:m,onUpdate:p,finalKeyframe:d}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const y=this.currentTime-u*(this.playbackSpeed>=0?1:-1),S=this.playbackSpeed>=0?y<0:y>r;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=r);let v=this.currentTime,b=s;if(f){const T=Math.min(this.currentTime,r)/a;let D=Math.floor(T),O=T%1;!O&&T>=1&&(O=1),O===1&&D--,D=Math.min(D,f+1),!!(D%2)&&(h==="reverse"?(O=1-O,g&&(O-=g/a)):h==="mirror"&&(b=o)),v=it(0,1,O)*a}const x=S?{done:!1,value:l[0]}:b.next(v);i&&(x.value=i(x.value));let{done:A}=x;!S&&c!==null&&(A=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const w=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&A);return w&&m!==vn&&(x.value=hs(l,this.options,d,this.speed)),p&&p(x.value),w&&this.finish(),x}then(e,n){return this.finished.then(e,n)}get duration(){return J(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+J(e)}get time(){return J(this.currentTime)}set time(e){e=ct(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(W.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=J(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=Lf,startTime:n}=this.options;this.driver||(this.driver=e(r=>this.tick(r))),this.options.onPlay?.();const s=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=s):this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime||(this.startTime=n??s),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(W.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function th(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Tt=t=>t*180/Math.PI,Sn=t=>{const e=Tt(Math.atan2(t[1],t[0]));return bn(e)},eh={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Sn,rotateZ:Sn,skewX:t=>Tt(Math.atan(t[1])),skewY:t=>Tt(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},bn=t=>(t=t%360,t<0&&(t+=360),t),lr=Sn,fr=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),hr=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),nh={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:fr,scaleY:hr,scale:t=>(fr(t)+hr(t))/2,rotateX:t=>bn(Tt(Math.atan2(t[6],t[5]))),rotateY:t=>bn(Tt(Math.atan2(-t[2],t[0]))),rotateZ:lr,rotate:lr,skewX:t=>Tt(Math.atan(t[4])),skewY:t=>Tt(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function wn(t){return t.includes("scale")?1:0}function Tn(t,e){if(!t||t==="none")return wn(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let s,r;if(n)s=nh,r=n;else{const a=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);s=eh,r=a}if(!r)return wn(e);const i=s[e],o=r[1].split(",").map(rh);return typeof i=="function"?i(o):o[i]}const sh=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return Tn(n,e)};function rh(t){return parseFloat(t.trim())}const Bt=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ft=new Set(Bt),dr=t=>t===Nt||t===E,ih=new Set(["x","y","z"]),oh=Bt.filter(t=>!ih.has(t));function ah(t){const e=[];return oh.forEach(n=>{const s=t.getValue(n);s!==void 0&&(e.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),e}const dt={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Tn(e,"x"),y:(t,{transform:e})=>Tn(e,"y")};dt.translateX=dt.x;dt.translateY=dt.y;const Pt=new Set;let xn=!1,Pn=!1,An=!1;function Lo(){if(Pn){const t=Array.from(Pt).filter(s=>s.needsMeasurement),e=new Set(t.map(s=>s.element)),n=new Map;e.forEach(s=>{const r=ah(s);r.length&&(n.set(s,r),s.render())}),t.forEach(s=>s.measureInitialState()),e.forEach(s=>{s.render();const r=n.get(s);r&&r.forEach(([i,o])=>{s.getValue(i)?.set(o)})}),t.forEach(s=>s.measureEndState()),t.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}Pn=!1,xn=!1,Pt.forEach(t=>t.complete(An)),Pt.clear()}function No(){Pt.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Pn=!0)})}function ch(){An=!0,No(),Lo(),An=!1}class ms{constructor(e,n,s,r,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=s,this.motionValue=r,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Pt.add(this),xn||(xn=!0,C.read(No),C.resolveKeyframes(Lo))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:s,motionValue:r}=this;if(e[0]===null){const i=r?.get(),o=e[e.length-1];if(i!==void 0)e[0]=i;else if(s&&n){const a=s.readValue(n,o);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=o),r&&i===void 0&&r.set(e[0])}th(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Pt.delete(this)}cancel(){this.state==="scheduled"&&(Pt.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const uh=t=>t.startsWith("--");function lh(t,e,n){uh(e)?t.style.setProperty(e,n):t.style[e]=n}const fh=ss(()=>window.ScrollTimeline!==void 0),hh={};function dh(t,e){const n=ss(t);return()=>hh[e]??n()}const Bo=dh(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),zt=([t,e,n,s])=>`cubic-bezier(${t}, ${e}, ${n}, ${s})`,pr={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:zt([0,.65,.55,1]),circOut:zt([.55,0,1,.45]),backIn:zt([.31,.01,.66,-.59]),backOut:zt([.33,1.53,.69,.99])};function Fo(t,e){if(t)return typeof t=="function"?Bo()?ko(t,e):"ease-out":To(t)?zt(t):Array.isArray(t)?t.map(n=>Fo(n,e)||pr.easeOut):pr[t]}function ph(t,e,n,{delay:s=0,duration:r=300,repeat:i=0,repeatType:o="loop",ease:a="easeOut",times:c}={},u=void 0){const l={[e]:n};c&&(l.offset=c);const f=Fo(a,r);Array.isArray(f)&&(l.easing=f);const h={delay:s,duration:r,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"};return u&&(h.pseudoElement=u),t.animate(l,h)}function jo(t){return typeof t=="function"&&"applyToOptions"in t}function mh({type:t,...e}){return jo(t)&&Bo()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class gh extends ds{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:n,name:s,keyframes:r,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:a,onComplete:c}=e;this.isPseudoElement=!!i,this.allowFlatten=o,this.options=e,ns(typeof e.type!="string");const u=mh(e);this.animation=ph(n,s,r,u,i),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const l=hs(r,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(l):lh(n,s,l),this.animation.cancel()}c?.(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return J(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+J(e)}get time(){return J(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=ct(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&fh()?(this.animation.timeline=e,Z):n(this)}}const Uo={anticipate:vo,backInOut:yo,circInOut:bo};function yh(t){return t in Uo}function vh(t){typeof t.ease=="string"&&yh(t.ease)&&(t.ease=Uo[t.ease])}const Qe=10;class Sh extends gh{constructor(e){vh(e),Vo(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:s,onComplete:r,element:i,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const a=new ps({...o,autoplay:!1}),c=Math.max(Qe,W.now()-this.startTime),u=it(0,Qe,c-Qe);n.setWithVelocity(a.sample(Math.max(0,c-u)).value,a.sample(c).value,u),a.stop()}}const mr=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(gt.test(t)||t==="0")&&!t.startsWith("url("));function bh(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function wh(t,e,n,s){const r=t[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],o=mr(r,e),a=mr(i,e);return!o||!a?!1:bh(t)||(n==="spring"||jo(n))&&s}function En(t){t.duration=0,t.type="keyframes"}const Th=new Set(["opacity","clipPath","filter","transform"]),xh=ss(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Ph(t){const{motionValue:e,name:n,repeatDelay:s,repeatType:r,damping:i,type:o}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=e.owner.getProps();return xh()&&n&&Th.has(n)&&(n!=="transform"||!u)&&!c&&!s&&r!=="mirror"&&i!==0&&o!=="inertia"}const Ah=40;class Eh extends ds{constructor({autoplay:e=!0,delay:n=0,type:s="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:o="loop",keyframes:a,name:c,motionValue:u,element:l,...f}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=W.now();const h={autoplay:e,delay:n,type:s,repeat:r,repeatDelay:i,repeatType:o,name:c,motionValue:u,element:l,...f},g=l?.KeyframeResolver||ms;this.keyframeResolver=new g(a,(m,p,d)=>this.onKeyframesResolved(m,p,h,!d),c,u,l),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,s,r){this.keyframeResolver=void 0;const{name:i,type:o,velocity:a,delay:c,isHandoff:u,onUpdate:l}=s;this.resolvedAt=W.now(),wh(e,i,o,a)||((ut.instantAnimations||!c)&&l?.(hs(e,s,n)),e[0]=e[e.length-1],En(s),s.repeat=0);const h={startTime:r?this.resolvedAt?this.resolvedAt-this.createdAt>Ah?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...s,keyframes:e},g=!u&&Ph(h),m=h.motionValue?.owner?.current,p=g?new Sh({...h,element:m}):new ps(h);p.finished.then(()=>{this.notifyFinished()}).catch(Z),this.pendingTimeline&&(this.stopTimeline=p.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=p}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),ch()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}function zo(t,e,n,s=0,r=1){const i=Array.from(t).sort((u,l)=>u.sortNodePosition(l)).indexOf(e),o=t.size,a=(o-1)*s;return typeof n=="function"?n(i,o):r===1?i*s:a-i*s}const Dh=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Ih(t){const e=Dh.exec(t);if(!e)return[,];const[,n,s,r]=e;return[`--${n??s}`,r]}function $o(t,e,n=1){const[s,r]=Ih(t);if(!s)return;const i=window.getComputedStyle(e).getPropertyValue(s);if(i){const o=i.trim();return co(o)?parseFloat(o):o}return as(r)?$o(r,e,n+1):r}const Rh={type:"spring",stiffness:500,damping:25,restSpeed:10},Oh=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Mh={type:"keyframes",duration:.8},Ch={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},kh=(t,{keyframes:e})=>e.length>2?Mh:Ft.has(t)?t.startsWith("scale")?Oh(e[1]):Rh:Ch,_h=t=>t!==null;function Vh(t,{repeat:e,repeatType:n="loop"},s){const r=t.filter(_h),i=e&&n!=="loop"&&e%2===1?0:r.length-1;return r[i]}function gs(t,e){return t?.[e]??t?.default??t}function Lh({when:t,delay:e,delayChildren:n,staggerChildren:s,staggerDirection:r,repeat:i,repeatType:o,repeatDelay:a,from:c,elapsed:u,...l}){return!!Object.keys(l).length}const ys=(t,e,n,s={},r,i)=>o=>{const a=gs(s,t)||{},c=a.delay||s.delay||0;let{elapsed:u=0}=s;u=u-ct(c);const l={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-u,onUpdate:h=>{e.set(h),a.onUpdate&&a.onUpdate(h)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:i?void 0:r};Lh(a)||Object.assign(l,kh(t,l)),l.duration&&(l.duration=ct(l.duration)),l.repeatDelay&&(l.repeatDelay=ct(l.repeatDelay)),l.from!==void 0&&(l.keyframes[0]=l.from);let f=!1;if((l.type===!1||l.duration===0&&!l.repeatDelay)&&(En(l),l.delay===0&&(f=!0)),(ut.instantAnimations||ut.skipAnimations)&&(f=!0,En(l),l.delay=0),l.allowFlatten=!a.type&&!a.ease,f&&!i&&e.get()!==void 0){const h=Vh(l.keyframes,a);if(h!==void 0){C.update(()=>{l.onUpdate(h),l.onComplete()});return}}return a.isSync?new ps(l):new Eh(l)};function gr(t){const e=[{},{}];return t?.values.forEach((n,s)=>{e[0][s]=n.get(),e[1][s]=n.getVelocity()}),e}function vs(t,e,n,s){if(typeof e=="function"){const[r,i]=gr(s);e=e(n!==void 0?n:t.custom,r,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[r,i]=gr(s);e=e(n!==void 0?n:t.custom,r,i)}return e}function _t(t,e,n){const s=t.getProps();return vs(s,e,n!==void 0?n:s.custom,t)}const Wo=new Set(["width","height","top","left","right","bottom",...Bt]),yr=30,Nh=t=>!isNaN(parseFloat(t));class Bh{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=s=>{const r=W.now();if(this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const i of this.dependents)i.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=W.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Nh(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new rs);const s=this.events[e].add(n);return e==="change"?()=>{s(),C.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,s){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=W.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>yr)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,yr);return fo(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Lt(t,e){return new Bh(t,e)}const Dn=t=>Array.isArray(t);function Fh(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Lt(n))}function jh(t){return Dn(t)?t[t.length-1]||0:t}function Uh(t,e){const n=_t(t,e);let{transitionEnd:s={},transition:r={},...i}=n||{};i={...i,...s};for(const o in i){const a=jh(i[o]);Fh(t,o,a)}}const z=t=>!!(t&&t.getVelocity);function zh(t){return!!(z(t)&&t.add)}function In(t,e){const n=t.getValue("willChange");if(zh(n))return n.add(e);if(!n&&ut.WillChange){const s=new ut.WillChange("auto");t.addValue("willChange",s),s.add(e)}}function Ss(t){return t.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const $h="framerAppearId",Ko="data-"+Ss($h);function Go(t){return t.props[Ko]}function Wh({protectedKeys:t,needsAnimating:e},n){const s=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,s}function Ho(t,e,{delay:n=0,transitionOverride:s,type:r}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:o,...a}=e;s&&(i=s);const c=[],u=r&&t.animationState&&t.animationState.getState()[r];for(const l in a){const f=t.getValue(l,t.latestValues[l]??null),h=a[l];if(h===void 0||u&&Wh(u,l))continue;const g={delay:n,...gs(i||{},l)},m=f.get();if(m!==void 0&&!f.isAnimating&&!Array.isArray(h)&&h===m&&!g.velocity)continue;let p=!1;if(window.MotionHandoffAnimation){const y=Go(t);if(y){const S=window.MotionHandoffAnimation(y,l,C);S!==null&&(g.startTime=S,p=!0)}}In(t,l),f.start(ys(l,f,h,t.shouldReduceMotion&&Wo.has(l)?{type:!1}:g,t,p));const d=f.animation;d&&c.push(d)}return o&&Promise.all(c).then(()=>{C.update(()=>{o&&Uh(t,o)})}),c}function Rn(t,e,n={}){const s=_t(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:r=t.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(r=n.transitionOverride);const i=s?()=>Promise.all(Ho(t,s,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:l,staggerDirection:f}=r;return Kh(t,e,c,u,l,f,n)}:()=>Promise.resolve(),{when:a}=r;if(a){const[c,u]=a==="beforeChildren"?[i,o]:[o,i];return c().then(()=>u())}else return Promise.all([i(),o(n.delay)])}function Kh(t,e,n=0,s=0,r=0,i=1,o){const a=[];for(const c of t.variantChildren)c.notify("AnimationStart",e),a.push(Rn(c,e,{...o,delay:n+(typeof s=="function"?0:s)+zo(t.variantChildren,c,s,r,i)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(a)}function Gh(t,e,n={}){t.notify("AnimationStart",e);let s;if(Array.isArray(e)){const r=e.map(i=>Rn(t,i,n));s=Promise.all(r)}else if(typeof e=="string")s=Rn(t,e,n);else{const r=typeof e=="function"?_t(t,e,n.custom):e;s=Promise.all(Ho(t,r,n))}return s.then(()=>{t.notify("AnimationComplete",e)})}const Hh={test:t=>t==="auto",parse:t=>t},Yo=t=>e=>e.test(t),qo=[Nt,E,rt,ht,bf,Sf,Hh],vr=t=>qo.find(Yo(t));function Yh(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||lo(t):!0}const qh=new Set(["brightness","contrast","saturate","opacity"]);function Xh(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[s]=n.match(cs)||[];if(!s)return t;const r=n.replace(s,"");let i=qh.has(e)?1:0;return s!==n&&(i*=100),e+"("+i+r+")"}const Jh=/\b([a-z-]*)\(.*?\)/gu,On={...gt,getAnimatableNone:t=>{const e=t.match(Jh);return e?e.map(Xh).join(" "):t}},Sr={...Nt,transform:Math.round},Zh={rotate:ht,rotateX:ht,rotateY:ht,rotateZ:ht,scale:pe,scaleX:pe,scaleY:pe,scaleZ:pe,skew:ht,skewX:ht,skewY:ht,distance:E,translateX:E,translateY:E,translateZ:E,x:E,y:E,z:E,perspective:E,transformPerspective:E,opacity:Jt,originX:ir,originY:ir,originZ:E},bs={borderWidth:E,borderTopWidth:E,borderRightWidth:E,borderBottomWidth:E,borderLeftWidth:E,borderRadius:E,radius:E,borderTopLeftRadius:E,borderTopRightRadius:E,borderBottomRightRadius:E,borderBottomLeftRadius:E,width:E,maxWidth:E,height:E,maxHeight:E,top:E,right:E,bottom:E,left:E,inset:E,insetBlock:E,insetBlockStart:E,insetBlockEnd:E,insetInline:E,insetInlineStart:E,insetInlineEnd:E,padding:E,paddingTop:E,paddingRight:E,paddingBottom:E,paddingLeft:E,paddingBlock:E,paddingBlockStart:E,paddingBlockEnd:E,paddingInline:E,paddingInlineStart:E,paddingInlineEnd:E,margin:E,marginTop:E,marginRight:E,marginBottom:E,marginLeft:E,marginBlock:E,marginBlockStart:E,marginBlockEnd:E,marginInline:E,marginInlineStart:E,marginInlineEnd:E,backgroundPositionX:E,backgroundPositionY:E,...Zh,zIndex:Sr,fillOpacity:Jt,strokeOpacity:Jt,numOctaves:Sr},Qh={...bs,color:N,backgroundColor:N,outlineColor:N,fill:N,stroke:N,borderColor:N,borderTopColor:N,borderRightColor:N,borderBottomColor:N,borderLeftColor:N,filter:On,WebkitFilter:On},Xo=t=>Qh[t];function Jo(t,e){let n=Xo(t);return n!==On&&(n=gt),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const td=new Set(["auto","none","0"]);function ed(t,e,n){let s=0,r;for(;s<t.length&&!r;){const i=t[s];typeof i=="string"&&!td.has(i)&&Zt(i).values.length&&(r=t[s]),s++}if(r&&n)for(const i of e)t[i]=Jo(n,r)}class nd extends ms{constructor(e,n,s,r,i){super(e,n,s,r,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:s}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let f=e[l];if(typeof f=="string"&&(f=f.trim(),as(f))){const h=$o(f,n.current);h!==void 0&&(e[l]=h),l===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!Wo.has(s)||e.length!==2)return;const[r,i]=e,o=vr(r),a=vr(i),c=rr(r),u=rr(i);if(c!==u&&dt[s]){this.needsMeasurement=!0;return}if(o!==a)if(dr(o)&&dr(a))for(let l=0;l<e.length;l++){const f=e[l];typeof f=="string"&&(e[l]=parseFloat(f))}else dt[s]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,s=[];for(let r=0;r<e.length;r++)(e[r]===null||Yh(e[r]))&&s.push(r);s.length&&ed(e,s,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:s}=this;if(!e||!e.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=dt[s](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const r=n[n.length-1];r!==void 0&&e.getValue(s,r).jump(r,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:s}=this;if(!e||!e.current)return;const r=e.getValue(n);r&&r.jump(this.measuredOrigin,!1);const i=s.length-1,o=s[i];s[i]=dt[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([a,c])=>{e.getValue(a).set(c)}),this.resolveNoneKeyframes()}}function sd(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let s=document;const r=n?.[t]??s.querySelectorAll(t);return r?Array.from(r):[]}return Array.from(t)}const Zo=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function Qo(t){return uo(t)&&"offsetHeight"in t}const{schedule:ws}=xo(queueMicrotask,!1),tt={x:!1,y:!1};function ta(){return tt.x||tt.y}function rd(t){return t==="x"||t==="y"?tt[t]?null:(tt[t]=!0,()=>{tt[t]=!1}):tt.x||tt.y?null:(tt.x=tt.y=!0,()=>{tt.x=tt.y=!1})}function ea(t,e){const n=sd(t),s=new AbortController,r={passive:!0,...e,signal:s.signal};return[n,r,()=>s.abort()]}function br(t){return!(t.pointerType==="touch"||ta())}function id(t,e,n={}){const[s,r,i]=ea(t,n),o=a=>{if(!br(a))return;const{target:c}=a,u=e(c,a);if(typeof u!="function"||!c)return;const l=f=>{br(f)&&(u(f),c.removeEventListener("pointerleave",l))};c.addEventListener("pointerleave",l,r)};return s.forEach(a=>{a.addEventListener("pointerenter",o,r)}),i}const na=(t,e)=>e?t===e?!0:na(t,e.parentElement):!1,Ts=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,od=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function sa(t){return od.has(t.tagName)||t.isContentEditable===!0}const ve=new WeakSet;function wr(t){return e=>{e.key==="Enter"&&t(e)}}function tn(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const ad=(t,e)=>{const n=t.currentTarget;if(!n)return;const s=wr(()=>{if(ve.has(n))return;tn(n,"down");const r=wr(()=>{tn(n,"up")}),i=()=>tn(n,"cancel");n.addEventListener("keyup",r,e),n.addEventListener("blur",i,e)});n.addEventListener("keydown",s,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",s),e)};function Tr(t){return Ts(t)&&!ta()}function cd(t,e,n={}){const[s,r,i]=ea(t,n),o=a=>{const c=a.currentTarget;if(!Tr(a))return;ve.add(c);const u=e(c,a),l=(g,m)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",h),ve.has(c)&&ve.delete(c),Tr(g)&&typeof u=="function"&&u(g,{success:m})},f=g=>{l(g,c===window||c===document||n.useGlobalTarget||na(c,g.target))},h=g=>{l(g,!1)};window.addEventListener("pointerup",f,r),window.addEventListener("pointercancel",h,r)};return s.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,r),Qo(a)&&(a.addEventListener("focus",u=>ad(u,r)),!sa(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),i}function ra(t){return uo(t)&&"ownerSVGElement"in t}function ud(t){return ra(t)&&t.tagName==="svg"}function ld(t,e){if(t==="first")return 0;{const n=e-1;return t==="last"?n:n/2}}function xr(t=.1,{startDelay:e=0,from:n=0,ease:s}={}){return(r,i)=>{const o=typeof n=="number"?n:ld(n,i),a=Math.abs(o-r);let c=t*a;if(s){const u=i*t;c=pn(s)(c/u)*u}return e+c}}const fd=[...qo,N,gt],hd=t=>fd.find(Yo(t)),Pr=()=>({translate:0,scale:1,origin:0,originPoint:0}),Rt=()=>({x:Pr(),y:Pr()}),Ar=()=>({min:0,max:0}),B=()=>({x:Ar(),y:Ar()}),Mn={current:null},ia={current:!1},dd=typeof window<"u";function pd(){if(ia.current=!0,!!dd)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Mn.current=t.matches;t.addEventListener("change",e),e()}else Mn.current=!1}const md=new WeakMap;function Le(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Qt(t){return typeof t=="string"||Array.isArray(t)}const xs=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Ps=["initial",...xs];function Ne(t){return Le(t.animate)||Ps.some(e=>Qt(t[e]))}function oa(t){return!!(Ne(t)||t.variants)}function gd(t,e,n){for(const s in e){const r=e[s],i=n[s];if(z(r))t.addValue(s,r);else if(z(i))t.addValue(s,Lt(r,{owner:t}));else if(i!==r)if(t.hasValue(s)){const o=t.getValue(s);o.liveStyle===!0?o.jump(r):o.hasAnimated||o.set(r)}else{const o=t.getStaticValue(s);t.addValue(s,Lt(o!==void 0?o:r,{owner:t}))}}for(const s in n)e[s]===void 0&&t.removeValue(s);return e}const Er=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let Re={};function aa(t){Re=t}function yd(){return Re}class vd{scrapeMotionValuesFromProps(e,n,s){return{}}constructor({parent:e,props:n,presenceContext:s,reducedMotionConfig:r,blockInitialAnimation:i,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=ms,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=W.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,C.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=a,this.blockInitialAnimation=!!i,this.isControllingVariants=Ne(n),this.isVariantNode=oa(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:l,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const h in f){const g=f[h];c[h]!==void 0&&z(g)&&g.set(c[h])}}mount(e){this.current=e,md.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(ia.current||pd(),this.shouldReduceMotion=Mn.current),this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),mt(this.notifyUpdate),mt(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const s=Ft.has(e);s&&this.onBindTransform&&this.onBindTransform();const r=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&C.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;typeof window<"u"&&window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{r(),i&&i(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Re){const n=Re[e];if(!n)continue;const{isEnabled:s,Feature:r}=n;if(!this.features[e]&&r&&s(this.props)&&(this.features[e]=new r(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):B()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<Er.length;s++){const r=Er[s];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const i="on"+r,o=e[i];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=gd(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const s=this.values.get(e);n!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&n!==void 0&&(s=Lt(n===null?void 0:n,{owner:this}),this.addValue(e,s)),s}readValue(e,n){let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(co(s)||lo(s))?s=parseFloat(s):!hd(s)&&gt.test(n)&&(s=Jo(e,n)),this.setBaseTarget(e,z(s)?s.get():s)),z(s)?s.get():s}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let s;if(typeof n=="string"||typeof n=="object"){const i=vs(this.props,n,this.presenceContext?.custom);i&&(s=i[e])}if(n&&s!==void 0)return s;const r=this.getBaseTargetFromProps(this.props,e);return r!==void 0&&!z(r)?r:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new rs),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){ws.render(this.render)}}class ca extends vd{constructor(){super(...arguments),this.KeyframeResolver=nd}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){const s=e.style;return s?s[n]:void 0}removeValueFromRenderState(e,{vars:n,style:s}){delete n[e],delete s[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;z(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class yt{constructor(e){this.isMounted=!1,this.node=e}update(){}}function ua({top:t,left:e,right:n,bottom:s}){return{x:{min:e,max:n},y:{min:t,max:s}}}function Sd({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function bd(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),s=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}function en(t){return t===void 0||t===1}function Cn({scale:t,scaleX:e,scaleY:n}){return!en(t)||!en(e)||!en(n)}function bt(t){return Cn(t)||la(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function la(t){return Dr(t.x)||Dr(t.y)}function Dr(t){return t&&t!=="0%"}function Oe(t,e,n){const s=t-n,r=e*s;return n+r}function Ir(t,e,n,s,r){return r!==void 0&&(t=Oe(t,r,s)),Oe(t,n,s)+e}function kn(t,e=0,n=1,s,r){t.min=Ir(t.min,e,n,s,r),t.max=Ir(t.max,e,n,s,r)}function fa(t,{x:e,y:n}){kn(t.x,e.translate,e.scale,e.originPoint),kn(t.y,n.translate,n.scale,n.originPoint)}const Rr=.999999999999,Or=1.0000000000001;function wd(t,e,n,s=!1){const r=n.length;if(!r)return;e.x=e.y=1;let i,o;for(let a=0;a<r;a++){i=n[a],o=i.projectionDelta;const{visualElement:c}=i.options;c&&c.props.style&&c.props.style.display==="contents"||(s&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Mt(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,fa(t,o)),s&&bt(i.latestValues)&&Mt(t,i.latestValues))}e.x<Or&&e.x>Rr&&(e.x=1),e.y<Or&&e.y>Rr&&(e.y=1)}function Ot(t,e){t.min=t.min+e,t.max=t.max+e}function Mr(t,e,n,s,r=.5){const i=_(t.min,t.max,r);kn(t,e,n,i,s)}function Mt(t,e){Mr(t.x,e.x,e.scaleX,e.scale,e.originX),Mr(t.y,e.y,e.scaleY,e.scale,e.originY)}function ha(t,e){return ua(bd(t.getBoundingClientRect(),e))}function Td(t,e,n){const s=ha(t,n),{scroll:r}=e;return r&&(Ot(s.x,r.offset.x),Ot(s.y,r.offset.y)),s}const xd={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Pd=Bt.length;function Ad(t,e,n){let s="",r=!0;for(let i=0;i<Pd;i++){const o=Bt[i],a=t[o];if(a===void 0)continue;let c=!0;if(typeof a=="number"?c=a===(o.startsWith("scale")?1:0):c=parseFloat(a)===0,!c||n){const u=Zo(a,bs[o]);if(!c){r=!1;const l=xd[o]||o;s+=`${l}(${u}) `}n&&(e[o]=u)}}return s=s.trim(),n?s=n(e,r?"":s):r&&(s="none"),s}function As(t,e,n){const{style:s,vars:r,transformOrigin:i}=t;let o=!1,a=!1;for(const c in e){const u=e[c];if(Ft.has(c)){o=!0;continue}else if(Ao(c)){r[c]=u;continue}else{const l=Zo(u,bs[c]);c.startsWith("origin")?(a=!0,i[c]=l):s[c]=l}}if(e.transform||(o||n?s.transform=Ad(e,t.transform,n):s.transform&&(s.transform="none")),a){const{originX:c="50%",originY:u="50%",originZ:l=0}=i;s.transformOrigin=`${c} ${u} ${l}`}}function da(t,{style:e,vars:n},s,r){const i=t.style;let o;for(o in e)i[o]=e[o];r?.applyProjectionStyles(i,s);for(o in n)i.setProperty(o,n[o])}function Cr(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Ut={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(E.test(t))t=parseFloat(t);else return t;const n=Cr(t,e.target.x),s=Cr(t,e.target.y);return`${n}% ${s}%`}},Ed={correct:(t,{treeScale:e,projectionDelta:n})=>{const s=t,r=gt.parse(t);if(r.length>5)return s;const i=gt.createTransformer(t),o=typeof r[0]!="number"?1:0,a=n.x.scale*e.x,c=n.y.scale*e.y;r[0+o]/=a,r[1+o]/=c;const u=_(a,c,.5);return typeof r[2+o]=="number"&&(r[2+o]/=u),typeof r[3+o]=="number"&&(r[3+o]/=u),i(r)}},_n={borderRadius:{...Ut,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ut,borderTopRightRadius:Ut,borderBottomLeftRadius:Ut,borderBottomRightRadius:Ut,boxShadow:Ed};function pa(t,{layout:e,layoutId:n}){return Ft.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!_n[t]||t==="opacity")}function Es(t,e,n){const s=t.style,r=e?.style,i={};if(!s)return i;for(const o in s)(z(s[o])||r&&z(r[o])||pa(o,t)||n?.getValue(o)?.liveStyle!==void 0)&&(i[o]=s[o]);return i}function Dd(t){return window.getComputedStyle(t)}class Id extends ca{constructor(){super(...arguments),this.type="html",this.renderInstance=da}readValueFromInstance(e,n){if(Ft.has(n))return this.projection?.isProjecting?wn(n):sh(e,n);{const s=Dd(e),r=(Ao(n)?s.getPropertyValue(n):s[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return ha(e,n)}build(e,n,s){As(e,n,s.transformTemplate)}scrapeMotionValuesFromProps(e,n,s){return Es(e,n,s)}}const Rd={offset:"stroke-dashoffset",array:"stroke-dasharray"},Od={offset:"strokeDashoffset",array:"strokeDasharray"};function Md(t,e,n=1,s=0,r=!0){t.pathLength=1;const i=r?Rd:Od;t[i.offset]=E.transform(-s);const o=E.transform(e),a=E.transform(n);t[i.array]=`${o} ${a}`}const Cd=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function ma(t,{attrX:e,attrY:n,attrScale:s,pathLength:r,pathSpacing:i=1,pathOffset:o=0,...a},c,u,l){if(As(t,a,u),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:h}=t;f.transform&&(h.transform=f.transform,delete f.transform),(h.transform||f.transformOrigin)&&(h.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),h.transform&&(h.transformBox=l?.transformBox??"fill-box",delete f.transformBox);for(const g of Cd)f[g]!==void 0&&(h[g]=f[g],delete f[g]);e!==void 0&&(f.x=e),n!==void 0&&(f.y=n),s!==void 0&&(f.scale=s),r!==void 0&&Md(f,r,i,o,!1)}const ga=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),ya=t=>typeof t=="string"&&t.toLowerCase()==="svg";function kd(t,e,n,s){da(t,e,void 0,s);for(const r in e.attrs)t.setAttribute(ga.has(r)?r:Ss(r),e.attrs[r])}function va(t,e,n){const s=Es(t,e,n);for(const r in t)if(z(t[r])||z(e[r])){const i=Bt.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;s[i]=t[r]}return s}class _d extends ca{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=B}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Ft.has(n)){const s=Xo(n);return s&&s.default||0}return n=ga.has(n)?n:Ss(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,s){return va(e,n,s)}build(e,n,s){ma(e,n,this.isSVGTag,s.transformTemplate,s.style)}renderInstance(e,n,s,r){kd(e,n,s,r)}mount(e){this.isSVGTag=ya(e.tagName),super.mount(e)}}const Vd=Ps.length;function Sa(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?Sa(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<Vd;n++){const s=Ps[n],r=t.props[s];(Qt(r)||r===!1)&&(e[s]=r)}return e}function ba(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let s=0;s<n;s++)if(e[s]!==t[s])return!1;return!0}const Ld=[...xs].reverse(),Nd=xs.length;function Bd(t){return e=>Promise.all(e.map(({animation:n,options:s})=>Gh(t,n,s)))}function Fd(t){let e=Bd(t),n=kr(),s=!0;const r=c=>(u,l)=>{const f=_t(t,l,c==="exit"?t.presenceContext?.custom:void 0);if(f){const{transition:h,transitionEnd:g,...m}=f;u={...u,...m,...g}}return u};function i(c){e=c(t)}function o(c){const{props:u}=t,l=Sa(t.parent)||{},f=[],h=new Set;let g={},m=1/0;for(let d=0;d<Nd;d++){const y=Ld[d],S=n[y],v=u[y]!==void 0?u[y]:l[y],b=Qt(v),x=y===c?S.isActive:null;x===!1&&(m=d);let A=v===l[y]&&v!==u[y]&&b;if(A&&s&&t.manuallyAnimateOnMount&&(A=!1),S.protectedKeys={...g},!S.isActive&&x===null||!v&&!S.prevProp||Le(v)||typeof v=="boolean")continue;const w=jd(S.prevProp,v);let T=w||y===c&&S.isActive&&!A&&b||d>m&&b,D=!1;const O=Array.isArray(v)?v:[v];let L=O.reduce(r(y),{});x===!1&&(L={});const{prevResolvedValues:G={}}=S,lt={...G,...L},ot=F=>{T=!0,h.has(F)&&(D=!0,h.delete(F)),S.needsAnimating[F]=!0;const q=t.getValue(F);q&&(q.liveStyle=!1)};for(const F in lt){const q=L[F],vt=G[F];if(g.hasOwnProperty(F))continue;let Et=!1;Dn(q)&&Dn(vt)?Et=!ba(q,vt):Et=q!==vt,Et?q!=null?ot(F):h.add(F):q!==void 0&&h.has(F)?ot(F):S.protectedKeys[F]=!0}S.prevProp=v,S.prevResolvedValues=L,S.isActive&&(g={...g,...L}),s&&t.blockInitialAnimation&&(T=!1);const ft=A&&w;T&&(!ft||D)&&f.push(...O.map(F=>{const q={type:y};if(typeof F=="string"&&s&&!ft&&t.manuallyAnimateOnMount&&t.parent){const{parent:vt}=t,Et=_t(vt,F);if(vt.enteringChildren&&Et){const{delayChildren:Wa}=Et.transition||{};q.delay=zo(vt.enteringChildren,t,Wa)}}return{animation:F,options:q}}))}if(h.size){const d={};if(typeof u.initial!="boolean"){const y=_t(t,Array.isArray(u.initial)?u.initial[0]:u.initial);y&&y.transition&&(d.transition=y.transition)}h.forEach(y=>{const S=t.getBaseTarget(y),v=t.getValue(y);v&&(v.liveStyle=!0),d[y]=S??null}),f.push({animation:d})}let p=!!f.length;return s&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(p=!1),s=!1,p?e(f):Promise.resolve()}function a(c,u){if(n[c].isActive===u)return Promise.resolve();t.variantChildren?.forEach(f=>f.animationState?.setActive(c,u)),n[c].isActive=u;const l=o(c);for(const f in n)n[f].protectedKeys={};return l}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>n,reset:()=>{n=kr()}}}function jd(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!ba(e,t):!1}function St(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function kr(){return{animate:St(!0),whileInView:St(),whileHover:St(),whileTap:St(),whileDrag:St(),whileFocus:St(),exit:St()}}function _r(t,e){t.min=e.min,t.max=e.max}function Q(t,e){_r(t.x,e.x),_r(t.y,e.y)}function Vr(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}const wa=1e-4,Ud=1-wa,zd=1+wa,Ta=.01,$d=0-Ta,Wd=0+Ta;function K(t){return t.max-t.min}function Kd(t,e,n){return Math.abs(t-e)<=n}function Lr(t,e,n,s=.5){t.origin=s,t.originPoint=_(e.min,e.max,t.origin),t.scale=K(n)/K(e),t.translate=_(n.min,n.max,t.origin)-t.originPoint,(t.scale>=Ud&&t.scale<=zd||isNaN(t.scale))&&(t.scale=1),(t.translate>=$d&&t.translate<=Wd||isNaN(t.translate))&&(t.translate=0)}function Gt(t,e,n,s){Lr(t.x,e.x,n.x,s?s.originX:void 0),Lr(t.y,e.y,n.y,s?s.originY:void 0)}function Nr(t,e,n){t.min=n.min+e.min,t.max=t.min+K(e)}function Gd(t,e,n){Nr(t.x,e.x,n.x),Nr(t.y,e.y,n.y)}function Br(t,e,n){t.min=e.min-n.min,t.max=t.min+K(e)}function Me(t,e,n){Br(t.x,e.x,n.x),Br(t.y,e.y,n.y)}function Fr(t,e,n,s,r){return t-=e,t=Oe(t,1/n,s),r!==void 0&&(t=Oe(t,1/r,s)),t}function Hd(t,e=0,n=1,s=.5,r,i=t,o=t){if(rt.test(e)&&(e=parseFloat(e),e=_(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=_(i.min,i.max,s);t===i&&(a-=e),t.min=Fr(t.min,e,n,a,r),t.max=Fr(t.max,e,n,a,r)}function jr(t,e,[n,s,r],i,o){Hd(t,e[n],e[s],e[r],e.scale,i,o)}const Yd=["x","scaleX","originX"],qd=["y","scaleY","originY"];function Ur(t,e,n,s){jr(t.x,e,Yd,n?n.x:void 0,s?s.x:void 0),jr(t.y,e,qd,n?n.y:void 0,s?s.y:void 0)}function zr(t){return t.translate===0&&t.scale===1}function xa(t){return zr(t.x)&&zr(t.y)}function $r(t,e){return t.min===e.min&&t.max===e.max}function Xd(t,e){return $r(t.x,e.x)&&$r(t.y,e.y)}function Wr(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Pa(t,e){return Wr(t.x,e.x)&&Wr(t.y,e.y)}function Kr(t){return K(t.x)/K(t.y)}function Gr(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}function X(t){return[t("x"),t("y")]}function Jd(t,e,n){let s="";const r=t.x.translate/e.x,i=t.y.translate/e.y,o=n?.z||0;if((r||i||o)&&(s=`translate3d(${r}px, ${i}px, ${o}px) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:l,rotateX:f,rotateY:h,skewX:g,skewY:m}=n;u&&(s=`perspective(${u}px) ${s}`),l&&(s+=`rotate(${l}deg) `),f&&(s+=`rotateX(${f}deg) `),h&&(s+=`rotateY(${h}deg) `),g&&(s+=`skewX(${g}deg) `),m&&(s+=`skewY(${m}deg) `)}const a=t.x.scale*e.x,c=t.y.scale*e.y;return(a!==1||c!==1)&&(s+=`scale(${a}, ${c})`),s||"none"}const Aa=["TopLeft","TopRight","BottomLeft","BottomRight"],Zd=Aa.length,Hr=t=>typeof t=="string"?parseFloat(t):t,Yr=t=>typeof t=="number"||E.test(t);function Qd(t,e,n,s,r,i){r?(t.opacity=_(0,n.opacity??1,tp(s)),t.opacityExit=_(e.opacity??1,0,ep(s))):i&&(t.opacity=_(e.opacity??1,n.opacity??1,s));for(let o=0;o<Zd;o++){const a=`border${Aa[o]}Radius`;let c=qr(e,a),u=qr(n,a);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||Yr(c)===Yr(u)?(t[a]=Math.max(_(Hr(c),Hr(u),s),0),(rt.test(u)||rt.test(c))&&(t[a]+="%")):t[a]=u}(e.rotate||n.rotate)&&(t.rotate=_(e.rotate||0,n.rotate||0,s))}function qr(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const tp=Ea(0,.5,So),ep=Ea(.5,.95,Z);function Ea(t,e,n){return s=>s<t?0:s>e?1:n(Xt(t,e,s))}function np(t,e,n){const s=z(t)?t:Lt(t);return s.start(ys("",s,e,n)),s.animation}function te(t,e,n,s={passive:!0}){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n)}const sp=(t,e)=>t.depth-e.depth;class rp{constructor(){this.children=[],this.isDirty=!1}add(e){ts(this.children,e),this.isDirty=!0}remove(e){es(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(sp),this.isDirty=!1,this.children.forEach(e)}}function ip(t,e){const n=W.now(),s=({timestamp:r})=>{const i=r-n;i>=e&&(mt(s),t(i-e))};return C.setup(s,!0),()=>mt(s)}function Se(t){return z(t)?t.get():t}class op{constructor(){this.members=[]}add(e){ts(this.members,e),e.scheduleRender()}remove(e){if(es(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let s;for(let r=n;r>=0;r--){const i=this.members[r];if(i.isPresent!==!1){s=i;break}}return s?(this.promote(s),!0):!1}promote(e,n){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,n&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:s}=e;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const be={hasAnimatedSinceResize:!0,hasEverUpdated:!1},nn=["","X","Y","Z"],ap=1e3;let cp=0;function sn(t,e,n,s){const{latestValues:r}=e;r[t]&&(n[t]=r[t],e.setStaticValue(t,0),s&&(s[t]=0))}function Da(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=Go(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:r,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",C,!(r||i))}const{parent:s}=t;s&&!s.hasCheckedOptimisedAppear&&Da(s)}function Ia({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:s,resetTransform:r}){return class{constructor(o={},a=e?.()){this.id=cp++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(fp),this.nodes.forEach(mp),this.nodes.forEach(gp),this.nodes.forEach(hp)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new rp)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new rs),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const c=this.eventHandlers.get(o);c&&c.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=ra(o)&&!ud(o),this.instance=o;const{layoutId:a,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||a)&&(this.isLayoutDirty=!0),t){let l,f=0;const h=()=>this.root.updateBlockedByResize=!1;C.read(()=>{f=window.innerWidth}),t(o,()=>{const g=window.innerWidth;g!==f&&(f=g,this.root.updateBlockedByResize=!0,l&&l(),l=ip(h,250),be.hasAnimatedSinceResize&&(be.hasAnimatedSinceResize=!1,this.nodes.forEach(Zr)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&u&&(a||c)&&this.addEventListener("didUpdate",({delta:l,hasLayoutChanged:f,hasRelativeLayoutChanged:h,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const m=this.options.transition||u.getDefaultTransition()||wp,{onLayoutAnimationStart:p,onLayoutAnimationComplete:d}=u.getProps(),y=!this.targetLayout||!Pa(this.targetLayout,g),S=!f&&h;if(this.options.layoutRoot||this.resumeFrom||S||f&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const v={...gs(m,"layout"),onPlay:p,onComplete:d};(u.shouldReduceMotion||this.options.layoutRoot)&&(v.delay=0,v.type=!1),this.startAnimation(v),this.setAnimationOrigin(l,S)}else f||Zr(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),mt(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(yp),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Da(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let l=0;l<this.path.length;l++){const f=this.path[l];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:c}=this.options;if(a===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Xr);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Jr);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(pp),this.nodes.forEach(up),this.nodes.forEach(lp)):this.nodes.forEach(Jr),this.clearAllSnapshots();const a=W.now();j.delta=it(0,1e3/60,a-j.timestamp),j.timestamp=a,j.isProcessing=!0,Ye.update.process(j),Ye.preRender.process(j),Ye.render.process(j),j.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,ws.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(dp),this.sharedNodes.forEach(vp)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,C.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){C.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!K(this.snapshot.measuredBox.x)&&!K(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=B(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const c=s(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!xa(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,l=u!==this.prevTransformTemplateValue;o&&this.instance&&(a||bt(this.latestValues)||l)&&(r(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let c=this.removeElementScroll(a);return o&&(c=this.removeTransform(c)),Tp(c),{animationId:this.root.animationId,measuredBox:a,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return B();const a=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(xp))){const{scroll:u}=this.root;u&&(Ot(a.x,u.offset.x),Ot(a.y,u.offset.y))}return a}removeElementScroll(o){const a=B();if(Q(a,o),this.scroll?.wasRoot)return a;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:l,options:f}=u;u!==this.root&&l&&f.layoutScroll&&(l.wasRoot&&Q(a,o),Ot(a.x,l.offset.x),Ot(a.y,l.offset.y))}return a}applyTransform(o,a=!1){const c=B();Q(c,o);for(let u=0;u<this.path.length;u++){const l=this.path[u];!a&&l.options.layoutScroll&&l.scroll&&l!==l.root&&Mt(c,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),bt(l.latestValues)&&Mt(c,l.latestValues)}return bt(this.latestValues)&&Mt(c,this.latestValues),c}removeTransform(o){const a=B();Q(a,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!bt(u.latestValues))continue;Cn(u.latestValues)&&u.updateSnapshot();const l=B(),f=u.measurePageBox();Q(l,f),Ur(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,l)}return bt(this.latestValues)&&Ur(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==j.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==a;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:l,layoutId:f}=this.options;if(!this.layout||!(l||f))return;this.resolvedRelativeTargetAt=j.timestamp;const h=this.getClosestProjectingParent();h&&this.linkedParentVersion!==h.layoutVersion&&!h.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(h&&h.layout?this.createRelativeTarget(h,this.layout.layoutBox,h.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=B(),this.targetWithTransforms=B()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Gd(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Q(this.target,this.layout.layoutBox),fa(this.target,this.targetDelta)):Q(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,h&&!!h.resumingFrom==!!this.resumingFrom&&!h.options.layoutScroll&&h.target&&this.animationProgress!==1?this.createRelativeTarget(h,this.target,h.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Cn(this.parent.latestValues)||la(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(o,a,c){this.relativeParent=o,this.linkedParentVersion=o.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=B(),this.relativeTargetOrigin=B(),Me(this.relativeTargetOrigin,a,c),Q(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const o=this.getLead(),a=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(c=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===j.timestamp&&(c=!1),c)return;const{layout:u,layoutId:l}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||l))return;Q(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,h=this.treeScale.y;wd(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=B());const{target:g}=o;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Vr(this.prevProjectionDelta.x,this.projectionDelta.x),Vr(this.prevProjectionDelta.y,this.projectionDelta.y)),Gt(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==h||!Gr(this.projectionDelta.x,this.prevProjectionDelta.x)||!Gr(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Rt(),this.projectionDelta=Rt(),this.projectionDeltaWithTransform=Rt()}setAnimationOrigin(o,a=!1){const c=this.snapshot,u=c?c.latestValues:{},l={...this.latestValues},f=Rt();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const h=B(),g=c?c.source:void 0,m=this.layout?this.layout.source:void 0,p=g!==m,d=this.getStack(),y=!d||d.members.length<=1,S=!!(p&&!y&&this.options.crossfade===!0&&!this.path.some(bp));this.animationProgress=0;let v;this.mixTargetDelta=b=>{const x=b/1e3;Qr(f.x,o.x,x),Qr(f.y,o.y,x),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Me(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Sp(this.relativeTarget,this.relativeTargetOrigin,h,x),v&&Xd(this.relativeTarget,v)&&(this.isProjectionDirty=!1),v||(v=B()),Q(v,this.relativeTarget)),p&&(this.animationValues=l,Qd(l,u,this.latestValues,x,S,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=x},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(mt(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=C.update(()=>{be.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Lt(0)),this.currentAnimation=np(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(ap),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:c,layout:u,latestValues:l}=o;if(!(!a||!c||!u)){if(this!==o&&this.layout&&u&&Ra(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||B();const f=K(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+f;const h=K(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+h}Q(a,c),Mt(a,l),Gt(this.projectionDeltaWithTransform,this.layoutCorrected,a,l)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new op),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(a=!0),!a)return;const u={};c.z&&sn("z",o,u,this.animationValues);for(let l=0;l<nn.length;l++)sn(`rotate${nn[l]}`,o,u,this.animationValues),sn(`skew${nn[l]}`,o,u,this.animationValues);o.render();for(const l in u)o.setStaticValue(l,u[l]),this.animationValues&&(this.animationValues[l]=u[l]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=Se(a?.pointerEvents)||"",o.transform=c?c(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=Se(a?.pointerEvents)||""),this.hasProjected&&!bt(this.latestValues)&&(o.transform=c?c({},""):"none",this.hasProjected=!1);return}o.visibility="";const l=u.animationValues||u.latestValues;this.applyTransformsToTarget();let f=Jd(this.projectionDeltaWithTransform,this.treeScale,l);c&&(f=c(l,f)),o.transform=f;const{x:h,y:g}=this.projectionDelta;o.transformOrigin=`${h.origin*100}% ${g.origin*100}% 0`,u.animationValues?o.opacity=u===this?l.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:l.opacityExit:o.opacity=u===this?l.opacity!==void 0?l.opacity:"":l.opacityExit!==void 0?l.opacityExit:0;for(const m in _n){if(l[m]===void 0)continue;const{correct:p,applyTo:d,isCSSVariable:y}=_n[m],S=f==="none"?l[m]:p(l[m],u);if(d){const v=d.length;for(let b=0;b<v;b++)o[d[b]]=S}else y?this.options.visualElement.renderState.vars[m]=S:o[m]=S}this.options.layoutId&&(o.pointerEvents=u===this?Se(a?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(Xr),this.root.sharedNodes.clear()}}}function up(t){t.updateLayout()}function lp(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:s}=t.layout,{animationType:r}=t.options,i=e.source!==t.layout.source;r==="size"?X(l=>{const f=i?e.measuredBox[l]:e.layoutBox[l],h=K(f);f.min=n[l].min,f.max=f.min+h}):Ra(r,e.layoutBox,n)&&X(l=>{const f=i?e.measuredBox[l]:e.layoutBox[l],h=K(n[l]);f.max=f.min+h,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[l].max=t.relativeTarget[l].min+h)});const o=Rt();Gt(o,n,e.layoutBox);const a=Rt();i?Gt(a,t.applyTransform(s,!0),e.measuredBox):Gt(a,n,e.layoutBox);const c=!xa(o);let u=!1;if(!t.resumeFrom){const l=t.getClosestProjectingParent();if(l&&!l.resumeFrom){const{snapshot:f,layout:h}=l;if(f&&h){const g=B();Me(g,e.layoutBox,f.layoutBox);const m=B();Me(m,n,h.layoutBox),Pa(g,m)||(u=!0),l.options.layoutRoot&&(t.relativeTarget=m,t.relativeTargetOrigin=g,t.relativeParent=l)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:a,layoutDelta:o,hasLayoutChanged:c,hasRelativeLayoutChanged:u})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function fp(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function hp(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function dp(t){t.clearSnapshot()}function Xr(t){t.clearMeasurements()}function Jr(t){t.isLayoutDirty=!1}function pp(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Zr(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function mp(t){t.resolveTargetDelta()}function gp(t){t.calcProjection()}function yp(t){t.resetSkewAndRotation()}function vp(t){t.removeLeadSnapshot()}function Qr(t,e,n){t.translate=_(e.translate,0,n),t.scale=_(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function ti(t,e,n,s){t.min=_(e.min,n.min,s),t.max=_(e.max,n.max,s)}function Sp(t,e,n,s){ti(t.x,e.x,n.x,s),ti(t.y,e.y,n.y,s)}function bp(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const wp={duration:.45,ease:[.4,0,.1,1]},ei=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),ni=ei("applewebkit/")&&!ei("chrome/")?Math.round:Z;function si(t){t.min=ni(t.min),t.max=ni(t.max)}function Tp(t){si(t.x),si(t.y)}function Ra(t,e,n){return t==="position"||t==="preserve-aspect"&&!Kd(Kr(e),Kr(n),.2)}function xp(t){return t!==t.root&&t.scroll?.wasRoot}const Pp=Ia({attachResizeListener:(t,e)=>te(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),rn={current:void 0},Oa=Ia({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!rn.current){const t=new Pp({});t.mount(window),t.setOptions({layoutScroll:!0}),rn.current=t}return rn.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Ds=P.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function ri(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Ap(...t){return e=>{let n=!1;const s=t.map(r=>{const i=ri(r,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let r=0;r<s.length;r++){const i=s[r];typeof i=="function"?i():ri(t[r],null)}}}}function Ep(...t){return P.useCallback(Ap(...t),t)}class Dp extends P.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const s=n.offsetParent,r=Qo(s)&&s.offsetWidth||0,i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft,i.right=r-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Ip({children:t,isPresent:e,anchorX:n,root:s}){const r=P.useId(),i=P.useRef(null),o=P.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=P.useContext(Ds),c=t.props?.ref??t?.ref,u=Ep(i,c);return P.useInsertionEffect(()=>{const{width:l,height:f,top:h,left:g,right:m}=o.current;if(e||!i.current||!l||!f)return;const p=n==="left"?`left: ${g}`:`right: ${m}`;i.current.dataset.motionPopId=r;const d=document.createElement("style");a&&(d.nonce=a);const y=s??document.head;return y.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${f}px !important;
            ${p}px !important;
            top: ${h}px !important;
          }
        `),()=>{y.contains(d)&&y.removeChild(d)}},[e]),k.jsx(Dp,{isPresent:e,childRef:i,sizeRef:o,children:P.cloneElement(t,{ref:u})})}const Rp=({children:t,initial:e,isPresent:n,onExitComplete:s,custom:r,presenceAffectsLayout:i,mode:o,anchorX:a,root:c})=>{const u=Qn(Op),l=P.useId();let f=!0,h=P.useMemo(()=>(f=!1,{id:l,initial:e,isPresent:n,custom:r,onExitComplete:g=>{u.set(g,!0);for(const m of u.values())if(!m)return;s&&s()},register:g=>(u.set(g,!1),()=>u.delete(g))}),[n,u,s]);return i&&f&&(h={...h}),P.useMemo(()=>{u.forEach((g,m)=>u.set(m,!1))},[n]),P.useEffect(()=>{!n&&!u.size&&s&&s()},[n]),o==="popLayout"&&(t=k.jsx(Ip,{isPresent:n,anchorX:a,root:c,children:t})),k.jsx(Ve.Provider,{value:h,children:t})};function Op(){return new Map}function Ma(t=!0){const e=P.useContext(Ve);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:s,register:r}=e,i=P.useId();P.useEffect(()=>{if(t)return r(i)},[t]);const o=P.useCallback(()=>t&&s&&s(i),[i,s,t]);return!n&&s?[!1,o]:[!0]}const me=t=>t.key||"";function ii(t){const e=[];return P.Children.forEach(t,n=>{P.isValidElement(n)&&e.push(n)}),e}const Mp=({children:t,custom:e,initial:n=!0,onExitComplete:s,presenceAffectsLayout:r=!0,mode:i="sync",propagate:o=!1,anchorX:a="left",root:c})=>{const[u,l]=Ma(o),f=P.useMemo(()=>ii(t),[t]),h=o&&!u?[]:f.map(me),g=P.useRef(!0),m=P.useRef(f),p=Qn(()=>new Map),d=P.useRef(new Set),[y,S]=P.useState(f),[v,b]=P.useState(f);ao(()=>{g.current=!1,m.current=f;for(let w=0;w<v.length;w++){const T=me(v[w]);h.includes(T)?(p.delete(T),d.current.delete(T)):p.get(T)!==!0&&p.set(T,!1)}},[v,h.length,h.join("-")]);const x=[];if(f!==y){let w=[...f];for(let T=0;T<v.length;T++){const D=v[T],O=me(D);h.includes(O)||(w.splice(T,0,D),x.push(D))}return i==="wait"&&x.length&&(w=x),b(ii(w)),S(f),null}const{forceRender:A}=P.useContext(Zn);return k.jsx(k.Fragment,{children:v.map(w=>{const T=me(w),D=o&&!u?!1:f===v||h.includes(T),O=()=>{if(d.current.has(T))return;if(d.current.add(T),p.has(T))p.set(T,!0);else return;let L=!0;p.forEach(G=>{G||(L=!1)}),L&&(A?.(),b(m.current),o&&l?.(),s&&s())};return k.jsx(Rp,{isPresent:D,initial:!g.current||n?void 0:!1,custom:e,presenceAffectsLayout:r,mode:i,root:c,onExitComplete:D?void 0:O,anchorX:a,children:w},T)})})},Ca=P.createContext({strict:!1}),oi={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let ai=!1;function Cp(){if(ai)return;const t={};for(const e in oi)t[e]={isEnabled:n=>oi[e].some(s=>!!n[s])};aa(t),ai=!0}function ka(){return Cp(),yd()}function kp(t){const e=ka();for(const n in t)e[n]={...e[n],...t[n]};aa(e)}const _p=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ce(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||_p.has(t)}let _a=t=>!Ce(t);function Vp(t){typeof t=="function"&&(_a=e=>e.startsWith("on")?!Ce(e):t(e))}try{Vp(require("@emotion/is-prop-valid").default)}catch{}function Lp(t,e,n){const s={};for(const r in t)r==="values"&&typeof t.values=="object"||(_a(r)||n===!0&&Ce(r)||!e&&!Ce(r)||t.draggable&&r.startsWith("onDrag"))&&(s[r]=t[r]);return s}const Be=P.createContext({});function Np(t,e){if(Ne(t)){const{initial:n,animate:s}=t;return{initial:n===!1||Qt(n)?n:void 0,animate:Qt(s)?s:void 0}}return t.inherit!==!1?e:{}}function Bp(t){const{initial:e,animate:n}=Np(t,P.useContext(Be));return P.useMemo(()=>({initial:e,animate:n}),[ci(e),ci(n)])}function ci(t){return Array.isArray(t)?t.join(" "):t}const Is=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Va(t,e,n){for(const s in e)!z(e[s])&&!pa(s,n)&&(t[s]=e[s])}function Fp({transformTemplate:t},e){return P.useMemo(()=>{const n=Is();return As(n,e,t),Object.assign({},n.vars,n.style)},[e])}function jp(t,e){const n=t.style||{},s={};return Va(s,n,t),Object.assign(s,Fp(t,e)),s}function Up(t,e){const n={},s=jp(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=s,n}const La=()=>({...Is(),attrs:{}});function zp(t,e,n,s){const r=P.useMemo(()=>{const i=La();return ma(i,e,ya(s),t.transformTemplate,t.style),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};Va(i,t.style,t),r.style={...i,...r.style}}return r}const $p=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Rs(t){return typeof t!="string"||t.includes("-")?!1:!!($p.indexOf(t)>-1||/[A-Z]/u.test(t))}function Wp(t,e,n,{latestValues:s},r,i=!1,o){const c=(o??Rs(t)?zp:Up)(e,s,r,t),u=Lp(e,typeof t=="string",i),l=t!==P.Fragment?{...u,...c,ref:n}:{},{children:f}=e,h=P.useMemo(()=>z(f)?f.get():f,[f]);return P.createElement(t,{...l,children:h})}function Kp({scrapeMotionValuesFromProps:t,createRenderState:e},n,s,r){return{latestValues:Gp(n,s,r,t),renderState:e()}}function Gp(t,e,n,s){const r={},i=s(t,{});for(const h in i)r[h]=Se(i[h]);let{initial:o,animate:a}=t;const c=Ne(t),u=oa(t);e&&u&&!c&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let l=n?n.initial===!1:!1;l=l||o===!1;const f=l?a:o;if(f&&typeof f!="boolean"&&!Le(f)){const h=Array.isArray(f)?f:[f];for(let g=0;g<h.length;g++){const m=vs(t,h[g]);if(m){const{transitionEnd:p,transition:d,...y}=m;for(const S in y){let v=y[S];if(Array.isArray(v)){const b=l?v.length-1:0;v=v[b]}v!==null&&(r[S]=v)}for(const S in p)r[S]=p[S]}}}return r}const Na=t=>(e,n)=>{const s=P.useContext(Be),r=P.useContext(Ve),i=()=>Kp(t,e,s,r);return n?i():Qn(i)},Hp=Na({scrapeMotionValuesFromProps:Es,createRenderState:Is}),Yp=Na({scrapeMotionValuesFromProps:va,createRenderState:La}),qp=Symbol.for("motionComponentSymbol");function Xp(t,e,n){const s=P.useRef(n);P.useInsertionEffect(()=>{s.current=n});const r=P.useRef(null);return P.useCallback(i=>{i&&t.onMount?.(i),e&&(i?e.mount(i):e.unmount());const o=s.current;if(typeof o=="function")if(i){const a=o(i);typeof a=="function"&&(r.current=a)}else r.current?(r.current(),r.current=null):o(i);else o&&(o.current=i)},[e])}const Ba=P.createContext({});function $t(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Jp(t,e,n,s,r,i){const{visualElement:o}=P.useContext(Be),a=P.useContext(Ca),c=P.useContext(Ve),u=P.useContext(Ds).reducedMotion,l=P.useRef(null);s=s||a.renderer,!l.current&&s&&(l.current=s(t,{visualState:e,parent:o,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u,isSVG:i}));const f=l.current,h=P.useContext(Ba);f&&!f.projection&&r&&(f.type==="html"||f.type==="svg")&&Zp(l.current,n,r,h);const g=P.useRef(!1);P.useInsertionEffect(()=>{f&&g.current&&f.update(n,c)});const m=n[Ko],p=P.useRef(!!m&&!window.MotionHandoffIsComplete?.(m)&&window.MotionHasOptimisedAnimation?.(m));return ao(()=>{f&&(g.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),f.scheduleRenderMicrotask(),p.current&&f.animationState&&f.animationState.animateChanges())}),P.useEffect(()=>{f&&(!p.current&&f.animationState&&f.animationState.animateChanges(),p.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(m)}),p.current=!1),f.enteringChildren=void 0)}),f}function Zp(t,e,n,s){const{layoutId:r,layout:i,drag:o,dragConstraints:a,layoutScroll:c,layoutRoot:u,layoutCrossfade:l}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:Fa(t.parent)),t.projection.setOptions({layoutId:r,layout:i,alwaysMeasureLayout:!!o||a&&$t(a),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:s,crossfade:l,layoutScroll:c,layoutRoot:u})}function Fa(t){if(t)return t.options.allowProjection!==!1?t.projection:Fa(t.parent)}function on(t,{forwardMotionProps:e=!1,type:n}={},s,r){s&&kp(s);const i=n?n==="svg":Rs(t),o=i?Yp:Hp;function a(u,l){let f;const h={...P.useContext(Ds),...u,layoutId:Qp(u)},{isStatic:g}=h,m=Bp(u),p=o(u,g);if(!g&&oo){tm();const d=em(h);f=d.MeasureLayout,m.visualElement=Jp(t,p,h,r,d.ProjectionNode,i)}return k.jsxs(Be.Provider,{value:m,children:[f&&m.visualElement?k.jsx(f,{visualElement:m.visualElement,...h}):null,Wp(t,u,Xp(p,m.visualElement,l),p,g,e,i)]})}a.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const c=P.forwardRef(a);return c[qp]=t,c}function Qp({layoutId:t}){const e=P.useContext(Zn).id;return e&&t!==void 0?e+"-"+t:t}function tm(t,e){P.useContext(Ca).strict}function em(t){const e=ka(),{drag:n,layout:s}=e;if(!n&&!s)return{};const r={...n,...s};return{MeasureLayout:n?.isEnabled(t)||s?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function nm(t,e){if(typeof Proxy>"u")return on;const n=new Map,s=(i,o)=>on(i,o,t,e),r=(i,o)=>s(i,o);return new Proxy(r,{get:(i,o)=>o==="create"?s:(n.has(o)||n.set(o,on(o,void 0,t,e)),n.get(o))})}const sm=(t,e)=>e.isSVG??Rs(t)?new _d(e):new Id(e,{allowProjection:t!==P.Fragment});class rm extends yt{constructor(e){super(e),e.animationState||(e.animationState=Fd(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Le(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let im=0;class om extends yt{constructor(){super(...arguments),this.id=im++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const r=this.node.animationState.setActive("exit",!e);n&&!e&&r.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const am={animation:{Feature:rm},exit:{Feature:om}};function ce(t){return{point:{x:t.pageX,y:t.pageY}}}const cm=t=>e=>Ts(e)&&t(e,ce(e));function Ht(t,e,n,s){return te(t,e,cm(n),s)}const ja=({current:t})=>t?t.ownerDocument.defaultView:null,ui=(t,e)=>Math.abs(t-e);function um(t,e){const n=ui(t.x,e.x),s=ui(t.y,e.y);return Math.sqrt(n**2+s**2)}const li=new Set(["auto","scroll"]);class Ua{constructor(e,n,{transformPagePoint:s,contextWindow:r=window,dragSnapToOrigin:i=!1,distanceThreshold:o=3,element:a}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=g=>{this.handleScroll(g.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=cn(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,p=um(g.offset,{x:0,y:0})>=this.distanceThreshold;if(!m&&!p)return;const{point:d}=g,{timestamp:y}=j;this.history.push({...d,timestamp:y});const{onStart:S,onMove:v}=this.handlers;m||(S&&S(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,g)},this.handlePointerMove=(g,m)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=an(m,this.transformPagePoint),C.update(this.updatePoint,!0)},this.handlePointerUp=(g,m)=>{this.end();const{onEnd:p,onSessionEnd:d,resumeAnimation:y}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&y&&y(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=cn(g.type==="pointercancel"?this.lastMoveEventInfo:an(m,this.transformPagePoint),this.history);this.startEvent&&p&&p(g,S),d&&d(g,S)},!Ts(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=s,this.distanceThreshold=o,this.contextWindow=r||window;const c=ce(e),u=an(c,this.transformPagePoint),{point:l}=u,{timestamp:f}=j;this.history=[{...l,timestamp:f}];const{onSessionStart:h}=n;h&&h(e,cn(u,this.history)),this.removeListeners=ie(Ht(this.contextWindow,"pointermove",this.handlePointerMove),Ht(this.contextWindow,"pointerup",this.handlePointerUp),Ht(this.contextWindow,"pointercancel",this.handlePointerUp)),a&&this.startScrollTracking(a)}startScrollTracking(e){let n=e.parentElement;for(;n;){const s=getComputedStyle(n);(li.has(s.overflowX)||li.has(s.overflowY))&&this.scrollPositions.set(n,{x:n.scrollLeft,y:n.scrollTop}),n=n.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const n=this.scrollPositions.get(e);if(!n)return;const s=e===window,r=s?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},i={x:r.x-n.x,y:r.y-n.y};i.x===0&&i.y===0||(s?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=i.x,this.lastMoveEventInfo.point.y+=i.y):this.history.length>0&&(this.history[0].x-=i.x,this.history[0].y-=i.y),this.scrollPositions.set(e,r),C.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),mt(this.updatePoint)}}function an(t,e){return e?{point:e(t.point)}:t}function fi(t,e){return{x:t.x-e.x,y:t.y-e.y}}function cn({point:t},e){return{point:t,delta:fi(t,za(e)),offset:fi(t,lm(e)),velocity:fm(e,.1)}}function lm(t){return t[0]}function za(t){return t[t.length-1]}function fm(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,s=null;const r=za(t);for(;n>=0&&(s=t[n],!(r.timestamp-s.timestamp>ct(e)));)n--;if(!s)return{x:0,y:0};const i=J(r.timestamp-s.timestamp);if(i===0)return{x:0,y:0};const o={x:(r.x-s.x)/i,y:(r.y-s.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function hm(t,{min:e,max:n},s){return e!==void 0&&t<e?t=s?_(e,t,s.min):Math.max(t,e):n!==void 0&&t>n&&(t=s?_(n,t,s.max):Math.min(t,n)),t}function hi(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function dm(t,{top:e,left:n,bottom:s,right:r}){return{x:hi(t.x,n,r),y:hi(t.y,e,s)}}function di(t,e){let n=e.min-t.min,s=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,s]=[s,n]),{min:n,max:s}}function pm(t,e){return{x:di(t.x,e.x),y:di(t.y,e.y)}}function mm(t,e){let n=.5;const s=K(t),r=K(e);return r>s?n=Xt(e.min,e.max-s,t.min):s>r&&(n=Xt(t.min,t.max-r,e.min)),it(0,1,n)}function gm(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Vn=.35;function ym(t=Vn){return t===!1?t=0:t===!0&&(t=Vn),{x:pi(t,"left","right"),y:pi(t,"top","bottom")}}function pi(t,e,n){return{min:mi(t,e),max:mi(t,n)}}function mi(t,e){return typeof t=="number"?t:t[e]||0}const vm=new WeakMap;class Sm{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=B(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:s}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=f=>{n?(this.stopAnimation(),this.snapToCursor(ce(f).point)):this.pauseAnimation()},o=(f,h)=>{this.stopAnimation();const{drag:g,dragPropagation:m,onDragStart:p}=this.getProps();if(g&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=rd(g),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=h,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),X(y=>{let S=this.getAxisMotionValue(y).get()||0;if(rt.test(S)){const{projection:v}=this.visualElement;if(v&&v.layout){const b=v.layout.layoutBox[y];b&&(S=K(b)*(parseFloat(S)/100))}}this.originPoint[y]=S}),p&&C.postRender(()=>p(f,h)),In(this.visualElement,"transform");const{animationState:d}=this.visualElement;d&&d.setActive("whileDrag",!0)},a=(f,h)=>{this.latestPointerEvent=f,this.latestPanInfo=h;const{dragPropagation:g,dragDirectionLock:m,onDirectionLock:p,onDrag:d}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:y}=h;if(m&&this.currentDirection===null){this.currentDirection=bm(y),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",h.point,y),this.updateAxis("y",h.point,y),this.visualElement.render(),d&&d(f,h)},c=(f,h)=>{this.latestPointerEvent=f,this.latestPanInfo=h,this.stop(f,h),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>X(f=>this.getAnimationState(f)==="paused"&&this.getAxisMotionValue(f).animation?.play()),{dragSnapToOrigin:l}=this.getProps();this.panSession=new Ua(e,{onSessionStart:i,onStart:o,onMove:a,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:l,distanceThreshold:s,contextWindow:ja(this.visualElement),element:this.visualElement.current})}stop(e,n){const s=e||this.latestPointerEvent,r=n||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!r||!s)return;const{velocity:o}=r;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&C.postRender(()=>a(s,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,s){const{drag:r}=this.getProps();if(!s||!ge(e,r,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(o=hm(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,r=this.constraints;e&&$t(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&s?this.constraints=dm(s.layoutBox,e):this.constraints=!1,this.elastic=ym(n),r!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&X(i=>{this.constraints!==!1&&this.getAxisMotionValue(i)&&(this.constraints[i]=gm(s.layoutBox[i],this.constraints[i]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!$t(e))return!1;const s=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const i=Td(s,r.root,this.visualElement.getTransformPagePoint());let o=pm(r.layout.layoutBox,i);if(n){const a=n(Sd(o));this.hasMutatedConstraints=!!a,a&&(o=ua(a))}return o}startAnimation(e){const{drag:n,dragMomentum:s,dragElastic:r,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),c=this.constraints||{},u=X(l=>{if(!ge(l,n,this.currentDirection))return;let f=c&&c[l]||{};o&&(f={min:0,max:0});const h=r?200:1e6,g=r?40:1e7,m={type:"inertia",velocity:s?e[l]:0,bounceStiffness:h,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...i,...f};return this.startAxisValueAnimation(l,m)});return Promise.all(u).then(a)}startAxisValueAnimation(e,n){const s=this.getAxisMotionValue(e);return In(this.visualElement,e),s.start(ys(e,s,0,n,this.visualElement,!1))}stopAnimation(){X(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){X(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,s=this.visualElement.getProps(),r=s[n];return r||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){X(n=>{const{drag:s}=this.getProps();if(!ge(n,s,this.currentDirection))return;const{projection:r}=this.visualElement,i=this.getAxisMotionValue(n);if(r&&r.layout){const{min:o,max:a}=r.layout.layoutBox[n],c=i.get()||0;i.set(e[n]-_(o,a,.5)+c)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!$t(n)||!s||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};X(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const c=a.get();r[o]=mm({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),X(o=>{if(!ge(o,e,null))return;const a=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];a.set(_(c,u,r[o]))})}addListeners(){if(!this.visualElement.current)return;vm.set(this.visualElement,this);const e=this.visualElement.current,n=Ht(e,"pointerdown",c=>{const{drag:u,dragListener:l=!0}=this.getProps();u&&l&&!sa(c.target)&&this.start(c)}),s=()=>{const{dragConstraints:c}=this.getProps();$t(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,i=r.addEventListener("measure",s);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),C.read(s);const o=te(window,"resize",()=>this.scalePositionWithinConstraints()),a=r.addEventListener("didUpdate",(({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(X(l=>{const f=this.getAxisMotionValue(l);f&&(this.originPoint[l]+=c[l].translate,f.set(f.get()+c[l].translate))}),this.visualElement.render())}));return()=>{o(),n(),i(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:r=!1,dragConstraints:i=!1,dragElastic:o=Vn,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:s,dragPropagation:r,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function ge(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function bm(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class wm extends yt{constructor(e){super(e),this.removeGroupControls=Z,this.removeListeners=Z,this.controls=new Sm(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Z}update(){const{dragControls:e}=this.node.getProps(),{dragControls:n}=this.node.prevProps||{};e!==n&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners()}}const gi=t=>(e,n)=>{t&&C.postRender(()=>t(e,n))};class Tm extends yt{constructor(){super(...arguments),this.removePointerDownListener=Z}onPointerDown(e){this.session=new Ua(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:ja(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:s,onPanEnd:r}=this.node.getProps();return{onSessionStart:gi(e),onStart:gi(n),onMove:s,onEnd:(i,o)=>{delete this.session,r&&C.postRender(()=>r(i,o))}}}mount(){this.removePointerDownListener=Ht(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let un=!1;class xm extends P.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s,layoutId:r}=this.props,{projection:i}=e;i&&(n.group&&n.group.add(i),s&&s.register&&r&&s.register(i),un&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),be.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:s,drag:r,isPresent:i}=this.props,{projection:o}=s;return o&&(o.isPresent=i,un=!0,r||e.layoutDependency!==n||n===void 0||e.isPresent!==i?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||C.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),ws.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:r}=e;un=!0,r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),s&&s.deregister&&s.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function $a(t){const[e,n]=Ma(),s=P.useContext(Zn);return k.jsx(xm,{...t,layoutGroup:s,switchLayoutGroup:P.useContext(Ba),isPresent:e,safeToRemove:n})}const Pm={pan:{Feature:Tm},drag:{Feature:wm,ProjectionNode:Oa,MeasureLayout:$a}};function yi(t,e,n){const{props:s}=t;t.animationState&&s.whileHover&&t.animationState.setActive("whileHover",n==="Start");const r="onHover"+n,i=s[r];i&&C.postRender(()=>i(e,ce(e)))}class Am extends yt{mount(){const{current:e}=this.node;e&&(this.unmount=id(e,(n,s)=>(yi(this.node,s,"Start"),r=>yi(this.node,r,"End"))))}unmount(){}}class Em extends yt{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ie(te(this.node.current,"focus",()=>this.onFocus()),te(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function vi(t,e,n){const{props:s}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&s.whileTap&&t.animationState.setActive("whileTap",n==="Start");const r="onTap"+(n==="End"?"":n),i=s[r];i&&C.postRender(()=>i(e,ce(e)))}class Dm extends yt{mount(){const{current:e}=this.node;e&&(this.unmount=cd(e,(n,s)=>(vi(this.node,s,"Start"),(r,{success:i})=>vi(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Ln=new WeakMap,ln=new WeakMap,Im=t=>{const e=Ln.get(t.target);e&&e(t)},Rm=t=>{t.forEach(Im)};function Om({root:t,...e}){const n=t||document;ln.has(n)||ln.set(n,{});const s=ln.get(n),r=JSON.stringify(e);return s[r]||(s[r]=new IntersectionObserver(Rm,{root:t,...e})),s[r]}function Mm(t,e,n){const s=Om(e);return Ln.set(t,n),s.observe(t),()=>{Ln.delete(t),s.unobserve(t)}}const Cm={some:0,all:1};class km extends yt{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:s,amount:r="some",once:i}=e,o={root:n?n.current:void 0,rootMargin:s,threshold:typeof r=="number"?r:Cm[r]},a=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:l,onViewportLeave:f}=this.node.getProps(),h=u?l:f;h&&h(c)};return Mm(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(_m(e,n))&&this.startObserver()}unmount(){}}function _m({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const Vm={inView:{Feature:km},tap:{Feature:Dm},focus:{Feature:Em},hover:{Feature:Am}},Lm={layout:{ProjectionNode:Oa,MeasureLayout:$a}},Nm={...am,...Vm,...Pm,...Lm},Si=nm(Nm,sm),Bm={open:{transition:{delayChildren:xr(.05)}},closed:{transition:{delayChildren:xr(.05,{from:"last"})}}},Fm={open:{height:"auto",opacity:1,transition:{type:"spring",stiffness:300,damping:24}},closed:{height:0,opacity:0,transition:{type:"spring",stiffness:300,damping:24}}};function jm({items:t,keyFunc:e,renderItem:n,...s}){return k.jsx(Mp,{children:t.length>0&&k.jsx(Si.div,{variants:Bm,initial:"closed",animate:"open",exit:"closed",...s,children:t.map((r,i)=>k.jsx(Si.div,{variants:Fm,children:n(r,i)},e(r)))})})}const Um=({selected:t,result:e,...n})=>k.jsx("li",{className:`w-full m-0 p-3 ${t?"bg-primary/20":"bg-background"}`,...n,children:k.jsx("a",{href:e.url,className:"text-primary",children:e.title})});function zm({results:t,selection:e}){return k.jsx("ul",{className:"absolute w-full mt-1 overflow-hidden list-none p-0 bg-background rounded-md shadow-lg z-50",children:k.jsx(jm,{items:t,keyFunc:n=>n.url,renderItem:(n,s)=>k.jsx(Um,{selected:s===e,result:n},n.url)})})}const bi={enableOnFormTags:!0,preventDefault:!0};function $m({api:t}){const[{query:e,results:n,selection:s},r]=P.useReducer(sr,sr(void 0,Dt.reset())),i=P.useMemo(()=>new Gl(r,t),[t]);P.useEffect(()=>{const l=()=>r(Dt.reset());return document.addEventListener("astro:page-load",l),()=>document.removeEventListener("astro:page-load",l)},[]);const o=l=>{l.preventDefault(),Kl(s,n)},a=hn("up",()=>r(Dt.previousSelection()),bi),c=hn("down",()=>r(Dt.nextSelection()),bi),u=$l([a,c]);return k.jsxs("form",{className:"relative w-full m-0",onSubmit:o,ref:u,children:[k.jsx(Ql,{value:e,onChange:i.query}),k.jsx(zm,{results:n,selection:s.current})]})}const Wm=wi(Al,100),Xm=()=>k.jsx($m,{api:Wm});export{Xm as default};
