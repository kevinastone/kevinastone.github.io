<!DOCTYPE html><html lang="en"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="generator" content="Astro v5.16.8"><link rel="alternate" type="application/rss+xml" title="Kevin Stone" href="/rss.xml"><link rel="sitemap" href="/sitemap-index.xml"><title>Generate Your Tests</title><link rel="canonical" href="https://blog.kevinastone.com/generator-tests/"><meta name="description" content="Personal blog for Kevin Stone."><meta name="robots" content="index, follow"><meta property="og:title" content="Generate Your Tests"><meta property="og:type" content="article"><meta property="og:image" content><meta property="og:url" content="https://blog.kevinastone.com/generator-tests/"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@kevinastone"><meta name="keywords"><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><script type="module" src="/assets/ClientRouter.astro_astro_type_script_index_0_lang.DcSP9LZ1.js"></script><script>
// Set the theme based on the stored or system preference
(function() {
  const key = 'theme';
  const darkClass = 'dark';

  const stored = localStorage.getItem(key);
  const system = window.matchMedia('(prefers-color-scheme: dark)').matches;

  if (stored === 'dark' || ( (!stored || stored === 'system') && system)) {
    document.documentElement.classList.add(darkClass);
  } else {
    document.documentElement.classList.remove(darkClass);
  }
})();
</script><link rel="stylesheet" href="/assets/_id_.Bt0U0bYf.css">
<style>.img-wrapper[data-astro-cid-3eui6wlw]{background-color:var(--base);display:flex;position:absolute;overflow:hidden;width:100%;height:100%}.img-wrapper[data-astro-cid-3eui6wlw] .duotone-img{filter:grayscale(100%) contrast(1);mix-blend-mode:multiply;opacity:var(--opacity);object-fit:cover;width:100%;height:100%;display:block}.img-wrapper[data-astro-cid-3eui6wlw]:before{content:"";position:absolute;inset:0;background-color:var(--foreground);mix-blend-mode:overlay;z-index:1;pointer-events:none}/*! tailwindcss v4.1.18 | MIT License | https://tailwindcss.com */@layer properties{@supports (((-webkit-hyphens:none)) and (not (margin-trim:inline))) or ((-moz-orient:inline) and (not (color:rgb(from red r g b)))){*,:before,:after,::backdrop{--tw-font-weight:initial}}}.wrapper[data-astro-cid-vva3ln22]{justify-content:center;align-items:center;width:100%;display:flex;position:relative}.hero[data-astro-cid-vva3ln22]{color:#fff;margin-bottom:var(--spacing-rhythm-1\.5,calc(1.5*var(--spacing-rhythm)));padding-block:var(--spacing-rhythm-2,calc(2*var(--spacing-rhythm)));text-align:center}.hero[data-astro-cid-vva3ln22] h1{margin-top:var(--spacing-rhythm-2,calc(2*var(--spacing-rhythm)));margin-bottom:calc(var(--spacing,.25rem)*8);font-size:var(--text-4xl,2.25rem);line-height:var(--tw-leading,var(--text-4xl--line-height,calc(2.5/2.25)));--tw-font-weight:var(--font-weight-bold,700);font-weight:var(--font-weight-bold,700)}.bg[data-astro-cid-vva3ln22]{z-index:1;object-fit:cover;object-position:center;width:100%;height:100%;position:absolute;inset:0}.content[data-astro-cid-vva3ln22]{z-index:3;position:relative}@property --tw-font-weight{syntax:"*";inherits:false}
</style></head> <body> <header class="brand-bg-gradient" data-astro-cid-3ef6ksr2> <div class="navbar" data-astro-cid-3ef6ksr2> <div class="fixed-width">  <div class="row" data-astro-cid-3ef6ksr2> <div class="brand" data-astro-cid-3ef6ksr2> <a href="/" data-astro-cid-3ef6ksr2>Kevin Stone</a> </div> <div class="spacer" data-astro-cid-3ef6ksr2></div> <div class="actions" data-astro-cid-3ef6ksr2> <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).load=e;window.dispatchEvent(new Event("astro:load"));})();</script><script>(()=>{var A=Object.defineProperty;var g=(i,o,a)=>o in i?A(i,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[o]=a;var d=(i,o,a)=>g(i,typeof o!="symbol"?o+"":o,a);{let i={0:t=>m(t),1:t=>a(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(a(t)),5:t=>new Set(a(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t),11:t=>1/0*t},o=t=>{let[l,e]=t;return l in i?i[l](e):void 0},a=t=>t.map(o),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([l,e])=>[l,o(e)]));class y extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var b;if(!this.hydrator||!this.isConnected)return;let e=(b=this.parentElement)==null?void 0:b.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let c=this.querySelectorAll("astro-slot"),n={},h=this.querySelectorAll("template[data-astro-template]");for(let r of h){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(let r of c){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("name")||"default"]=r.innerHTML)}let p;try{p=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(r){let s=this.getAttribute("component-url")||"<unknown>",v=this.getAttribute("component-export");throw v&&(s+=` (export ${v})`),console.error(`[hydrate] Error parsing props for component ${s}`,this.getAttribute("props"),r),r}let u;await this.hydrator(this)(this.Component,p,n,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),c.disconnect(),this.childrenConnectedCallback()},c=new MutationObserver(()=>{var n;((n=this.lastChild)==null?void 0:n.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});c.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),c=this.getAttribute("client");if(Astro[c]===void 0){window.addEventListener(`astro:${c}`,()=>this.start(),{once:!0});return}try{await Astro[c](async()=>{let n=this.getAttribute("renderer-url"),[h,{default:p}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),u=this.getAttribute("component-export")||"default";if(!u.includes("."))this.Component=h[u];else{this.Component=h;for(let f of u.split("."))this.Component=this.Component[f]}return this.hydrator=p,this.hydrate},e,this)}catch(n){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,n)}}attributeChangedCallback(){this.hydrate()}}d(y,"observedAttributes",["props"]),customElements.get("astro-island")||customElements.define("astro-island",y)}})();</script><astro-island uid="Z15dkaB" prefix="r3" component-url="/assets/DarkModeToggle.DA6iAfKQ.js" component-export="default" renderer-url="/assets/client.BNUePGeN.js" props="{&quot;data-astro-cid-3ef6ksr2&quot;:[0,true],&quot;data-astro-transition-persist&quot;:[0,&quot;astro-kx3qnzmi-1&quot;]}" ssr client="load" opts="{&quot;name&quot;:&quot;DarkModeToggle&quot;,&quot;value&quot;:true}" data-astro-transition-persist="astro-kx3qnzmi-1" await-children><button type="button" class="text-2xl button button-icon cursor-pointer text-accent" aria-label="Change color theme"><span class="relative block w-[1em] h-[1em]"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-full w-full transition-all duration-300 ease-in-out absolute top-0 left-0 opacity-0 scale-50 -rotate-90" stroke-width="1.5"><path d="M120,40V16a8,8,0,0,1,16,0V40a8,8,0,0,1-16,0Zm72,88a64,64,0,1,1-64-64A64.07,64.07,0,0,1,192,128Zm-16,0a48,48,0,1,0-48,48A48.05,48.05,0,0,0,176,128ZM58.34,69.66A8,8,0,0,0,69.66,58.34l-16-16A8,8,0,0,0,42.34,53.66Zm0,116.68-16,16a8,8,0,0,0,11.32,11.32l16-16a8,8,0,0,0-11.32-11.32ZM192,72a8,8,0,0,0,5.66-2.34l16-16a8,8,0,0,0-11.32-11.32l-16,16A8,8,0,0,0,192,72Zm5.66,114.34a8,8,0,0,0-11.32,11.32l16,16a8,8,0,0,0,11.32-11.32ZM48,128a8,8,0,0,0-8-8H16a8,8,0,0,0,0,16H40A8,8,0,0,0,48,128Zm80,80a8,8,0,0,0-8,8v24a8,8,0,0,0,16,0V216A8,8,0,0,0,128,208Zm112-88H216a8,8,0,0,0,0,16h24a8,8,0,0,0,0-16Z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-full w-full transition-all duration-300 ease-in-out absolute top-0 left-0 opacity-0 scale-50 -rotate-90" stroke-width="1.5"><path d="M233.54,142.23a8,8,0,0,0-8-2,88.08,88.08,0,0,1-109.8-109.8,8,8,0,0,0-10-10,104.84,104.84,0,0,0-52.91,37A104,104,0,0,0,136,224a103.09,103.09,0,0,0,62.52-20.88,104.84,104.84,0,0,0,37-52.91A8,8,0,0,0,233.54,142.23ZM188.9,190.34A88,88,0,0,1,65.66,67.11a89,89,0,0,1,31.4-26A106,106,0,0,0,96,56,104.11,104.11,0,0,0,200,160a106,106,0,0,0,14.92-1.06A89,89,0,0,1,188.9,190.34Z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-full w-full transition-all duration-300 ease-in-out absolute top-0 left-0 opacity-0 scale-50 -rotate-90" stroke-width="1.5"><path d="M201.54,54.46A104,104,0,0,0,54.46,201.54,104,104,0,0,0,201.54,54.46ZM184,195.87a87.16,87.16,0,0,1-16,10.5V99.31l16-16Zm-80-32.56,16-16v68.28a88.37,88.37,0,0,1-16-3ZM88,206.37a87,87,0,0,1-16.3-10.76L88,179.31Zm48-75.06,16-16v97.32a88.37,88.37,0,0,1-16,3ZM40,128A88,88,0,0,1,184.3,60.39L60.38,184.31A87.34,87.34,0,0,1,40,128Zm160,50.59V77.41a88,88,0,0,1,0,101.18Z"></path></svg></span></button><!--astro:end--></astro-island> </div> <div class="search" data-astro-cid-3ef6ksr2> <astro-island uid="16fBbo" prefix="r4" component-url="/assets/app.kOZ4X3hs.js" component-export="default" renderer-url="/assets/client.BNUePGeN.js" props="{&quot;data-astro-cid-3ef6ksr2&quot;:[0,true]}" ssr client="load" opts="{&quot;name&quot;:&quot;Search&quot;,&quot;value&quot;:true}" await-children><form class="relative w-full m-0"><label class="
      input
      items-center
      flex
      w-full
      bg-transparent
      border
      border-accent
      rounded-sm
      text-white
      m-0
      outline-none
      py-1
      px-3
      transition-colors
      duration-500
      focus-within:bg-background
      focus-within:border-transparent
      focus-within:text-primary
      hover:bg-background
      hover:border-transparent
      hover:text-primary
    "><input class="grow appearance-none outline-none" type="search" placeholder="Search" autoComplete="off" autoCorrect="off" autoCapitalize="off" spellCheck="false" name="query" value=""/><kbd class="kbd font-mono opacity-50">⌘K</kbd></label><ul class="absolute w-full mt-1 overflow-hidden list-none p-0 bg-background rounded-md shadow-lg z-50"></ul></form><!--astro:end--></astro-island> </div> </div>  </div> </div> </header>  <div class="wrapper hero" data-astro-cid-vva3ln22> <div class="img-wrapper bg" style="--base: var(--color-primary); --foreground: var(--color-accent); --opacity: 0.8;" data-astro-cid-3eui6wlw> <picture data-astro-cid-3eui6wlw="true"> <source srcset="/assets/Transmission_Lines.BGpp6Hed_ZiREuI.avif 400w, /assets/Transmission_Lines.BGpp6Hed_1jvzNS.avif 800w, /assets/Transmission_Lines.BGpp6Hed_Z2pcBIL.avif 1200w, /assets/Transmission_Lines.BGpp6Hed_Z1et3aK.avif 1280w" type="image/avif" sizes="100vw"><source srcset="/assets/Transmission_Lines.BGpp6Hed_1wqAlJ.webp 400w, /assets/Transmission_Lines.BGpp6Hed_Z1Umi8A.webp 800w, /assets/Transmission_Lines.BGpp6Hed_Z1gB94O.webp 1200w, /assets/Transmission_Lines.BGpp6Hed_Z5RzvN.webp 1280w" type="image/webp" sizes="100vw">  <img src="/assets/Transmission_Lines.BGpp6Hed_VWIH8.jpg" srcset="/assets/Transmission_Lines.BGpp6Hed_Zez5uW.jpg 400w, /assets/Transmission_Lines.BGpp6Hed_1nO9NE.jpg 800w, /assets/Transmission_Lines.BGpp6Hed_ZdKOPS.jpg 1200w, /assets/Transmission_Lines.BGpp6Hed_VWIH8.jpg 1280w" sizes="100vw" alt="Hero background image" loading="eager" data-astro-cid-3eui6wlw="true" decoding="async" fetchpriority="auto" width="1280" height="829" class="duotone-img"> </picture> </div>  <div class="content" data-astro-cid-vva3ln22>  <div class="fixed-width">  <h1>Generate Your Tests</h1> <p class="sub-heading"> <time datetime="2015-10-12T00:00:00.000Z"> October 12, 2015 </time> </p>  </div>  </div> </div>  <main> <div class="fixed-width">    <article class="prose max-w-none"> <p>When testing your application, you’ll often come across the need to test that
your application behaves correct across a range of inputs or conditions.
Instead of repetitively defining the same test scaffolding, let’s use some
meta-programming to build our tests methods from a list of parameters.
<a href="https://nose.readthedocs.org/en/latest/">Nose</a> has support for <a href="https://nose.readthedocs.org/en/latest/writing_tests.html#test-generators">Generator Tests</a>, but they don’t
work with python’s <code>unittest</code> framework. Let’s walk-through how to build our
own test generator that does.</p>
<h2 id="our-test-case">Our Test Case</h2>
<p>So let’s write a simple application for demonstration. We want to see if our
input string is alphabetized.</p>
<pre class="astro-code catppuccin-mocha" style="background-color:#1e1e2e;color:#cdd6f4; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="python"><code><span class="line"><span style="color:#CBA6F7">def</span><span style="color:#89B4FA;font-style:italic"> is_alphabetized</span><span style="color:#9399B2">(</span><span style="color:#EBA0AC;font-style:italic">value</span><span style="color:#9399B2">):</span></span>
<span class="line"><span style="color:#CBA6F7">    return</span><span style="color:#A6E3A1"> ''</span><span style="color:#9399B2">.</span><span style="color:#89B4FA">join</span><span style="color:#9399B2">(</span><span style="color:#FAB387;font-style:italic">sorted</span><span style="color:#9399B2">(</span><span style="color:#CDD6F4">value</span><span style="color:#9399B2">))</span><span style="color:#94E2D5"> ==</span><span style="color:#CDD6F4"> value</span></span>
<span class="line"></span></code></pre>
<p>Now let’s write a unit test case to check our implementation:</p>
<pre class="astro-code catppuccin-mocha" style="background-color:#1e1e2e;color:#cdd6f4; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="python"><code><span class="line"><span style="color:#CBA6F7">import</span><span style="color:#CDD6F4"> unittest</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CBA6F7">class</span><span style="color:#F9E2AF;font-style:italic"> IsAlphabetizedTestCase</span><span style="color:#9399B2">(</span><span style="color:#F9E2AF;font-style:italic">unittest</span><span style="color:#9399B2">.</span><span style="color:#F9E2AF;font-style:italic">TestCase</span><span style="color:#9399B2">):</span></span>
<span class="line"><span style="color:#CBA6F7">    def</span><span style="color:#89B4FA;font-style:italic"> test_is_alphabetized</span><span style="color:#9399B2">(</span><span style="color:#F38BA8;font-style:italic">self</span><span style="color:#9399B2">):</span></span>
<span class="line"><span style="color:#F38BA8;font-style:italic">        self</span><span style="color:#9399B2">.</span><span style="color:#89B4FA">assertTrue</span><span style="color:#9399B2">(</span><span style="color:#89B4FA">is_alphabetized</span><span style="color:#9399B2">(</span><span style="color:#A6E3A1">'abcd'</span><span style="color:#9399B2">))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CBA6F7">    def</span><span style="color:#89B4FA;font-style:italic"> test_is_not_alphabetized</span><span style="color:#9399B2">(</span><span style="color:#F38BA8;font-style:italic">self</span><span style="color:#9399B2">):</span></span>
<span class="line"><span style="color:#F38BA8;font-style:italic">        self</span><span style="color:#9399B2">.</span><span style="color:#89B4FA">assertFalse</span><span style="color:#9399B2">(</span><span style="color:#89B4FA">is_alphabetized</span><span style="color:#9399B2">(</span><span style="color:#A6E3A1">'zyxw'</span><span style="color:#9399B2">))</span></span></code></pre>
<p>We can go ahead and run these tests and they should pass:</p>
<pre class="astro-code catppuccin-mocha" style="background-color:#1e1e2e;color:#cdd6f4; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="shell"><code><span class="line"><span style="color:#94E2D5">></span><span style="color:#CDD6F4"> nosetests example</span></span>
<span class="line"><span style="color:#F38BA8;font-style:italic">..</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">----------------------------------------------------------------------</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">Ran</span><span style="color:#FAB387"> 2</span><span style="color:#A6E3A1"> tests</span><span style="color:#A6E3A1"> in</span><span style="color:#A6E3A1"> 0.000s</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">OK</span></span></code></pre>
<p>But as you can see, our two test methods only tested simple examples. What we
really want to test is our function over a wide range of inputs to ensure our
implementation is robust.</p>
<p>At this point, your thought is usually to iterate over a range of cases in your method, and assert that each of them works as desired:</p>
<pre class="astro-code catppuccin-mocha" style="background-color:#1e1e2e;color:#cdd6f4; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="python"><code><span class="line"><span style="color:#CBA6F7">class</span><span style="color:#F9E2AF;font-style:italic"> IsAlphabetizedTestCase</span><span style="color:#9399B2">(</span><span style="color:#F9E2AF;font-style:italic">unittest</span><span style="color:#9399B2">.</span><span style="color:#F9E2AF;font-style:italic">TestCase</span><span style="color:#9399B2">):</span></span>
<span class="line"><span style="color:#CBA6F7">    def</span><span style="color:#89B4FA;font-style:italic"> test_is_alphabetized</span><span style="color:#9399B2">(</span><span style="color:#F38BA8;font-style:italic">self</span><span style="color:#9399B2">):</span></span>
<span class="line"><span style="color:#CDD6F4">        inputs </span><span style="color:#94E2D5">=</span><span style="color:#9399B2"> [</span></span>
<span class="line"><span style="color:#A6E3A1">            ''</span><span style="color:#9399B2">,</span></span>
<span class="line"><span style="color:#A6E3A1">            'a'</span><span style="color:#9399B2">,</span></span>
<span class="line"><span style="color:#A6E3A1">            'aaaaa'</span><span style="color:#9399B2">,</span></span>
<span class="line"><span style="color:#A6E3A1">            'ab'</span><span style="color:#9399B2">,</span></span>
<span class="line"><span style="color:#A6E3A1">            'abcd'</span><span style="color:#9399B2">,</span></span>
<span class="line"><span style="color:#9399B2">        ]</span></span>
<span class="line"><span style="color:#CBA6F7">        for</span><span style="color:#FAB387;font-style:italic"> input</span><span style="color:#CBA6F7"> in</span><span style="color:#CDD6F4"> inputs</span><span style="color:#9399B2">:</span></span>
<span class="line"><span style="color:#F38BA8;font-style:italic">            self</span><span style="color:#9399B2">.</span><span style="color:#89B4FA">assertTrue</span><span style="color:#9399B2">(</span><span style="color:#89B4FA">is_alphabetized</span><span style="color:#9399B2">(</span><span style="color:#FAB387;font-style:italic">input</span><span style="color:#9399B2">))</span></span>
<span class="line"></span></code></pre>
<p>But you lose the benefit of having a single assertion in your test. You can’t
isolate your test run to a single input. What if your test requires a setup
or teardown after each case? You can’t use all the advantages of the test
framework.</p>
<p>Let’s say you have this setup and you get bug report that our naive
implementation above doesn’t work correctly for <code>A-Cert</code> as well as one for <code>iOS</code>. Since we’re big fans
of TDD, we’ll plug that in our test case of expected inputs:</p>
<pre class="astro-code catppuccin-mocha" style="background-color:#1e1e2e;color:#cdd6f4; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="python"><code><span class="line"><span style="color:#CBA6F7">from</span><span style="color:#9399B2"> .</span><span style="color:#CDD6F4">alphabetical </span><span style="color:#CBA6F7">import</span><span style="color:#CDD6F4"> is_alphabetized</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CBA6F7">import</span><span style="color:#CDD6F4"> unittest</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#CBA6F7">class</span><span style="color:#F9E2AF;font-style:italic"> IsAlphabetizedTestCase</span><span style="color:#9399B2">(</span><span style="color:#F9E2AF;font-style:italic">unittest</span><span style="color:#9399B2">.</span><span style="color:#F9E2AF;font-style:italic">TestCase</span><span style="color:#9399B2">):</span></span>
<span class="line"><span style="color:#CBA6F7">    def</span><span style="color:#89B4FA;font-style:italic"> test_is_alphabetized</span><span style="color:#9399B2">(</span><span style="color:#F38BA8;font-style:italic">self</span><span style="color:#9399B2">):</span></span>
<span class="line"><span style="color:#CDD6F4">        inputs </span><span style="color:#94E2D5">=</span><span style="color:#9399B2"> [</span></span>
<span class="line"><span style="color:#A6E3A1">            ''</span><span style="color:#9399B2">,</span></span>
<span class="line"><span style="color:#A6E3A1">            'a'</span><span style="color:#9399B2">,</span></span>
<span class="line"><span style="color:#A6E3A1">            'aaaaa'</span><span style="color:#9399B2">,</span></span>
<span class="line"><span style="color:#A6E3A1">            'ab'</span><span style="color:#9399B2">,</span></span>
<span class="line"><span style="color:#A6E3A1">            'abcd'</span><span style="color:#9399B2">,</span></span>
<span class="line"><span style="color:#A6E3A1">            'A-Cert'</span><span style="color:#9399B2">,</span></span>
<span class="line"><span style="color:#A6E3A1">            'iOS'</span><span style="color:#9399B2">,</span></span>
<span class="line"><span style="color:#9399B2">        ]</span></span>
<span class="line"><span style="color:#CBA6F7">        for</span><span style="color:#FAB387;font-style:italic"> input</span><span style="color:#CBA6F7"> in</span><span style="color:#CDD6F4"> inputs</span><span style="color:#9399B2">:</span></span>
<span class="line"><span style="color:#F38BA8;font-style:italic">            self</span><span style="color:#9399B2">.</span><span style="color:#89B4FA">assertTrue</span><span style="color:#9399B2">(</span><span style="color:#89B4FA">is_alphabetized</span><span style="color:#9399B2">(</span><span style="color:#FAB387;font-style:italic">input</span><span style="color:#9399B2">))</span></span></code></pre>
<p>And give it a run:</p>
<pre class="astro-code catppuccin-mocha" style="background-color:#1e1e2e;color:#cdd6f4; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="shell"><code><span class="line"><span style="color:#A6E3A1">======================================================================</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">FAIL:</span><span style="color:#A6E3A1"> test_is_alphabetized</span><span style="color:#CDD6F4"> (example.test_alphabetical.IsAlphabetizedTestCase)</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">----------------------------------------------------------------------</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">Traceback</span><span style="color:#CDD6F4"> (most </span><span style="color:#A6E3A1">recent</span><span style="color:#A6E3A1"> call</span><span style="color:#A6E3A1"> last</span><span style="color:#CDD6F4">):</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">  File</span><span style="color:#A6E3A1"> "example/test_alphabetical.py",</span><span style="color:#A6E3A1"> line</span><span style="color:#A6E3A1"> 34,</span><span style="color:#A6E3A1"> in</span><span style="color:#A6E3A1"> test_is_alphabetized</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">    self.assertTrue(is_alphabetized(input</span><span style="color:#CDD6F4">))</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">AssertionError:</span><span style="color:#A6E3A1"> False</span><span style="color:#A6E3A1"> is</span><span style="color:#A6E3A1"> not</span><span style="color:#FAB387"> true</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">----------------------------------------------------------------------</span></span></code></pre>
<p>But as you can see, we don’t know which test failed. We should update our
test case to indicate which word failed:</p>
<pre class="astro-code catppuccin-mocha" style="background-color:#1e1e2e;color:#cdd6f4; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="python"><code><span class="line"><span style="color:#CBA6F7">    def</span><span style="color:#89B4FA;font-style:italic"> test_is_alphabetized</span><span style="color:#9399B2">(</span><span style="color:#F38BA8;font-style:italic">self</span><span style="color:#9399B2">):</span></span>
<span class="line"><span style="color:#CDD6F4">        inputs </span><span style="color:#94E2D5">=</span><span style="color:#9399B2"> [</span></span>
<span class="line"><span style="color:#A6E3A1">            ''</span><span style="color:#9399B2">,</span></span>
<span class="line"><span style="color:#A6E3A1">            'a'</span><span style="color:#9399B2">,</span></span>
<span class="line"><span style="color:#A6E3A1">            'aaaaa'</span><span style="color:#9399B2">,</span></span>
<span class="line"><span style="color:#A6E3A1">            'ab'</span><span style="color:#9399B2">,</span></span>
<span class="line"><span style="color:#A6E3A1">            'abcd'</span><span style="color:#9399B2">,</span></span>
<span class="line"><span style="color:#A6E3A1">            'A-Cert'</span><span style="color:#9399B2">,</span></span>
<span class="line"><span style="color:#A6E3A1">            'iOS'</span><span style="color:#9399B2">,</span></span>
<span class="line"><span style="color:#9399B2">        ]</span></span>
<span class="line"><span style="color:#CBA6F7">        for</span><span style="color:#FAB387;font-style:italic"> input</span><span style="color:#CBA6F7"> in</span><span style="color:#CDD6F4"> inputs</span><span style="color:#9399B2">:</span></span>
<span class="line"><span style="color:#F38BA8;font-style:italic">            self</span><span style="color:#9399B2">.</span><span style="color:#89B4FA">assertTrue</span><span style="color:#9399B2">(</span><span style="color:#89B4FA">is_alphabetized</span><span style="color:#9399B2">(</span><span style="color:#FAB387;font-style:italic">input</span><span style="color:#9399B2">),</span><span style="color:#A6E3A1;font-style:italic"> u</span><span style="color:#A6E3A1">'</span><span style="color:#F5C2E7">{}</span><span style="color:#A6E3A1"> was not considered alphabetized'</span><span style="color:#9399B2">.</span><span style="color:#89B4FA">format</span><span style="color:#9399B2">(</span><span style="color:#FAB387;font-style:italic">input</span><span style="color:#9399B2">))</span></span>
<span class="line"></span></code></pre>
<pre class="astro-code catppuccin-mocha" style="background-color:#1e1e2e;color:#cdd6f4; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="shell"><code><span class="line"><span style="color:#A6E3A1">======================================================================</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">FAIL:</span><span style="color:#A6E3A1"> test_is_alphabetized</span><span style="color:#CDD6F4"> (example.test_alphabetical.IsAlphabetizedTestCase)</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">----------------------------------------------------------------------</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">Traceback</span><span style="color:#CDD6F4"> (most </span><span style="color:#A6E3A1">recent</span><span style="color:#A6E3A1"> call</span><span style="color:#A6E3A1"> last</span><span style="color:#CDD6F4">):</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">  File</span><span style="color:#A6E3A1"> "example/test_alphabetical.py",</span><span style="color:#A6E3A1"> line</span><span style="color:#A6E3A1"> 46,</span><span style="color:#A6E3A1"> in</span><span style="color:#A6E3A1"> test_is_alphabetized</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">    self.assertTrue(is_alphabetized(input</span><span style="color:#CDD6F4">), u</span><span style="color:#A6E3A1">'{} was not considered alphabetized'</span><span style="color:#CDD6F4">.format(</span><span style="color:#89B4FA;font-style:italic">input</span><span style="color:#CDD6F4">))</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">AssertionError:</span><span style="color:#A6E3A1"> A-Cert</span><span style="color:#A6E3A1"> was</span><span style="color:#A6E3A1"> not</span><span style="color:#A6E3A1"> considered</span><span style="color:#A6E3A1"> alphabetized</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">----------------------------------------------------------------------</span></span></code></pre>
<p>Now we at least know which word failed. But what about <code>iOS</code>? Because the
test exits on the first failure, we’re unsure if that bug report was valid or
not.</p>
<p>Before we go fixing our <code>is_alphabetical</code> implementation to handle the
punctuation and capitalization, let’s figure out how to get both inputs to
fail.</p>
<p>Instead of looping in our test method, we could instead write separate test methods for each input:</p>
<pre class="astro-code catppuccin-mocha" style="background-color:#1e1e2e;color:#cdd6f4; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="python"><code><span class="line"><span style="color:#CBA6F7">class</span><span style="color:#F9E2AF;font-style:italic"> IsAlphabetizedTestCase</span><span style="color:#9399B2">(</span><span style="color:#F9E2AF;font-style:italic">unittest</span><span style="color:#9399B2">.</span><span style="color:#F9E2AF;font-style:italic">TestCase</span><span style="color:#9399B2">):</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CBA6F7">    def</span><span style="color:#89B4FA;font-style:italic"> test_is_alphabetized_empty</span><span style="color:#9399B2">(</span><span style="color:#F38BA8;font-style:italic">self</span><span style="color:#9399B2">):</span></span>
<span class="line"><span style="color:#F38BA8;font-style:italic">        self</span><span style="color:#9399B2">.</span><span style="color:#89B4FA">assertTrue</span><span style="color:#9399B2">(</span><span style="color:#89B4FA">is_alphabetized</span><span style="color:#9399B2">(</span><span style="color:#A6E3A1">''</span><span style="color:#9399B2">))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CBA6F7">    def</span><span style="color:#89B4FA;font-style:italic"> test_is_alphabetized_a</span><span style="color:#9399B2">(</span><span style="color:#F38BA8;font-style:italic">self</span><span style="color:#9399B2">):</span></span>
<span class="line"><span style="color:#F38BA8;font-style:italic">        self</span><span style="color:#9399B2">.</span><span style="color:#89B4FA">assertTrue</span><span style="color:#9399B2">(</span><span style="color:#89B4FA">is_alphabetized</span><span style="color:#9399B2">(</span><span style="color:#A6E3A1">'a'</span><span style="color:#9399B2">))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CBA6F7">    def</span><span style="color:#89B4FA;font-style:italic"> test_is_alphabetized_aaaaa</span><span style="color:#9399B2">(</span><span style="color:#F38BA8;font-style:italic">self</span><span style="color:#9399B2">):</span></span>
<span class="line"><span style="color:#F38BA8;font-style:italic">        self</span><span style="color:#9399B2">.</span><span style="color:#89B4FA">assertTrue</span><span style="color:#9399B2">(</span><span style="color:#89B4FA">is_alphabetized</span><span style="color:#9399B2">(</span><span style="color:#A6E3A1">'aaaaa'</span><span style="color:#9399B2">))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CDD6F4">    ...</span></span></code></pre>
<p>But boy is that exhausting having to repeat ourselves for each test. Instead,
we’d like to provide the list of inputs as before, but have individual test
methods generated for us. Nose actually supports this out of the box with
<a href="https://nose.readthedocs.org/en/latest/writing_tests.html#test-generators">Generator Tests</a>, but you can’t use them with python
<code>unittest.TestCase</code> and we’d lose any of help we get using the framework.</p>
<p>But we can work around that limitation. We just need to define a new test
method on our test class for each input and nose will run them just like any
other test method.</p>
<p>What we need to do is transform that list of inputs into individual test
methods. Instead of us manually writing all those test methods, what if we
wrote a function that wrote the test class for us?</p>
<pre class="astro-code catppuccin-mocha" style="background-color:#1e1e2e;color:#cdd6f4; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="python"><code><span class="line"><span style="color:#CBA6F7">class</span><span style="color:#F9E2AF;font-style:italic"> IsAlphabetizedTestCase</span><span style="color:#9399B2">(</span><span style="color:#F9E2AF;font-style:italic">unittest</span><span style="color:#9399B2">.</span><span style="color:#F9E2AF;font-style:italic">TestCase</span><span style="color:#9399B2">):</span></span>
<span class="line"><span style="color:#CBA6F7">    pass</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#CBA6F7">def</span><span style="color:#89B4FA;font-style:italic"> add_methods</span><span style="color:#9399B2">(</span><span style="color:#EBA0AC;font-style:italic">klass</span><span style="color:#9399B2">,</span><span style="color:#94E2D5"> *</span><span style="color:#EBA0AC;font-style:italic">inputs</span><span style="color:#9399B2">):</span></span>
<span class="line"><span style="color:#A6E3A1">    """</span></span>
<span class="line"><span style="color:#A6E3A1">    Take a TestCase and add a test method for each input</span></span>
<span class="line"><span style="color:#A6E3A1">    """</span></span>
<span class="line"><span style="color:#CBA6F7">    for</span><span style="color:#FAB387;font-style:italic"> input</span><span style="color:#CBA6F7"> in</span><span style="color:#CDD6F4"> inputs</span><span style="color:#9399B2">:</span></span>
<span class="line"><span style="color:#CBA6F7">        def</span><span style="color:#89B4FA;font-style:italic"> test_input</span><span style="color:#9399B2">(</span><span style="color:#F38BA8;font-style:italic">self</span><span style="color:#9399B2">):</span></span>
<span class="line"><span style="color:#F38BA8;font-style:italic">            self</span><span style="color:#9399B2">.</span><span style="color:#89B4FA">assertTrue</span><span style="color:#9399B2">(</span><span style="color:#89B4FA">is_alphabetized</span><span style="color:#9399B2">(</span><span style="color:#FAB387;font-style:italic">input</span><span style="color:#9399B2">),</span><span style="color:#A6E3A1;font-style:italic"> u</span><span style="color:#A6E3A1">'</span><span style="color:#F5C2E7">{}</span><span style="color:#A6E3A1"> was not considered alphabetized'</span><span style="color:#9399B2">.</span><span style="color:#89B4FA">format</span><span style="color:#9399B2">(</span><span style="color:#FAB387;font-style:italic">input</span><span style="color:#9399B2">))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CDD6F4">        klass</span><span style="color:#9399B2">.</span><span style="color:#CDD6F4">test_input </span><span style="color:#94E2D5">=</span><span style="color:#CDD6F4"> test_input</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#89B4FA">add_methods</span><span style="color:#9399B2">(</span></span>
<span class="line"><span style="color:#CDD6F4">    IsAlphabetizedTestCase</span><span style="color:#9399B2">,</span></span>
<span class="line"><span style="color:#A6E3A1">    ''</span><span style="color:#9399B2">,</span></span>
<span class="line"><span style="color:#A6E3A1">    'a'</span><span style="color:#9399B2">,</span></span>
<span class="line"><span style="color:#A6E3A1">    'aaaaa'</span><span style="color:#9399B2">,</span></span>
<span class="line"><span style="color:#A6E3A1">    'ab'</span><span style="color:#9399B2">,</span></span>
<span class="line"><span style="color:#A6E3A1">    'abcd'</span><span style="color:#9399B2">,</span></span>
<span class="line"><span style="color:#A6E3A1">    'A-Cert'</span><span style="color:#9399B2">,</span></span>
<span class="line"><span style="color:#A6E3A1">    'iOS'</span><span style="color:#9399B2">,</span></span>
<span class="line"><span style="color:#9399B2">)</span></span></code></pre>
<p>Running those tests, we see:</p>
<pre class="astro-code catppuccin-mocha" style="background-color:#1e1e2e;color:#cdd6f4; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="shell"><code><span class="line"><span style="color:#A6E3A1">======================================================================</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">FAIL:</span><span style="color:#A6E3A1"> test_input</span><span style="color:#CDD6F4"> (example.test_alphabetical.IsAlphabetizedTestCase)</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">----------------------------------------------------------------------</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">Traceback</span><span style="color:#CDD6F4"> (most </span><span style="color:#A6E3A1">recent</span><span style="color:#A6E3A1"> call</span><span style="color:#A6E3A1"> last</span><span style="color:#CDD6F4">):</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">  File</span><span style="color:#A6E3A1"> "example/test_alphabetical.py",</span><span style="color:#A6E3A1"> line</span><span style="color:#A6E3A1"> 16,</span><span style="color:#A6E3A1"> in</span><span style="color:#A6E3A1"> test_input</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">    self.assertTrue(is_alphabetized(input</span><span style="color:#CDD6F4">), u</span><span style="color:#A6E3A1">'{} was not considered alphabetized'</span><span style="color:#CDD6F4">.format(</span><span style="color:#89B4FA;font-style:italic">input</span><span style="color:#CDD6F4">))</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">AssertionError:</span><span style="color:#A6E3A1"> iOS</span><span style="color:#A6E3A1"> was</span><span style="color:#A6E3A1"> not</span><span style="color:#A6E3A1"> considered</span><span style="color:#A6E3A1"> alphabetized</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">----------------------------------------------------------------------</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">Ran</span><span style="color:#FAB387"> 2</span><span style="color:#A6E3A1"> tests</span><span style="color:#A6E3A1"> in</span><span style="color:#A6E3A1"> 0.001s</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">FAILED</span><span style="color:#CDD6F4"> (errors=1, </span><span style="color:#A6E3A1">failures=</span><span style="color:#FAB387">1</span><span style="color:#CDD6F4">)</span></span></code></pre>
<p>What happened? Shouldn’t there be more tests? Well, we kept clobbering our
test in the klass. The trick is to give each test a unique name.</p>
<p>Let’s assign the test to the class using <code>setattr</code> with a custom name:</p>
<pre class="astro-code catppuccin-mocha" style="background-color:#1e1e2e;color:#cdd6f4; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="python"><code><span class="line"><span style="color:#CBA6F7">def</span><span style="color:#89B4FA;font-style:italic"> add_methods</span><span style="color:#9399B2">(</span><span style="color:#EBA0AC;font-style:italic">klass</span><span style="color:#9399B2">,</span><span style="color:#94E2D5"> *</span><span style="color:#EBA0AC;font-style:italic">inputs</span><span style="color:#9399B2">):</span></span>
<span class="line"><span style="color:#A6E3A1">    """</span></span>
<span class="line"><span style="color:#A6E3A1">    Take a TestCase and add a test method for each input</span></span>
<span class="line"><span style="color:#A6E3A1">    """</span></span>
<span class="line"><span style="color:#CBA6F7">    for</span><span style="color:#FAB387;font-style:italic"> input</span><span style="color:#CBA6F7"> in</span><span style="color:#CDD6F4"> inputs</span><span style="color:#9399B2">:</span></span>
<span class="line"><span style="color:#CDD6F4">        test_name </span><span style="color:#94E2D5">=</span><span style="color:#A6E3A1"> 'test_alphabetical_</span><span style="color:#F5C2E7">{}</span><span style="color:#A6E3A1">'</span><span style="color:#9399B2">.</span><span style="color:#89B4FA">format</span><span style="color:#9399B2">(</span><span style="color:#FAB387;font-style:italic">input</span><span style="color:#9399B2">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CBA6F7">        def</span><span style="color:#89B4FA;font-style:italic"> test_input</span><span style="color:#9399B2">(</span><span style="color:#F38BA8;font-style:italic">self</span><span style="color:#9399B2">):</span></span>
<span class="line"><span style="color:#F38BA8;font-style:italic">            self</span><span style="color:#9399B2">.</span><span style="color:#89B4FA">assertTrue</span><span style="color:#9399B2">(</span><span style="color:#89B4FA">is_alphabetized</span><span style="color:#9399B2">(</span><span style="color:#FAB387;font-style:italic">input</span><span style="color:#9399B2">),</span><span style="color:#A6E3A1;font-style:italic"> u</span><span style="color:#A6E3A1">'</span><span style="color:#F5C2E7">{}</span><span style="color:#A6E3A1"> was not considered alphabetized'</span><span style="color:#9399B2">.</span><span style="color:#89B4FA">format</span><span style="color:#9399B2">(</span><span style="color:#FAB387;font-style:italic">input</span><span style="color:#9399B2">))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FAB387;font-style:italic">        setattr</span><span style="color:#9399B2">(</span><span style="color:#CDD6F4">klass</span><span style="color:#9399B2">,</span><span style="color:#CDD6F4"> test_name</span><span style="color:#9399B2">,</span><span style="color:#CDD6F4"> test_input</span><span style="color:#9399B2">)</span></span></code></pre>
<p>Now running the tests:</p>
<pre class="astro-code catppuccin-mocha" style="background-color:#1e1e2e;color:#cdd6f4; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="shell"><code><span class="line"><span style="color:#A6E3A1">======================================================================</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">FAIL:</span><span style="color:#A6E3A1"> test_alphabetical_</span><span style="color:#CDD6F4"> (example.test_alphabetical.IsAlphabetizedTestCase)</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">----------------------------------------------------------------------</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">Traceback</span><span style="color:#CDD6F4"> (most </span><span style="color:#A6E3A1">recent</span><span style="color:#A6E3A1"> call</span><span style="color:#A6E3A1"> last</span><span style="color:#CDD6F4">):</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">  File</span><span style="color:#A6E3A1"> "example/test_alphabetical.py",</span><span style="color:#A6E3A1"> line</span><span style="color:#A6E3A1"> 18,</span><span style="color:#A6E3A1"> in</span><span style="color:#A6E3A1"> test_input</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">    self.assertTrue(is_alphabetized(input</span><span style="color:#CDD6F4">), u</span><span style="color:#A6E3A1">'{} was not considered alphabetized'</span><span style="color:#CDD6F4">.format(</span><span style="color:#89B4FA;font-style:italic">input</span><span style="color:#CDD6F4">))</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">AssertionError:</span><span style="color:#A6E3A1"> iOS</span><span style="color:#A6E3A1"> was</span><span style="color:#A6E3A1"> not</span><span style="color:#A6E3A1"> considered</span><span style="color:#A6E3A1"> alphabetized</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6E3A1">======================================================================</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">FAIL:</span><span style="color:#A6E3A1"> test_alphabetical_A-Cert</span><span style="color:#CDD6F4"> (example.test_alphabetical.IsAlphabetizedTestCase)</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">----------------------------------------------------------------------</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">Traceback</span><span style="color:#CDD6F4"> (most </span><span style="color:#A6E3A1">recent</span><span style="color:#A6E3A1"> call</span><span style="color:#A6E3A1"> last</span><span style="color:#CDD6F4">):</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">  File</span><span style="color:#A6E3A1"> "example/test_alphabetical.py",</span><span style="color:#A6E3A1"> line</span><span style="color:#A6E3A1"> 18,</span><span style="color:#A6E3A1"> in</span><span style="color:#A6E3A1"> test_input</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">    self.assertTrue(is_alphabetized(input</span><span style="color:#CDD6F4">), u</span><span style="color:#A6E3A1">'{} was not considered alphabetized'</span><span style="color:#CDD6F4">.format(</span><span style="color:#89B4FA;font-style:italic">input</span><span style="color:#CDD6F4">))</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">AssertionError:</span><span style="color:#A6E3A1"> iOS</span><span style="color:#A6E3A1"> was</span><span style="color:#A6E3A1"> not</span><span style="color:#A6E3A1"> considered</span><span style="color:#A6E3A1"> alphabetized</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9399B2">[</span><span style="color:#CDD6F4">...</span><span style="color:#9399B2">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">----------------------------------------------------------------------</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">Ran</span><span style="color:#FAB387"> 7</span><span style="color:#A6E3A1"> tests</span><span style="color:#A6E3A1"> in</span><span style="color:#A6E3A1"> 0.001s</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">FAILED</span><span style="color:#CDD6F4"> (failures=7)</span></span></code></pre>
<p>Why are all tests failing with <code>iOS</code>? It should be running with each variant
of our input. Turns out this is due to variable scoping in python. In
python2, there’s only two levels of scoping: function and global. So as we
loop and define <code>test_input</code>, the value of <code>input</code> is being updated. When our
test methods are actually evaluated, it’s always equal to the last value
(<code>iOS</code>).</p>
<p>To fix that, we’ll define yet another function to capture the value of input
(remember there’s function scoping):</p>
<pre class="astro-code catppuccin-mocha" style="background-color:#1e1e2e;color:#cdd6f4; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="python"><code><span class="line"><span style="color:#CBA6F7">def</span><span style="color:#89B4FA;font-style:italic"> make_method</span><span style="color:#9399B2">(</span><span style="color:#EBA0AC;font-style:italic">input</span><span style="color:#9399B2">):</span></span>
<span class="line"><span style="color:#CDD6F4">    test_name </span><span style="color:#94E2D5">=</span><span style="color:#A6E3A1"> 'test_alphabetical_</span><span style="color:#F5C2E7">{}</span><span style="color:#A6E3A1">'</span><span style="color:#9399B2">.</span><span style="color:#89B4FA">format</span><span style="color:#9399B2">(</span><span style="color:#FAB387;font-style:italic">input</span><span style="color:#9399B2">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CBA6F7">    def</span><span style="color:#89B4FA;font-style:italic"> test_input</span><span style="color:#9399B2">(</span><span style="color:#F38BA8;font-style:italic">self</span><span style="color:#9399B2">):</span></span>
<span class="line"><span style="color:#F38BA8;font-style:italic">        self</span><span style="color:#9399B2">.</span><span style="color:#89B4FA">assertTrue</span><span style="color:#9399B2">(</span><span style="color:#89B4FA">is_alphabetized</span><span style="color:#9399B2">(</span><span style="color:#FAB387;font-style:italic">input</span><span style="color:#9399B2">),</span><span style="color:#A6E3A1;font-style:italic"> u</span><span style="color:#A6E3A1">'</span><span style="color:#F5C2E7">{}</span><span style="color:#A6E3A1"> was not considered alphabetized'</span><span style="color:#9399B2">.</span><span style="color:#89B4FA">format</span><span style="color:#9399B2">(</span><span style="color:#FAB387;font-style:italic">input</span><span style="color:#9399B2">))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CBA6F7">    return</span><span style="color:#CDD6F4"> test_name</span><span style="color:#9399B2">,</span><span style="color:#CDD6F4"> test_input</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#CBA6F7">def</span><span style="color:#89B4FA;font-style:italic"> add_methods</span><span style="color:#9399B2">(</span><span style="color:#EBA0AC;font-style:italic">klass</span><span style="color:#9399B2">,</span><span style="color:#94E2D5"> *</span><span style="color:#EBA0AC;font-style:italic">inputs</span><span style="color:#9399B2">):</span></span>
<span class="line"><span style="color:#A6E3A1">    """</span></span>
<span class="line"><span style="color:#A6E3A1">    Take a TestCase and add a test method for each input</span></span>
<span class="line"><span style="color:#A6E3A1">    """</span></span>
<span class="line"><span style="color:#CBA6F7">    for</span><span style="color:#FAB387;font-style:italic"> input</span><span style="color:#CBA6F7"> in</span><span style="color:#CDD6F4"> inputs</span><span style="color:#9399B2">:</span></span>
<span class="line"><span style="color:#CDD6F4">        test_name</span><span style="color:#9399B2">,</span><span style="color:#CDD6F4"> test_input </span><span style="color:#94E2D5">=</span><span style="color:#89B4FA"> make_method</span><span style="color:#9399B2">(</span><span style="color:#FAB387;font-style:italic">input</span><span style="color:#9399B2">)</span></span>
<span class="line"><span style="color:#FAB387;font-style:italic">        setattr</span><span style="color:#9399B2">(</span><span style="color:#CDD6F4">klass</span><span style="color:#9399B2">,</span><span style="color:#CDD6F4"> test_name</span><span style="color:#9399B2">,</span><span style="color:#CDD6F4"> test_input</span><span style="color:#9399B2">)</span></span></code></pre>
<p>With these changes, we finally get the results we expected:</p>
<pre class="astro-code catppuccin-mocha" style="background-color:#1e1e2e;color:#cdd6f4; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="shell"><code><span class="line"><span style="color:#A6E3A1">======================================================================</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">FAIL:</span><span style="color:#A6E3A1"> test_alphabetical_A-Cert</span><span style="color:#CDD6F4"> (example.test_alphabetical.IsAlphabetizedTestCase)</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">----------------------------------------------------------------------</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">Traceback</span><span style="color:#CDD6F4"> (most </span><span style="color:#A6E3A1">recent</span><span style="color:#A6E3A1"> call</span><span style="color:#A6E3A1"> last</span><span style="color:#CDD6F4">):</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">  File</span><span style="color:#A6E3A1"> "example/test_alphabetical.py",</span><span style="color:#A6E3A1"> line</span><span style="color:#A6E3A1"> 14,</span><span style="color:#A6E3A1"> in</span><span style="color:#A6E3A1"> test_input</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">    self.assertTrue(is_alphabetized(input</span><span style="color:#CDD6F4">), u</span><span style="color:#A6E3A1">'{} was not considered alphabetized'</span><span style="color:#CDD6F4">.format(</span><span style="color:#89B4FA;font-style:italic">input</span><span style="color:#CDD6F4">))</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">AssertionError:</span><span style="color:#A6E3A1"> A-Cert</span><span style="color:#A6E3A1"> was</span><span style="color:#A6E3A1"> not</span><span style="color:#A6E3A1"> considered</span><span style="color:#A6E3A1"> alphabetized</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6E3A1">======================================================================</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">FAIL:</span><span style="color:#A6E3A1"> test_alphabetical_iOS</span><span style="color:#CDD6F4"> (example.test_alphabetical.IsAlphabetizedTestCase)</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">----------------------------------------------------------------------</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">Traceback</span><span style="color:#CDD6F4"> (most </span><span style="color:#A6E3A1">recent</span><span style="color:#A6E3A1"> call</span><span style="color:#A6E3A1"> last</span><span style="color:#CDD6F4">):</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">  File</span><span style="color:#A6E3A1"> "example/test_alphabetical.py",</span><span style="color:#A6E3A1"> line</span><span style="color:#A6E3A1"> 14,</span><span style="color:#A6E3A1"> in</span><span style="color:#A6E3A1"> test_input</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">    self.assertTrue(is_alphabetized(input</span><span style="color:#CDD6F4">), u</span><span style="color:#A6E3A1">'{} was not considered alphabetized'</span><span style="color:#CDD6F4">.format(</span><span style="color:#89B4FA;font-style:italic">input</span><span style="color:#CDD6F4">))</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">AssertionError:</span><span style="color:#A6E3A1"> iOS</span><span style="color:#A6E3A1"> was</span><span style="color:#A6E3A1"> not</span><span style="color:#A6E3A1"> considered</span><span style="color:#A6E3A1"> alphabetized</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">----------------------------------------------------------------------</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">Ran</span><span style="color:#FAB387"> 7</span><span style="color:#A6E3A1"> tests</span><span style="color:#A6E3A1"> in</span><span style="color:#A6E3A1"> 0.001s</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">FAILED</span><span style="color:#CDD6F4"> (failures=2)</span></span></code></pre>
<p>There you go, we are able to generate N test methods to validate our
alphabetical function. Adding a new test is as simple as extending the list
of inputs.</p>
<h2 id="improving-the-test-generation">Improving the Test Generation</h2>
<p>So we now have the ability to generate tests from an input list, but it
involves a few methods and our test is now deeply nested in a helper factory.
Let’s improve this so we can use this more universally.</p>
<p>First thing to notice is that <code>add_methods</code> takes a class as the first
argument. That looks awfully like a decorator. Let’s make a few tweaks so we
can use it to decorate our test class:</p>
<pre class="astro-code catppuccin-mocha" style="background-color:#1e1e2e;color:#cdd6f4; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="python"><code><span class="line"><span style="color:#CBA6F7">def</span><span style="color:#89B4FA;font-style:italic"> add_methods</span><span style="color:#9399B2">(</span><span style="color:#94E2D5">*</span><span style="color:#EBA0AC;font-style:italic">inputs</span><span style="color:#9399B2">):</span></span>
<span class="line"><span style="color:#A6E3A1">    """</span></span>
<span class="line"><span style="color:#A6E3A1">    Take a TestCase and add a test method for each input</span></span>
<span class="line"><span style="color:#A6E3A1">    """</span></span>
<span class="line"><span style="color:#CBA6F7">    def</span><span style="color:#89B4FA;font-style:italic"> decorator</span><span style="color:#9399B2">(</span><span style="color:#EBA0AC;font-style:italic">klass</span><span style="color:#9399B2">):</span></span>
<span class="line"><span style="color:#CBA6F7">        for</span><span style="color:#FAB387;font-style:italic"> input</span><span style="color:#CBA6F7"> in</span><span style="color:#CDD6F4"> inputs</span><span style="color:#9399B2">:</span></span>
<span class="line"><span style="color:#CDD6F4">            test_name</span><span style="color:#9399B2">,</span><span style="color:#CDD6F4"> test_input </span><span style="color:#94E2D5">=</span><span style="color:#89B4FA"> make_method</span><span style="color:#9399B2">(</span><span style="color:#FAB387;font-style:italic">input</span><span style="color:#9399B2">)</span></span>
<span class="line"><span style="color:#FAB387;font-style:italic">            setattr</span><span style="color:#9399B2">(</span><span style="color:#CDD6F4">klass</span><span style="color:#9399B2">,</span><span style="color:#CDD6F4"> test_name</span><span style="color:#9399B2">,</span><span style="color:#CDD6F4"> test_input</span><span style="color:#9399B2">)</span></span>
<span class="line"><span style="color:#CBA6F7">        return</span><span style="color:#CDD6F4"> klass</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CBA6F7">    return</span><span style="color:#CDD6F4"> decorator</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#FAB387;font-style:italic">@add_methods</span><span style="color:#9399B2">(</span><span style="color:#A6E3A1">''</span><span style="color:#9399B2">,</span><span style="color:#A6E3A1"> 'a'</span><span style="color:#9399B2">,</span><span style="color:#A6E3A1"> 'aaaaa'</span><span style="color:#9399B2">,</span><span style="color:#A6E3A1"> 'ab'</span><span style="color:#9399B2">,</span><span style="color:#A6E3A1"> 'abcd'</span><span style="color:#9399B2">,</span><span style="color:#A6E3A1"> 'A-Cert'</span><span style="color:#9399B2">,</span><span style="color:#A6E3A1"> 'iOS'</span><span style="color:#9399B2">)</span></span>
<span class="line"><span style="color:#CBA6F7">class</span><span style="color:#F9E2AF;font-style:italic"> IsAlphabetizedTestCase</span><span style="color:#9399B2">(</span><span style="color:#F9E2AF;font-style:italic">unittest</span><span style="color:#9399B2">.</span><span style="color:#F9E2AF;font-style:italic">TestCase</span><span style="color:#9399B2">):</span></span>
<span class="line"><span style="color:#CBA6F7">    pass</span></span></code></pre>
<p>All we did was wrap our method generation in a <code>decorator</code> function that takes
an input class, adds the method and returns the class.</p>
<h3 id="naming-the-test-functions">Naming the Test Functions</h3>
<p>if you inspect the test class, even though we have methods under unique names
based on the input (like <code>test_input_iOS</code>), we can’t reference those class
names when using nose because they all are still just named <code>test_input</code>:</p>
<pre class="astro-code catppuccin-mocha" style="background-color:#1e1e2e;color:#cdd6f4; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="python"><code><span class="line"><span style="color:#CDD6F4">ipdb</span><span style="color:#94E2D5">></span><span style="color:#CDD6F4"> pp IsAlphabetizedTestCase</span><span style="color:#9399B2">.</span><span style="color:#CDD6F4">test_alphabetical_iOS</span></span>
<span class="line"><span style="color:#94E2D5">&#x3C;</span><span style="color:#CDD6F4">unbound method IsAlphabetizedTestCase</span><span style="color:#9399B2">.</span><span style="color:#CDD6F4">test_input</span><span style="color:#94E2D5">></span></span></code></pre>
<p>To fix this, we need to set the <code>__name__</code> attribute on the function when
generating it. This has the extra benefit of not needing to return a name for
the assignment, we can just use the same:</p>
<pre class="astro-code catppuccin-mocha" style="background-color:#1e1e2e;color:#cdd6f4; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="python"><code><span class="line"><span style="color:#CBA6F7">def</span><span style="color:#89B4FA;font-style:italic"> make_method</span><span style="color:#9399B2">(</span><span style="color:#EBA0AC;font-style:italic">input</span><span style="color:#9399B2">):</span></span>
<span class="line"><span style="color:#CBA6F7">    def</span><span style="color:#89B4FA;font-style:italic"> test_input</span><span style="color:#9399B2">(</span><span style="color:#F38BA8;font-style:italic">self</span><span style="color:#9399B2">):</span></span>
<span class="line"><span style="color:#F38BA8;font-style:italic">        self</span><span style="color:#9399B2">.</span><span style="color:#89B4FA">assertTrue</span><span style="color:#9399B2">(</span><span style="color:#89B4FA">is_alphabetized</span><span style="color:#9399B2">(</span><span style="color:#FAB387;font-style:italic">input</span><span style="color:#9399B2">),</span><span style="color:#A6E3A1;font-style:italic"> u</span><span style="color:#A6E3A1">'</span><span style="color:#F5C2E7">{}</span><span style="color:#A6E3A1"> was not considered alphabetized'</span><span style="color:#9399B2">.</span><span style="color:#89B4FA">format</span><span style="color:#9399B2">(</span><span style="color:#FAB387;font-style:italic">input</span><span style="color:#9399B2">))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CDD6F4">    test_input</span><span style="color:#9399B2">.</span><span style="color:#CDD6F4">__name__ </span><span style="color:#94E2D5">=</span><span style="color:#A6E3A1"> 'test_alphabetical_</span><span style="color:#F5C2E7">{}</span><span style="color:#A6E3A1">'</span><span style="color:#9399B2">.</span><span style="color:#89B4FA">format</span><span style="color:#9399B2">(</span><span style="color:#FAB387;font-style:italic">input</span><span style="color:#9399B2">)</span></span>
<span class="line"><span style="color:#CBA6F7">    return</span><span style="color:#CDD6F4"> test_input</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#CBA6F7">def</span><span style="color:#89B4FA;font-style:italic"> add_methods</span><span style="color:#9399B2">(</span><span style="color:#94E2D5">*</span><span style="color:#EBA0AC;font-style:italic">inputs</span><span style="color:#9399B2">):</span></span>
<span class="line"><span style="color:#A6E3A1">    """</span></span>
<span class="line"><span style="color:#A6E3A1">    Take a TestCase and add a test method for each input</span></span>
<span class="line"><span style="color:#A6E3A1">    """</span></span>
<span class="line"><span style="color:#CBA6F7">    def</span><span style="color:#89B4FA;font-style:italic"> decorator</span><span style="color:#9399B2">(</span><span style="color:#EBA0AC;font-style:italic">klass</span><span style="color:#9399B2">):</span></span>
<span class="line"><span style="color:#CBA6F7">        for</span><span style="color:#FAB387;font-style:italic"> input</span><span style="color:#CBA6F7"> in</span><span style="color:#CDD6F4"> inputs</span><span style="color:#9399B2">:</span></span>
<span class="line"><span style="color:#CDD6F4">            test_input </span><span style="color:#94E2D5">=</span><span style="color:#89B4FA"> make_method</span><span style="color:#9399B2">(</span><span style="color:#FAB387;font-style:italic">input</span><span style="color:#9399B2">)</span></span>
<span class="line"><span style="color:#FAB387;font-style:italic">            setattr</span><span style="color:#9399B2">(</span><span style="color:#CDD6F4">klass</span><span style="color:#9399B2">,</span><span style="color:#CDD6F4"> test_input</span><span style="color:#9399B2">.</span><span style="color:#CDD6F4">__name__</span><span style="color:#9399B2">,</span><span style="color:#CDD6F4"> test_input</span><span style="color:#9399B2">)</span></span>
<span class="line"><span style="color:#CBA6F7">        return</span><span style="color:#CDD6F4"> klass</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CBA6F7">    return</span><span style="color:#CDD6F4"> decorator</span></span></code></pre>
<p>Now with the function named accurately, we can specify a single test method to run:</p>
<pre class="astro-code catppuccin-mocha" style="background-color:#1e1e2e;color:#cdd6f4; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="shell"><code><span class="line"><span style="color:#89B4FA;font-style:italic">nosetests</span><span style="color:#A6E3A1"> example/test_alphabetical.py:IsAlphabetizedTestCase.test_alphabetical_iOS</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">F</span></span>
<span class="line"><span style="color:#A6E3A1">======================================================================</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">FAIL:</span><span style="color:#A6E3A1"> test_alphabetical_iOS</span><span style="color:#CDD6F4"> (example.test_alphabetical.IsAlphabetizedTestCase)</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">----------------------------------------------------------------------</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">Traceback</span><span style="color:#CDD6F4"> (most </span><span style="color:#A6E3A1">recent</span><span style="color:#A6E3A1"> call</span><span style="color:#A6E3A1"> last</span><span style="color:#CDD6F4">):</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">  File</span><span style="color:#A6E3A1"> "example/test_alphabetical.py",</span><span style="color:#A6E3A1"> line</span><span style="color:#A6E3A1"> 8,</span><span style="color:#A6E3A1"> in</span><span style="color:#A6E3A1"> test_input</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">    self.assertTrue(is_alphabetized(input</span><span style="color:#CDD6F4">), u</span><span style="color:#A6E3A1">'{} was not considered alphabetized'</span><span style="color:#CDD6F4">.format(</span><span style="color:#89B4FA;font-style:italic">input</span><span style="color:#CDD6F4">))</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">AssertionError:</span><span style="color:#A6E3A1"> iOS</span><span style="color:#A6E3A1"> was</span><span style="color:#A6E3A1"> not</span><span style="color:#A6E3A1"> considered</span><span style="color:#A6E3A1"> alphabetized</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">----------------------------------------------------------------------</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">Ran</span><span style="color:#FAB387"> 1</span><span style="color:#A6E3A1"> test</span><span style="color:#A6E3A1"> in</span><span style="color:#A6E3A1"> 0.001s</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">FAILED</span><span style="color:#CDD6F4"> (failures=1)</span></span></code></pre>
<h2 id="generalize-the-test-method-factory">Generalize the Test Method Factory</h2>
<p>So our class decorator works well for our single test method generator. But
what if we have multiple test methods we want to generate? Remember our
initial example also included expected False results? Let’s make it so we can
pass in the test method:</p>
<pre class="astro-code catppuccin-mocha" style="background-color:#1e1e2e;color:#cdd6f4; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="python"><code><span class="line"><span style="color:#CBA6F7">from</span><span style="color:#9399B2"> .</span><span style="color:#CDD6F4">alphabetical </span><span style="color:#CBA6F7">import</span><span style="color:#CDD6F4"> is_alphabetized</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CBA6F7">import</span><span style="color:#CDD6F4"> unittest</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#CBA6F7">def</span><span style="color:#89B4FA;font-style:italic"> assert_is_alphabetized</span><span style="color:#9399B2">(</span><span style="color:#F38BA8;font-style:italic">self</span><span style="color:#9399B2">,</span><span style="color:#EBA0AC;font-style:italic"> input</span><span style="color:#9399B2">):</span></span>
<span class="line"><span style="color:#F38BA8;font-style:italic">    self</span><span style="color:#9399B2">.</span><span style="color:#89B4FA">assertTrue</span><span style="color:#9399B2">(</span><span style="color:#89B4FA">is_alphabetized</span><span style="color:#9399B2">(</span><span style="color:#FAB387;font-style:italic">input</span><span style="color:#9399B2">),</span><span style="color:#A6E3A1;font-style:italic"> u</span><span style="color:#A6E3A1">'</span><span style="color:#F5C2E7">{}</span><span style="color:#A6E3A1"> was not considered alphabetized'</span><span style="color:#9399B2">.</span><span style="color:#89B4FA">format</span><span style="color:#9399B2">(</span><span style="color:#FAB387;font-style:italic">input</span><span style="color:#9399B2">))</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#CBA6F7">def</span><span style="color:#89B4FA;font-style:italic"> assert_is_not_alphabetized</span><span style="color:#9399B2">(</span><span style="color:#F38BA8;font-style:italic">self</span><span style="color:#9399B2">,</span><span style="color:#EBA0AC;font-style:italic"> input</span><span style="color:#9399B2">):</span></span>
<span class="line"><span style="color:#F38BA8;font-style:italic">    self</span><span style="color:#9399B2">.</span><span style="color:#89B4FA">assertFalse</span><span style="color:#9399B2">(</span><span style="color:#89B4FA">is_alphabetized</span><span style="color:#9399B2">(</span><span style="color:#FAB387;font-style:italic">input</span><span style="color:#9399B2">),</span><span style="color:#A6E3A1;font-style:italic"> u</span><span style="color:#A6E3A1">'</span><span style="color:#F5C2E7">{}</span><span style="color:#A6E3A1"> was considered alphabetized'</span><span style="color:#9399B2">.</span><span style="color:#89B4FA">format</span><span style="color:#9399B2">(</span><span style="color:#FAB387;font-style:italic">input</span><span style="color:#9399B2">))</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#CBA6F7">def</span><span style="color:#89B4FA;font-style:italic"> make_method</span><span style="color:#9399B2">(</span><span style="color:#EBA0AC;font-style:italic">func</span><span style="color:#9399B2">,</span><span style="color:#EBA0AC;font-style:italic"> input</span><span style="color:#9399B2">):</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CBA6F7">    def</span><span style="color:#89B4FA;font-style:italic"> test_input</span><span style="color:#9399B2">(</span><span style="color:#F38BA8;font-style:italic">self</span><span style="color:#9399B2">):</span></span>
<span class="line"><span style="color:#89B4FA">        func</span><span style="color:#9399B2">(</span><span style="color:#F38BA8;font-style:italic">self</span><span style="color:#9399B2">,</span><span style="color:#FAB387;font-style:italic"> input</span><span style="color:#9399B2">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CDD6F4">    test_input</span><span style="color:#9399B2">.</span><span style="color:#CDD6F4">__name__ </span><span style="color:#94E2D5">=</span><span style="color:#A6E3A1"> 'test_</span><span style="color:#F5C2E7">{func}</span><span style="color:#A6E3A1">_</span><span style="color:#F5C2E7">{input}</span><span style="color:#A6E3A1">'</span><span style="color:#9399B2">.</span><span style="color:#89B4FA">format</span><span style="color:#9399B2">(</span><span style="color:#EBA0AC;font-style:italic">func</span><span style="color:#94E2D5">=</span><span style="color:#CDD6F4">func</span><span style="color:#9399B2">.</span><span style="color:#CDD6F4">__name__</span><span style="color:#9399B2">,</span><span style="color:#EBA0AC;font-style:italic"> input</span><span style="color:#94E2D5">=</span><span style="color:#FAB387;font-style:italic">input</span><span style="color:#9399B2">)</span></span>
<span class="line"><span style="color:#CBA6F7">    return</span><span style="color:#CDD6F4"> test_input</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#CBA6F7">def</span><span style="color:#89B4FA;font-style:italic"> generate</span><span style="color:#9399B2">(</span><span style="color:#EBA0AC;font-style:italic">func</span><span style="color:#9399B2">,</span><span style="color:#94E2D5"> *</span><span style="color:#EBA0AC;font-style:italic">inputs</span><span style="color:#9399B2">):</span></span>
<span class="line"><span style="color:#A6E3A1">    """</span></span>
<span class="line"><span style="color:#A6E3A1">    Take a TestCase and add a test method for each input</span></span>
<span class="line"><span style="color:#A6E3A1">    """</span></span>
<span class="line"><span style="color:#CBA6F7">    def</span><span style="color:#89B4FA;font-style:italic"> decorator</span><span style="color:#9399B2">(</span><span style="color:#EBA0AC;font-style:italic">klass</span><span style="color:#9399B2">):</span></span>
<span class="line"><span style="color:#CBA6F7">        for</span><span style="color:#FAB387;font-style:italic"> input</span><span style="color:#CBA6F7"> in</span><span style="color:#CDD6F4"> inputs</span><span style="color:#9399B2">:</span></span>
<span class="line"><span style="color:#CDD6F4">            test_input </span><span style="color:#94E2D5">=</span><span style="color:#89B4FA"> make_method</span><span style="color:#9399B2">(</span><span style="color:#CDD6F4">func</span><span style="color:#9399B2">,</span><span style="color:#FAB387;font-style:italic"> input</span><span style="color:#9399B2">)</span></span>
<span class="line"><span style="color:#FAB387;font-style:italic">            setattr</span><span style="color:#9399B2">(</span><span style="color:#CDD6F4">klass</span><span style="color:#9399B2">,</span><span style="color:#CDD6F4"> test_input</span><span style="color:#9399B2">.</span><span style="color:#CDD6F4">__name__</span><span style="color:#9399B2">,</span><span style="color:#CDD6F4"> test_input</span><span style="color:#9399B2">)</span></span>
<span class="line"><span style="color:#CBA6F7">        return</span><span style="color:#CDD6F4"> klass</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CBA6F7">    return</span><span style="color:#CDD6F4"> decorator</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#FAB387;font-style:italic">@generate</span><span style="color:#9399B2">(</span><span style="color:#CDD6F4">assert_is_alphabetized</span><span style="color:#9399B2">,</span><span style="color:#A6E3A1"> ''</span><span style="color:#9399B2">,</span><span style="color:#A6E3A1"> 'a'</span><span style="color:#9399B2">,</span><span style="color:#A6E3A1"> 'aaaaa'</span><span style="color:#9399B2">,</span><span style="color:#A6E3A1"> 'ab'</span><span style="color:#9399B2">,</span><span style="color:#A6E3A1"> 'abcd'</span><span style="color:#9399B2">,</span><span style="color:#A6E3A1"> 'A-Cert'</span><span style="color:#9399B2">,</span><span style="color:#A6E3A1"> 'iOS'</span><span style="color:#9399B2">)</span></span>
<span class="line"><span style="color:#FAB387;font-style:italic">@generate</span><span style="color:#9399B2">(</span><span style="color:#CDD6F4">assert_is_not_alphabetized</span><span style="color:#9399B2">,</span><span style="color:#A6E3A1"> 'ba'</span><span style="color:#9399B2">,</span><span style="color:#A6E3A1"> 'aba'</span><span style="color:#9399B2">,</span><span style="color:#A6E3A1"> 'bob'</span><span style="color:#9399B2">)</span></span>
<span class="line"><span style="color:#CBA6F7">class</span><span style="color:#F9E2AF;font-style:italic"> IsAlphabetizedTestCase</span><span style="color:#9399B2">(</span><span style="color:#F9E2AF;font-style:italic">unittest</span><span style="color:#9399B2">.</span><span style="color:#F9E2AF;font-style:italic">TestCase</span><span style="color:#9399B2">):</span></span>
<span class="line"><span style="color:#CBA6F7">    pass</span></span></code></pre>
<p>Now we can run all</p>
<pre class="astro-code catppuccin-mocha" style="background-color:#1e1e2e;color:#cdd6f4; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="shell"><code><span class="line"><span style="color:#A6E3A1">======================================================================</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">FAIL:</span><span style="color:#A6E3A1"> test_assert_is_alphabetized_A-Cert</span><span style="color:#CDD6F4"> (example.test_alphabetical.IsAlphabetizedTestCase)</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">----------------------------------------------------------------------</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">Traceback</span><span style="color:#CDD6F4"> (most </span><span style="color:#A6E3A1">recent</span><span style="color:#A6E3A1"> call</span><span style="color:#A6E3A1"> last</span><span style="color:#CDD6F4">):</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">  File</span><span style="color:#A6E3A1"> "example/test_alphabetical.py",</span><span style="color:#A6E3A1"> line</span><span style="color:#A6E3A1"> 17,</span><span style="color:#A6E3A1"> in</span><span style="color:#A6E3A1"> test_input</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">    func(self,</span><span style="color:#A6E3A1"> input</span><span style="color:#CDD6F4">)</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">  File</span><span style="color:#A6E3A1"> "example/test_alphabetical.py",</span><span style="color:#A6E3A1"> line</span><span style="color:#A6E3A1"> 7,</span><span style="color:#A6E3A1"> in</span><span style="color:#A6E3A1"> assert_is_alphabetized</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">    self.assertTrue(is_alphabetized(input</span><span style="color:#CDD6F4">), u</span><span style="color:#A6E3A1">'{} was not considered alphabetized'</span><span style="color:#CDD6F4">.format(</span><span style="color:#89B4FA;font-style:italic">input</span><span style="color:#CDD6F4">))</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">AssertionError:</span><span style="color:#A6E3A1"> A-Cert</span><span style="color:#A6E3A1"> was</span><span style="color:#A6E3A1"> not</span><span style="color:#A6E3A1"> considered</span><span style="color:#A6E3A1"> alphabetized</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6E3A1">======================================================================</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">FAIL:</span><span style="color:#A6E3A1"> test_assert_is_alphabetized_iOS</span><span style="color:#CDD6F4"> (example.test_alphabetical.IsAlphabetizedTestCase)</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">----------------------------------------------------------------------</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">Traceback</span><span style="color:#CDD6F4"> (most </span><span style="color:#A6E3A1">recent</span><span style="color:#A6E3A1"> call</span><span style="color:#A6E3A1"> last</span><span style="color:#CDD6F4">):</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">  File</span><span style="color:#A6E3A1"> "example/test_alphabetical.py",</span><span style="color:#A6E3A1"> line</span><span style="color:#A6E3A1"> 17,</span><span style="color:#A6E3A1"> in</span><span style="color:#A6E3A1"> test_input</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">    func(self,</span><span style="color:#A6E3A1"> input</span><span style="color:#CDD6F4">)</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">  File</span><span style="color:#A6E3A1"> "example/test_alphabetical.py",</span><span style="color:#A6E3A1"> line</span><span style="color:#A6E3A1"> 7,</span><span style="color:#A6E3A1"> in</span><span style="color:#A6E3A1"> assert_is_alphabetized</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">    self.assertTrue(is_alphabetized(input</span><span style="color:#CDD6F4">), u</span><span style="color:#A6E3A1">'{} was not considered alphabetized'</span><span style="color:#CDD6F4">.format(</span><span style="color:#89B4FA;font-style:italic">input</span><span style="color:#CDD6F4">))</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">AssertionError:</span><span style="color:#A6E3A1"> iOS</span><span style="color:#A6E3A1"> was</span><span style="color:#A6E3A1"> not</span><span style="color:#A6E3A1"> considered</span><span style="color:#A6E3A1"> alphabetized</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">----------------------------------------------------------------------</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">Ran</span><span style="color:#FAB387"> 10</span><span style="color:#A6E3A1"> tests</span><span style="color:#A6E3A1"> in</span><span style="color:#A6E3A1"> 0.001s</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">FAILED</span><span style="color:#CDD6F4"> (failures=2)</span></span></code></pre>
<h2 id="conclusion">Conclusion</h2>
<p>Now with these handy generated test methods, we can make the necessary fixes
to our <code>is_alphabetical</code> function:</p>
<pre class="astro-code catppuccin-mocha" style="background-color:#1e1e2e;color:#cdd6f4; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="python"><code><span class="line"><span style="color:#CBA6F7">import</span><span style="color:#CDD6F4"> re</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CBA6F7">def</span><span style="color:#89B4FA;font-style:italic"> is_alphabetized</span><span style="color:#9399B2">(</span><span style="color:#EBA0AC;font-style:italic">value</span><span style="color:#9399B2">):</span></span>
<span class="line"><span style="color:#CDD6F4">    value </span><span style="color:#94E2D5">=</span><span style="color:#CDD6F4"> value</span><span style="color:#9399B2">.</span><span style="color:#89B4FA">lower</span><span style="color:#9399B2">()</span></span>
<span class="line"><span style="color:#CDD6F4">    value </span><span style="color:#94E2D5">=</span><span style="color:#CDD6F4"> re</span><span style="color:#9399B2">.</span><span style="color:#89B4FA">sub</span><span style="color:#9399B2">(</span><span style="color:#A6E3A1;font-style:italic">r</span><span style="color:#F5C2E7">'</span><span style="color:#9399B2">[</span><span style="color:#94E2D5">^</span><span style="color:#A6E3A1">a-z</span><span style="color:#9399B2">]</span><span style="color:#F5C2E7">'</span><span style="color:#9399B2">,</span><span style="color:#A6E3A1"> ''</span><span style="color:#9399B2">,</span><span style="color:#CDD6F4"> value</span><span style="color:#9399B2">)</span></span>
<span class="line"><span style="color:#CBA6F7">    return</span><span style="color:#A6E3A1"> ''</span><span style="color:#9399B2">.</span><span style="color:#89B4FA">join</span><span style="color:#9399B2">(</span><span style="color:#FAB387;font-style:italic">sorted</span><span style="color:#9399B2">(</span><span style="color:#CDD6F4">value</span><span style="color:#9399B2">))</span><span style="color:#94E2D5"> ==</span><span style="color:#CDD6F4"> value</span></span>
<span class="line"></span></code></pre>
<pre class="astro-code catppuccin-mocha" style="background-color:#1e1e2e;color:#cdd6f4; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="shell"><code><span class="line"><span style="color:#89B4FA;font-style:italic">----------------------------------------------------------------------</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">Ran</span><span style="color:#FAB387"> 10</span><span style="color:#A6E3A1"> tests</span><span style="color:#A6E3A1"> in</span><span style="color:#A6E3A1"> 0.001s</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">OK</span></span></code></pre>
<p>Ah, so satisfying…</p> <section><script>(()=>{var a=(s,i,o)=>{let r=async()=>{await(await s())()},t=typeof i.value=="object"?i.value:void 0,c={rootMargin:t==null?void 0:t.rootMargin},n=new IntersectionObserver(e=>{for(let l of e)if(l.isIntersecting){n.disconnect(),r();break}},c);for(let e of o.children)n.observe(e)};(self.Astro||(self.Astro={})).visible=a;window.dispatchEvent(new Event("astro:visible"));})();</script><astro-island uid="uEEMB" prefix="r5" component-url="/assets/Disqus.ZXPp-emh.js" component-export="default" renderer-url="/assets/client.BNUePGeN.js" props="{&quot;id&quot;:[0,&quot;generator-tests&quot;],&quot;title&quot;:[0,&quot;Generate Your Tests&quot;],&quot;shortname&quot;:[0,&quot;kevinstone&quot;]}" ssr client="visible" opts="{&quot;name&quot;:&quot;Disqus&quot;,&quot;value&quot;:true}" await-children><div id="disqus_thread"></div><!--astro:end--></astro-island></section> </article>   </div> </main> <footer data-astro-cid-sz7xmlte> <div class="fixed-width">  <p data-astro-cid-sz7xmlte>&copy; Kevin A. Stone 2026, Built with <a href="https://astro.build/" data-astro-cid-sz7xmlte>Astro</a></p>  </div> </footer>  </body></html>