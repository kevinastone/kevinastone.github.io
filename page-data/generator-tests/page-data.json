{"componentChunkName":"component---src-components-blog-post-tsx","path":"/generator-tests","webpackCompilationHash":"c7559eaa71837c74de3e","result":{"data":{"markdownRemark":{"html":"<p>When testing your application, you'll often come across the need to test that\nyour application behaves correct across a range of inputs or conditions.\nInstead of repetitively defining the same test scaffolding, let's use some\nmeta-programming to build our tests methods from a list of parameters.\n<a href=\"https://nose.readthedocs.org/en/latest/\">Nose</a> has support for <a href=\"https://nose.readthedocs.org/en/latest/writing_tests.html#test-generators\">Generator Tests</a>, but they don't\nwork with python's <code>unittest</code> framework. Let's walk-through how to build our\nown test generator that does.</p>\n<h2 id=\"our-test-case\"><a href=\"#our-test-case\" aria-label=\"our test case permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Our Test Case</h2>\n<p>So let's write a simple application for demonstration. We want to see if our\ninput string is alphabetized.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">is_alphabetized</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">return</span> <span class=\"token string\">''</span><span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span><span class=\"token builtin\">sorted</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> value</code></pre></div>\n<p>Now let's write a unit test case to check our implementation:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> unittest\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">IsAlphabetizedTestCase</span><span class=\"token punctuation\">(</span>unittest<span class=\"token punctuation\">.</span>TestCase<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">test_is_alphabetized</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        self<span class=\"token punctuation\">.</span>assertTrue<span class=\"token punctuation\">(</span>is_alphabetized<span class=\"token punctuation\">(</span><span class=\"token string\">'abcd'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">test_is_not_alphabetized</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        self<span class=\"token punctuation\">.</span>assertFalse<span class=\"token punctuation\">(</span>is_alphabetized<span class=\"token punctuation\">(</span><span class=\"token string\">'zyxw'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>We can go ahead and run these tests and they should pass:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token operator\">></span> nosetests example\n<span class=\"token punctuation\">..</span>\n----------------------------------------------------------------------\nRan <span class=\"token number\">2</span> tests <span class=\"token keyword\">in</span> <span class=\"token number\">0</span>.000s\n\nOK</code></pre></div>\n<p>But as you can see, our two test methods only tested simple examples. What we\nreally want to test is our function over a wide range of inputs to ensure our\nimplementation is robust.</p>\n<p>At this point, your thought is usually to iterate over a range of cases in your method, and assert that each of them works as desired:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">IsAlphabetizedTestCase</span><span class=\"token punctuation\">(</span>unittest<span class=\"token punctuation\">.</span>TestCase<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">test_is_alphabetized</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        inputs <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n            <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">'aaaaa'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">'ab'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">'abcd'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span>\n        <span class=\"token keyword\">for</span> <span class=\"token builtin\">input</span> <span class=\"token keyword\">in</span> inputs<span class=\"token punctuation\">:</span>\n            self<span class=\"token punctuation\">.</span>assertTrue<span class=\"token punctuation\">(</span>is_alphabetized<span class=\"token punctuation\">(</span><span class=\"token builtin\">input</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>But you lose the benefit of having a single assertion in your test. You can't\nisolate your test run to a single input. What if your test requires a setup\nor teardown after each case? You can't use all the advantages of the test\nframework.</p>\n<p>Let's say you have this setup and you get bug report that our naive\nimplementation above doesn't work correctly for <code>A-Cert</code> as well as one for <code>iOS</code>. Since we're big fans\nof TDD, we'll plug that in our test case of expected inputs:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> <span class=\"token punctuation\">.</span>alphabetical <span class=\"token keyword\">import</span> is_alphabetized\n\n<span class=\"token keyword\">import</span> unittest\n\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">IsAlphabetizedTestCase</span><span class=\"token punctuation\">(</span>unittest<span class=\"token punctuation\">.</span>TestCase<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">test_is_alphabetized</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        inputs <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n            <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">'aaaaa'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">'ab'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">'abcd'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">'A-Cert'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">'iOS'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span>\n        <span class=\"token keyword\">for</span> <span class=\"token builtin\">input</span> <span class=\"token keyword\">in</span> inputs<span class=\"token punctuation\">:</span>\n            self<span class=\"token punctuation\">.</span>assertTrue<span class=\"token punctuation\">(</span>is_alphabetized<span class=\"token punctuation\">(</span><span class=\"token builtin\">input</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>And give it a run:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span>\nFAIL: test_is_alphabetized <span class=\"token punctuation\">(</span>example.test_alphabetical.IsAlphabetizedTestCase<span class=\"token punctuation\">)</span>\n----------------------------------------------------------------------\nTraceback <span class=\"token punctuation\">(</span>most recent call last<span class=\"token punctuation\">)</span>:\n  File <span class=\"token string\">\"example/test_alphabetical.py\"</span>, line <span class=\"token number\">34</span>, <span class=\"token keyword\">in</span> test_is_alphabetized\n    self.assertTrue<span class=\"token punctuation\">(</span>is_alphabetized<span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">))</span>\nAssertionError: False is not <span class=\"token boolean\">true</span>\n\n----------------------------------------------------------------------</code></pre></div>\n<p>But as you can see, we don't know which test failed. We should update our\ntest case to indicate which word failed:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">    <span class=\"token keyword\">def</span> <span class=\"token function\">test_is_alphabetized</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        inputs <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n            <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">'aaaaa'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">'ab'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">'abcd'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">'A-Cert'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">'iOS'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span>\n        <span class=\"token keyword\">for</span> <span class=\"token builtin\">input</span> <span class=\"token keyword\">in</span> inputs<span class=\"token punctuation\">:</span>\n            self<span class=\"token punctuation\">.</span>assertTrue<span class=\"token punctuation\">(</span>is_alphabetized<span class=\"token punctuation\">(</span><span class=\"token builtin\">input</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">u'{} was not considered alphabetized'</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">input</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span>\nFAIL: test_is_alphabetized <span class=\"token punctuation\">(</span>example.test_alphabetical.IsAlphabetizedTestCase<span class=\"token punctuation\">)</span>\n----------------------------------------------------------------------\nTraceback <span class=\"token punctuation\">(</span>most recent call last<span class=\"token punctuation\">)</span>:\n  File <span class=\"token string\">\"example/test_alphabetical.py\"</span>, line <span class=\"token number\">46</span>, <span class=\"token keyword\">in</span> test_is_alphabetized\n    self.assertTrue<span class=\"token punctuation\">(</span>is_alphabetized<span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">)</span>, u<span class=\"token string\">'{} was not considered alphabetized'</span>.format<span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">))</span>\nAssertionError: A-Cert was not considered alphabetized\n\n----------------------------------------------------------------------</code></pre></div>\n<p>Now we at least know which word failed. But what about <code>iOS</code>? Because the\ntest exits on the first failure, we're unsure if that bug report was valid or\nnot.</p>\n<p>Before we go fixing our <code>is_alphabetical</code> implementation to handle the\npunctuation and capitalization, let's figure out how to get both inputs to\nfail.</p>\n<p>Instead of looping in our test method, we could instead write separate test methods for each input:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">IsAlphabetizedTestCase</span><span class=\"token punctuation\">(</span>unittest<span class=\"token punctuation\">.</span>TestCase<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">test_is_alphabetized_empty</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        self<span class=\"token punctuation\">.</span>assertTrue<span class=\"token punctuation\">(</span>is_alphabetized<span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">test_is_alphabetized_a</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        self<span class=\"token punctuation\">.</span>assertTrue<span class=\"token punctuation\">(</span>is_alphabetized<span class=\"token punctuation\">(</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">test_is_alphabetized_aaaaa</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        self<span class=\"token punctuation\">.</span>assertTrue<span class=\"token punctuation\">(</span>is_alphabetized<span class=\"token punctuation\">(</span><span class=\"token string\">'aaaaa'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></code></pre></div>\n<p>But boy is that exhausting having to repeat ourselves for each test. Instead,\nwe'd like to provide the list of inputs as before, but have individual test\nmethods generated for us. Nose actually supports this out of the box with\n<a href=\"https://nose.readthedocs.org/en/latest/writing_tests.html#test-generators\">Generator Tests</a>, but you can't use them with python\n<code>unittest.TestCase</code> and we'd lose any of help we get using the framework.</p>\n<p>But we can work around that limitation. We just need to define a new test\nmethod on our test class for each input and nose will run them just like any\nother test method.</p>\n<p>What we need to do is transform that list of inputs into individual test\nmethods. Instead of us manually writing all those test methods, what if we\nwrote a function that wrote the test class for us?</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">IsAlphabetizedTestCase</span><span class=\"token punctuation\">(</span>unittest<span class=\"token punctuation\">.</span>TestCase<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">pass</span>\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">add_methods</span><span class=\"token punctuation\">(</span>klass<span class=\"token punctuation\">,</span> <span class=\"token operator\">*</span>inputs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token triple-quoted-string string\">\"\"\"\n    Take a TestCase and add a test method for each input\n    \"\"\"</span>\n    <span class=\"token keyword\">for</span> <span class=\"token builtin\">input</span> <span class=\"token keyword\">in</span> inputs<span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">def</span> <span class=\"token function\">test_input</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n            self<span class=\"token punctuation\">.</span>assertTrue<span class=\"token punctuation\">(</span>is_alphabetized<span class=\"token punctuation\">(</span><span class=\"token builtin\">input</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">u'{} was not considered alphabetized'</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">input</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n        klass<span class=\"token punctuation\">.</span>test_input <span class=\"token operator\">=</span> test_input\n\n\nadd_methods<span class=\"token punctuation\">(</span>\n    IsAlphabetizedTestCase<span class=\"token punctuation\">,</span>\n    <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'aaaaa'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'ab'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'abcd'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'A-Cert'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'iOS'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Running those tests, we see:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span>\nFAIL: test_input <span class=\"token punctuation\">(</span>example.test_alphabetical.IsAlphabetizedTestCase<span class=\"token punctuation\">)</span>\n----------------------------------------------------------------------\nTraceback <span class=\"token punctuation\">(</span>most recent call last<span class=\"token punctuation\">)</span>:\n  File <span class=\"token string\">\"example/test_alphabetical.py\"</span>, line <span class=\"token number\">16</span>, <span class=\"token keyword\">in</span> test_input\n    self.assertTrue<span class=\"token punctuation\">(</span>is_alphabetized<span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">)</span>, u<span class=\"token string\">'{} was not considered alphabetized'</span>.format<span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">))</span>\nAssertionError: iOS was not considered alphabetized\n\n----------------------------------------------------------------------\nRan <span class=\"token number\">2</span> tests <span class=\"token keyword\">in</span> <span class=\"token number\">0</span>.001s\n\nFAILED <span class=\"token punctuation\">(</span>errors<span class=\"token operator\">=</span><span class=\"token number\">1</span>, <span class=\"token assign-left variable\">failures</span><span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>What happened? Shouldn't there be more tests? Well, we kept clobbering our\ntest in the klass. The trick is to give each test a unique name.</p>\n<p>Let's assign the test to the class using <code>setattr</code> with a custom name:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">add_methods</span><span class=\"token punctuation\">(</span>klass<span class=\"token punctuation\">,</span> <span class=\"token operator\">*</span>inputs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token triple-quoted-string string\">\"\"\"\n    Take a TestCase and add a test method for each input\n    \"\"\"</span>\n    <span class=\"token keyword\">for</span> <span class=\"token builtin\">input</span> <span class=\"token keyword\">in</span> inputs<span class=\"token punctuation\">:</span>\n        test_name <span class=\"token operator\">=</span> <span class=\"token string\">'test_alphabetical_{}'</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">input</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token keyword\">def</span> <span class=\"token function\">test_input</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n            self<span class=\"token punctuation\">.</span>assertTrue<span class=\"token punctuation\">(</span>is_alphabetized<span class=\"token punctuation\">(</span><span class=\"token builtin\">input</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">u'{} was not considered alphabetized'</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">input</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token builtin\">setattr</span><span class=\"token punctuation\">(</span>klass<span class=\"token punctuation\">,</span> test_name<span class=\"token punctuation\">,</span> test_input<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Now running the tests:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span>\nFAIL: test_alphabetical_ <span class=\"token punctuation\">(</span>example.test_alphabetical.IsAlphabetizedTestCase<span class=\"token punctuation\">)</span>\n----------------------------------------------------------------------\nTraceback <span class=\"token punctuation\">(</span>most recent call last<span class=\"token punctuation\">)</span>:\n  File <span class=\"token string\">\"example/test_alphabetical.py\"</span>, line <span class=\"token number\">18</span>, <span class=\"token keyword\">in</span> test_input\n    self.assertTrue<span class=\"token punctuation\">(</span>is_alphabetized<span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">)</span>, u<span class=\"token string\">'{} was not considered alphabetized'</span>.format<span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">))</span>\nAssertionError: iOS was not considered alphabetized\n\n<span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span>\nFAIL: test_alphabetical_A-Cert <span class=\"token punctuation\">(</span>example.test_alphabetical.IsAlphabetizedTestCase<span class=\"token punctuation\">)</span>\n----------------------------------------------------------------------\nTraceback <span class=\"token punctuation\">(</span>most recent call last<span class=\"token punctuation\">)</span>:\n  File <span class=\"token string\">\"example/test_alphabetical.py\"</span>, line <span class=\"token number\">18</span>, <span class=\"token keyword\">in</span> test_input\n    self.assertTrue<span class=\"token punctuation\">(</span>is_alphabetized<span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">)</span>, u<span class=\"token string\">'{} was not considered alphabetized'</span>.format<span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">))</span>\nAssertionError: iOS was not considered alphabetized\n\n<span class=\"token punctuation\">[</span><span class=\"token punctuation\">..</span>.<span class=\"token punctuation\">]</span>\n\n----------------------------------------------------------------------\nRan <span class=\"token number\">7</span> tests <span class=\"token keyword\">in</span> <span class=\"token number\">0</span>.001s\n\nFAILED <span class=\"token punctuation\">(</span>failures<span class=\"token operator\">=</span><span class=\"token number\">7</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Why are all tests failing with <code>iOS</code>? It should be running with each variant\nof our input. Turns out this is due to variable scoping in python. In\npython2, there's only two levels of scoping: function and global. So as we\nloop and define <code>test_input</code>, the value of <code>input</code> is being updated. When our\ntest methods are actually evaluated, it's always equal to the last value\n(<code>iOS</code>).</p>\n<p>To fix that, we'll define yet another function to capture the value of input\n(remember there's function scoping):</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">make_method</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">input</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    test_name <span class=\"token operator\">=</span> <span class=\"token string\">'test_alphabetical_{}'</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">input</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">test_input</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        self<span class=\"token punctuation\">.</span>assertTrue<span class=\"token punctuation\">(</span>is_alphabetized<span class=\"token punctuation\">(</span><span class=\"token builtin\">input</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">u'{} was not considered alphabetized'</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">input</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">return</span> test_name<span class=\"token punctuation\">,</span> test_input\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">add_methods</span><span class=\"token punctuation\">(</span>klass<span class=\"token punctuation\">,</span> <span class=\"token operator\">*</span>inputs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token triple-quoted-string string\">\"\"\"\n    Take a TestCase and add a test method for each input\n    \"\"\"</span>\n    <span class=\"token keyword\">for</span> <span class=\"token builtin\">input</span> <span class=\"token keyword\">in</span> inputs<span class=\"token punctuation\">:</span>\n        test_name<span class=\"token punctuation\">,</span> test_input <span class=\"token operator\">=</span> make_method<span class=\"token punctuation\">(</span><span class=\"token builtin\">input</span><span class=\"token punctuation\">)</span>\n        <span class=\"token builtin\">setattr</span><span class=\"token punctuation\">(</span>klass<span class=\"token punctuation\">,</span> test_name<span class=\"token punctuation\">,</span> test_input<span class=\"token punctuation\">)</span></code></pre></div>\n<p>With these changes, we finally get the results we expected:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span>\nFAIL: test_alphabetical_A-Cert <span class=\"token punctuation\">(</span>example.test_alphabetical.IsAlphabetizedTestCase<span class=\"token punctuation\">)</span>\n----------------------------------------------------------------------\nTraceback <span class=\"token punctuation\">(</span>most recent call last<span class=\"token punctuation\">)</span>:\n  File <span class=\"token string\">\"example/test_alphabetical.py\"</span>, line <span class=\"token number\">14</span>, <span class=\"token keyword\">in</span> test_input\n    self.assertTrue<span class=\"token punctuation\">(</span>is_alphabetized<span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">)</span>, u<span class=\"token string\">'{} was not considered alphabetized'</span>.format<span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">))</span>\nAssertionError: A-Cert was not considered alphabetized\n\n<span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span>\nFAIL: test_alphabetical_iOS <span class=\"token punctuation\">(</span>example.test_alphabetical.IsAlphabetizedTestCase<span class=\"token punctuation\">)</span>\n----------------------------------------------------------------------\nTraceback <span class=\"token punctuation\">(</span>most recent call last<span class=\"token punctuation\">)</span>:\n  File <span class=\"token string\">\"example/test_alphabetical.py\"</span>, line <span class=\"token number\">14</span>, <span class=\"token keyword\">in</span> test_input\n    self.assertTrue<span class=\"token punctuation\">(</span>is_alphabetized<span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">)</span>, u<span class=\"token string\">'{} was not considered alphabetized'</span>.format<span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">))</span>\nAssertionError: iOS was not considered alphabetized\n\n----------------------------------------------------------------------\nRan <span class=\"token number\">7</span> tests <span class=\"token keyword\">in</span> <span class=\"token number\">0</span>.001s\n\nFAILED <span class=\"token punctuation\">(</span>failures<span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>There you go, we are able to generate N test methods to validate our\nalphabetical function. Adding a new test is as simple as extending the list\nof inputs.</p>\n<h2 id=\"improving-the-test-generation\"><a href=\"#improving-the-test-generation\" aria-label=\"improving the test generation permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Improving the Test Generation</h2>\n<p>So we now have the ability to generate tests from an input list, but it\ninvolves a few methods and our test is now deeply nested in a helper factory.\nLet's improve this so we can use this more universally.</p>\n<p>First thing to notice is that <code>add_methods</code> takes a class as the first\nargument. That looks awfully like a decorator. Let's make a few tweaks so we\ncan use it to decorate our test class:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">add_methods</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>inputs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token triple-quoted-string string\">\"\"\"\n    Take a TestCase and add a test method for each input\n    \"\"\"</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">decorator</span><span class=\"token punctuation\">(</span>klass<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">for</span> <span class=\"token builtin\">input</span> <span class=\"token keyword\">in</span> inputs<span class=\"token punctuation\">:</span>\n            test_name<span class=\"token punctuation\">,</span> test_input <span class=\"token operator\">=</span> make_method<span class=\"token punctuation\">(</span><span class=\"token builtin\">input</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">setattr</span><span class=\"token punctuation\">(</span>klass<span class=\"token punctuation\">,</span> test_name<span class=\"token punctuation\">,</span> test_input<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span> klass\n\n    <span class=\"token keyword\">return</span> decorator\n\n\n@add_methods<span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'aaaaa'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'ab'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'abcd'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'A-Cert'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'iOS'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">IsAlphabetizedTestCase</span><span class=\"token punctuation\">(</span>unittest<span class=\"token punctuation\">.</span>TestCase<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">pass</span></code></pre></div>\n<p>All we did was wrap our method generation in a <code>decorator</code> function that takes\nan input class, adds the method and returns the class.</p>\n<h3 id=\"naming-the-test-functions\"><a href=\"#naming-the-test-functions\" aria-label=\"naming the test functions permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Naming the Test Functions</h3>\n<p>if you inspect the test class, even though we have methods under unique names\nbased on the input (like <code>test_input_iOS</code>), we can't reference those class\nnames when using nose because they all are still just named <code>test_input</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">ipdb<span class=\"token operator\">></span> pp IsAlphabetizedTestCase<span class=\"token punctuation\">.</span>test_alphabetical_iOS\n<span class=\"token operator\">&lt;</span>unbound method IsAlphabetizedTestCase<span class=\"token punctuation\">.</span>test_input<span class=\"token operator\">></span></code></pre></div>\n<p>To fix this, we need to set the <code>__name__</code> attribute on the function when\ngenerating it. This has the extra benefit of not needing to return a name for\nthe assignment, we can just use the same:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">make_method</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">input</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">test_input</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        self<span class=\"token punctuation\">.</span>assertTrue<span class=\"token punctuation\">(</span>is_alphabetized<span class=\"token punctuation\">(</span><span class=\"token builtin\">input</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">u'{} was not considered alphabetized'</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">input</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n    test_input<span class=\"token punctuation\">.</span>__name__ <span class=\"token operator\">=</span> <span class=\"token string\">'test_alphabetical_{}'</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">input</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> test_input\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">add_methods</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>inputs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token triple-quoted-string string\">\"\"\"\n    Take a TestCase and add a test method for each input\n    \"\"\"</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">decorator</span><span class=\"token punctuation\">(</span>klass<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">for</span> <span class=\"token builtin\">input</span> <span class=\"token keyword\">in</span> inputs<span class=\"token punctuation\">:</span>\n            test_input <span class=\"token operator\">=</span> make_method<span class=\"token punctuation\">(</span><span class=\"token builtin\">input</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">setattr</span><span class=\"token punctuation\">(</span>klass<span class=\"token punctuation\">,</span> test_input<span class=\"token punctuation\">.</span>__name__<span class=\"token punctuation\">,</span> test_input<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span> klass\n\n    <span class=\"token keyword\">return</span> decorator</code></pre></div>\n<p>Now with the function named accurately, we can specify a single test method to run:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">nosetests example/test_alphabetical.py:IsAlphabetizedTestCase.test_alphabetical_iOS\nF\n<span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span>\nFAIL: test_alphabetical_iOS <span class=\"token punctuation\">(</span>example.test_alphabetical.IsAlphabetizedTestCase<span class=\"token punctuation\">)</span>\n----------------------------------------------------------------------\nTraceback <span class=\"token punctuation\">(</span>most recent call last<span class=\"token punctuation\">)</span>:\n  File <span class=\"token string\">\"example/test_alphabetical.py\"</span>, line <span class=\"token number\">8</span>, <span class=\"token keyword\">in</span> test_input\n    self.assertTrue<span class=\"token punctuation\">(</span>is_alphabetized<span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">)</span>, u<span class=\"token string\">'{} was not considered alphabetized'</span>.format<span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">))</span>\nAssertionError: iOS was not considered alphabetized\n\n----------------------------------------------------------------------\nRan <span class=\"token number\">1</span> <span class=\"token builtin class-name\">test</span> <span class=\"token keyword\">in</span> <span class=\"token number\">0</span>.001s\n\nFAILED <span class=\"token punctuation\">(</span>failures<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h2 id=\"generalize-the-test-method-factory\"><a href=\"#generalize-the-test-method-factory\" aria-label=\"generalize the test method factory permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Generalize the Test Method Factory</h2>\n<p>So our class decorator works well for our single test method generator. But\nwhat if we have multiple test methods we want to generate? Remember our\ninitial example also included expected False results? Let's make it so we can\npass in the test method:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> <span class=\"token punctuation\">.</span>alphabetical <span class=\"token keyword\">import</span> is_alphabetized\n\n<span class=\"token keyword\">import</span> unittest\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">assert_is_alphabetized</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> <span class=\"token builtin\">input</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    self<span class=\"token punctuation\">.</span>assertTrue<span class=\"token punctuation\">(</span>is_alphabetized<span class=\"token punctuation\">(</span><span class=\"token builtin\">input</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">u'{} was not considered alphabetized'</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">input</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">assert_is_not_alphabetized</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> <span class=\"token builtin\">input</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    self<span class=\"token punctuation\">.</span>assertFalse<span class=\"token punctuation\">(</span>is_alphabetized<span class=\"token punctuation\">(</span><span class=\"token builtin\">input</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">u'{} was considered alphabetized'</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">input</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">make_method</span><span class=\"token punctuation\">(</span>func<span class=\"token punctuation\">,</span> <span class=\"token builtin\">input</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">test_input</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        func<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> <span class=\"token builtin\">input</span><span class=\"token punctuation\">)</span>\n\n    test_input<span class=\"token punctuation\">.</span>__name__ <span class=\"token operator\">=</span> <span class=\"token string\">'test_{func}_{input}'</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>func<span class=\"token operator\">=</span>func<span class=\"token punctuation\">.</span>__name__<span class=\"token punctuation\">,</span> <span class=\"token builtin\">input</span><span class=\"token operator\">=</span><span class=\"token builtin\">input</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> test_input\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">generate</span><span class=\"token punctuation\">(</span>func<span class=\"token punctuation\">,</span> <span class=\"token operator\">*</span>inputs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token triple-quoted-string string\">\"\"\"\n    Take a TestCase and add a test method for each input\n    \"\"\"</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">decorator</span><span class=\"token punctuation\">(</span>klass<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">for</span> <span class=\"token builtin\">input</span> <span class=\"token keyword\">in</span> inputs<span class=\"token punctuation\">:</span>\n            test_input <span class=\"token operator\">=</span> make_method<span class=\"token punctuation\">(</span>func<span class=\"token punctuation\">,</span> <span class=\"token builtin\">input</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">setattr</span><span class=\"token punctuation\">(</span>klass<span class=\"token punctuation\">,</span> test_input<span class=\"token punctuation\">.</span>__name__<span class=\"token punctuation\">,</span> test_input<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span> klass\n\n    <span class=\"token keyword\">return</span> decorator\n\n\n@generate<span class=\"token punctuation\">(</span>assert_is_alphabetized<span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'aaaaa'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'ab'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'abcd'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'A-Cert'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'iOS'</span><span class=\"token punctuation\">)</span>\n@generate<span class=\"token punctuation\">(</span>assert_is_not_alphabetized<span class=\"token punctuation\">,</span> <span class=\"token string\">'ba'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'aba'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'bob'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">IsAlphabetizedTestCase</span><span class=\"token punctuation\">(</span>unittest<span class=\"token punctuation\">.</span>TestCase<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">pass</span></code></pre></div>\n<p>Now we can run all</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span>\nFAIL: test_assert_is_alphabetized_A-Cert <span class=\"token punctuation\">(</span>example.test_alphabetical.IsAlphabetizedTestCase<span class=\"token punctuation\">)</span>\n----------------------------------------------------------------------\nTraceback <span class=\"token punctuation\">(</span>most recent call last<span class=\"token punctuation\">)</span>:\n  File <span class=\"token string\">\"example/test_alphabetical.py\"</span>, line <span class=\"token number\">17</span>, <span class=\"token keyword\">in</span> test_input\n    func<span class=\"token punctuation\">(</span>self, input<span class=\"token punctuation\">)</span>\n  File <span class=\"token string\">\"example/test_alphabetical.py\"</span>, line <span class=\"token number\">7</span>, <span class=\"token keyword\">in</span> assert_is_alphabetized\n    self.assertTrue<span class=\"token punctuation\">(</span>is_alphabetized<span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">)</span>, u<span class=\"token string\">'{} was not considered alphabetized'</span>.format<span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">))</span>\nAssertionError: A-Cert was not considered alphabetized\n\n<span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span>\nFAIL: test_assert_is_alphabetized_iOS <span class=\"token punctuation\">(</span>example.test_alphabetical.IsAlphabetizedTestCase<span class=\"token punctuation\">)</span>\n----------------------------------------------------------------------\nTraceback <span class=\"token punctuation\">(</span>most recent call last<span class=\"token punctuation\">)</span>:\n  File <span class=\"token string\">\"example/test_alphabetical.py\"</span>, line <span class=\"token number\">17</span>, <span class=\"token keyword\">in</span> test_input\n    func<span class=\"token punctuation\">(</span>self, input<span class=\"token punctuation\">)</span>\n  File <span class=\"token string\">\"example/test_alphabetical.py\"</span>, line <span class=\"token number\">7</span>, <span class=\"token keyword\">in</span> assert_is_alphabetized\n    self.assertTrue<span class=\"token punctuation\">(</span>is_alphabetized<span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">)</span>, u<span class=\"token string\">'{} was not considered alphabetized'</span>.format<span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">))</span>\nAssertionError: iOS was not considered alphabetized\n\n----------------------------------------------------------------------\nRan <span class=\"token number\">10</span> tests <span class=\"token keyword\">in</span> <span class=\"token number\">0</span>.001s\n\nFAILED <span class=\"token punctuation\">(</span>failures<span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h2 id=\"conclusion\"><a href=\"#conclusion\" aria-label=\"conclusion permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusion</h2>\n<p>Now with these handy generated test methods, we can make the necessary fixes\nto our <code>is_alphabetical</code> function:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> re\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">is_alphabetized</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    value <span class=\"token operator\">=</span> value<span class=\"token punctuation\">.</span>lower<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    value <span class=\"token operator\">=</span> re<span class=\"token punctuation\">.</span>sub<span class=\"token punctuation\">(</span><span class=\"token string\">r'[^a-z]'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> <span class=\"token string\">''</span><span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span><span class=\"token builtin\">sorted</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> value</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">----------------------------------------------------------------------\nRan <span class=\"token number\">10</span> tests <span class=\"token keyword\">in</span> <span class=\"token number\">0</span>.001s\n\nOK</code></pre></div>\n<p>Ah, so satisfying....</p>","excerpt":"When testing your application, you'll often come across the need to test that\nyour application behaves correct across a range of inputs or…","frontmatter":{"title":"Generate Your Tests","date":"October 12, 2015","hero":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAABAABAv/EABUBAQEAAAAAAAAAAAAAAAAAAAAE/9oADAMBAAIQAxAAAAFOh6lrXEj/xAAYEAEBAQEBAAAAAAAAAAAAAAAAARMSQf/aAAgBAQABBQJ47rStK//EABYRAAMAAAAAAAAAAAAAAAAAAAABEf/aAAgBAwEBPwGoqP/EABYRAAMAAAAAAAAAAAAAAAAAAAABEv/aAAgBAgEBPwGGQz//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAbEAACAQUAAAAAAAAAAAAAAAAAAREQITFBYf/aAAgBAQABPyEeyFilbiEcEf/aAAwDAQACAAMAAAAQPx//xAAWEQEBAQAAAAAAAAAAAAAAAAAAAWH/2gAIAQMBAT8Qq2f/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ECv/xAAZEAEBAQEBAQAAAAAAAAAAAAABEQAhQVH/2gAIAQEAAT8QEDuDSH3UhZd0sN7QYMmP/9k=","aspectRatio":1.5440289505428226,"src":"/static/967c2c85d7ef944e8a862ee4ee41ae12/52c5c/Transmission_Lines.jpg","srcSet":"/static/967c2c85d7ef944e8a862ee4ee41ae12/b7684/Transmission_Lines.jpg 480w,\n/static/967c2c85d7ef944e8a862ee4ee41ae12/53d70/Transmission_Lines.jpg 960w,\n/static/967c2c85d7ef944e8a862ee4ee41ae12/52c5c/Transmission_Lines.jpg 1280w","sizes":"(max-width: 1280px) 100vw, 1280px"}}},"tags":"Python"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/generator-tests"}}}